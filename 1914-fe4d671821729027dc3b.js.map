{"version":3,"file":"1914-fe4d671821729027dc3b.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKe,kCAIZ,CACC,GAAM,mBAAN,MACA,GAAM,gDACFA,iCAAc,CADlB,KACkB,CADlB,CAEA,GAAMC,CAAAA,MAAM,CAAGC,eAAf,GAEA,GAAMC,CAAAA,QAAQ,CAAG,CAACC,KAAK,CAAvB,KAAuB,CAAvB,CACA,GAAMC,CAAAA,MAAM,CAAGF,QAAQ,CAAMG,IAAI,CAAJA,KAAAA,CAAWC,KAAK,CAAtB,GAAMD,EAAN,IAAvB,KAEA,GAAME,CAAAA,CAAC,CAAP,EACA,GAAMC,CAAAA,CAAC,CAAP,MACA,GAAMC,CAAAA,EAAE,CAAR,IACA,GAAMC,CAAAA,EAAE,CAAG,CAACF,CAAC,CAAF,KAAY,CAAC,KAAD,OAAvB,IAAW,CAAX,CAEA,mBACI,8CAAW,KAAK,CAAhB,EAAqB,MAAM,CAA3B,EAAgC,IAAI,CAApC,MACKN,QAAQ,eACL,6CACI,gCAAU,EAAE,CAAZ,qBACI,4BAAM,CAAC,CAAP,EAAY,CAAC,CAAEM,CAAC,CAAhB,GAAuB,KAAK,CAA5B,EAAiC,MAAM,CAJvD,EAIgB,EADJ,CADJ,CAFR,cAQI,4BACI,IAAI,CADR,WAEI,CAAC,CAVT,6JAQI,EARJ,cAYI,4BACI,IAAI,CADR,OAEI,CAAC,CAFL,8JAGI,QAAQ,gBAfhB,GAYI,EAZJ,cAiBI,4BACI,IAAI,CADR,kBAEI,CAAC,CAnBT,s9CAiBI,EAjBJ,cAqBI,0CACI,CAAC,CAAED,CAAC,CADR,EAEI,CAAC,CAFL,MAGI,QAAQ,CAHZ,IAII,WAAW,CAJf,mBAMI,IAAI,CANR,SAtBR,MAsBQ,CArBJ,CADJ,CAkCH;;;;AC7Cc,qCAA6D,CACxE,GAAM,sCAAN,MACA,GAAMI,CAAAA,WAAW,CAAGC,8BAAW,SAAUC,oDAAV,CAA/B,CACA,GAAM,QAAUC,qDAAwB,aAAxC,KAAwC,CAAxC,CACA,GAAMC,CAAAA,UAAU,CAAGC,gCAAa,SAAUC,QAAV,OAAUA,EAAAA,QAAV,SAAUA,CAAV,MAAUA,CAAAA,QAAQ,CAAlD,MAAgC,CAAhC,CACA,GAAMC,CAAAA,MAAM,CAAGC,mCAAgB,CAA/B,OAA+B,CAA/B,CACA,GAAMC,CAAAA,KAAK,CAAGF,MAAM,aAApB,UACA,GAAMG,CAAAA,QAAQ,CAAGpB,eAAjB,GAEA,GAAMC,CAAAA,QAAQ,CAAG,CAACC,KAAK,CAAvB,KAAuB,CAAvB,CAEA,GAAMmB,CAAAA,QAAQ,CAAG,kBAAuD,CACpE,GAAMC,CAAAA,MAAM,CAAZ,SACAL,MAAM,GAANA,IAAAA,EAAAA,MAAM,OAANA,EAAAA,CAAAA,IAAAA,EAAAA,CAAAA,MAAM,CAANA,OAAAA,CAAAA,SAAAA,CAA0B,CAA1BA,MAA0B,CAA1BA,CAAAA,CACAP,WAAW,CAAXA,OAAAA,GAHJ,EAMA,mBACI,0CAAM,SAAS,CAAf,KAAgB,OAAO,CAAvB,gBACI,0CAAM,IAAI,CAAV,KAAW,EAAE,CAAb,iBACI,wCACI,KAAK,CADT,MAEI,KAAK,CAFT,MAGI,IAAI,CALhB,UAEQ,EADJ,CADJ,CAQK,CAACO,MAAM,EAAI,CAAX,oCACG,0CAAM,IAAI,CAAV,KAAW,EAAE,CAAb,mBACI,4CACI,EAAE,CADN,SAEI,aAFJ,WAGI,iBAAiB,CAHrB,MAII,GAAG,CAJP,EAKI,GAAG,CALP,EAMI,IAAI,CANR,KAOI,KAAK,CAPT,MAQI,QAAQ,CARZ,SASI,KAAK,CApBzB,KAWgB,EADJ,CATR,CADJ,CA0BH","sources":["webpack://jacdac-docs/./src/components/widgets/SoilMoistureWidget.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardSoilMoisture.tsx"],"sourcesContent":["import React from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { useId } from \"react\"\n\nexport default function SoilMoistureWidget(props: {\n    value: number\n    color: \"primary\" | \"secondary\"\n    size?: string\n}) {\n    const { value, color, size } = props\n    const { active, background, controlBackground, textProps } =\n        useWidgetTheme(color)\n    const clipId = useId()\n\n    const hasValue = !isNaN(value)\n    const tvalue = hasValue ? `${Math.round(value * 100)}%` : `--`\n\n    const w = 5\n    const h = 9.488\n    const cm = 3.3\n    const ch = (h - cm) * ((0.12 + value) / 1.12)\n\n    return (\n        <SvgWidget width={w} height={h} size={size}>\n            {hasValue && (\n                <defs>\n                    <clipPath id={clipId}>\n                        <rect x={0} y={h - ch} width={w} height={ch} />\n                    </clipPath>\n                </defs>\n            )}\n            <path\n                fill={background}\n                d=\"M4.812 7.997V.5a.5.5 0 00-.5-.5H.689a.5.5 0 00-.5.5v7.497l.503 1.491h.466l.503-1.491V3.373a.792.792 0 01.84-.791.792.792 0 01.838.79v4.625l.503 1.491h.466z\"\n            />\n            <path\n                fill={active}\n                d=\"M4.812 7.997V.5a.5.5 0 00-.5-.5H.689a.5.5 0 00-.5.5v7.497l.503 1.491h.466l.503-1.491V3.373a.792.792 0 01.84-.791.792.792 0 01.838.79v4.625l.503 1.491h.466z\"\n                clipPath={`url(#${clipId})`}\n            />\n            <path\n                fill={controlBackground}\n                d=\"M4.075 8.548a.075.075 0 100-.15.075.075 0 100 .15zM4.425 7.281a.075.075 0 100-.15.075.075 0 100 .15zM4.425 5.948a.075.075 0 100-.15.075.075 0 100 .15zM3.725 4.614a.075.075 0 100-.15.075.075 0 100 .15zM3.725 3.948a.075.075 0 100-.15.075.075 0 100 .15zM3.725 5.281a.075.075 0 100-.15.075.075 0 100 .15zM4.425 6.614a.075.075 0 100-.15.075.075 0 100 .15zM4.425 7.948a.075.075 0 100-.15.075.075 0 100 .15zM3.725 7.281a.075.075 0 100-.15.075.075 0 100 .15zM3.725 5.948a.075.075 0 100-.15.075.075 0 100 .15zM4.425 4.614a.075.075 0 100-.15.075.075 0 100 .15zM4.425 3.948a.075.075 0 100-.15.075.075 0 100 .15zM4.425 5.281a.075.075 0 100-.15.075.075 0 100 .15zM3.725 6.614a.075.075 0 100-.15.075.075 0 100 .15zM3.725 7.948a.075.075 0 100-.15.075.075 0 100 .15zM.925 8.548a.075.075 0 100-.15.075.075 0 100 .15zM.575 7.281a.075.075 0 100-.15.075.075 0 100 .15zM.575 5.948a.075.075 0 100-.15.075.075 0 100 .15zM1.275 4.614a.075.075 0 100-.15.075.075 0 100 .15zM1.275 3.948a.075.075 0 100-.15.075.075 0 100 .15zM1.275 5.281a.075.075 0 100-.15.075.075 0 100 .15zM.575 6.614a.075.075 0 100-.15.075.075 0 100 .15zM.575 7.948a.075.075 0 100-.15.075.075 0 100 .15zM1.275 7.281a.075.075 0 100-.15.075.075 0 100 .15zM1.275 5.948a.075.075 0 100-.15.075.075 0 100 .15zM.575 4.614a.075.075 0 100-.15.075.075 0 100 .15zM.575 3.948a.075.075 0 100-.15.075.075 0 100 .15zM.575 5.281a.075.075 0 100-.15.075.075 0 100 .15zM1.275 6.614a.075.075 0 100-.15.075.075 0 100 .15zM1.275 7.948a.075.075 0 100-.15.075.075 0 100 .15z\"\n            />\n            <text\n                x={w / 2}\n                y=\"1.4\"\n                fontSize=\"1\"\n                strokeWidth=\".026\"\n                {...textProps}\n                fill={\"#fff\"}\n            >\n                {tvalue}\n            </text>\n        </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport { SoilMoistureReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport useWidgetSize from \"../widgets/useWidgetSize\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport { SensorServer } from \"../../../jacdac-ts/src/servers/sensorserver\"\nimport { Grid, Slider } from \"@mui/material\"\nimport SoilMoistureWidget from \"../widgets/SoilMoistureWidget\"\nimport useRegister from \"../hooks/useRegister\"\nimport { useId } from \"react\"\n\nexport default function DashboardSoilMoisture(props: DashboardServiceProps) {\n    const { service, services, variant, controlled } = props\n    const moistureReg = useRegister(service, SoilMoistureReg.Moisture)\n    const [value] = useRegisterUnpackedValue<[number]>(moistureReg, props)\n    const widgetSize = useWidgetSize(variant, services?.length)\n    const server = useServiceServer<SensorServer<[number]>>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const sliderId = useId()\n\n    const hasValue = !isNaN(value)\n\n    const onChange = (event: unknown, newValue: number | number[]): void => {\n        const svalue = newValue as number\n        server?.reading.setValues([svalue])\n        moistureReg.refresh()\n    }\n\n    return (\n        <Grid container spacing={1}>\n            <Grid item xs={12}>\n                <SoilMoistureWidget\n                    value={value}\n                    color={color}\n                    size={widgetSize}\n                />\n            </Grid>\n            {(server || !controlled) && hasValue && (\n                <Grid item xs>\n                    <Slider\n                        id={sliderId}\n                        aria-label=\"moisture\"\n                        valueLabelDisplay=\"off\"\n                        min={0}\n                        max={1}\n                        step={0.05}\n                        value={value}\n                        onChange={onChange}\n                        color={color}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n"],"names":["useWidgetTheme","clipId","useId","hasValue","isNaN","tvalue","Math","value","w","h","cm","ch","moistureReg","useRegister","SoilMoistureReg","useRegisterUnpackedValue","widgetSize","useWidgetSize","services","server","useServiceServer","color","sliderId","onChange","svalue"],"sourceRoot":""}