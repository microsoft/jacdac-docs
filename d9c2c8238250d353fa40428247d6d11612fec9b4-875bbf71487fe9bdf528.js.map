{"version":3,"file":"d9c2c8238250d353fa40428247d6d11612fec9b4-875bbf71487fe9bdf528.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@mui/icons-material/Circle.js","webpack://jacdac-docs/./node_modules/core-js/internals/add-to-unscopables.js","webpack://jacdac-docs/./node_modules/core-js/internals/array-species-constructor.js","webpack://jacdac-docs/./node_modules/core-js/internals/array-species-create.js","webpack://jacdac-docs/./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack://jacdac-docs/./node_modules/core-js/internals/flatten-into-array.js","webpack://jacdac-docs/./node_modules/core-js/internals/function-bind-context.js","webpack://jacdac-docs/./node_modules/core-js/internals/html.js","webpack://jacdac-docs/./node_modules/core-js/internals/is-array.js","webpack://jacdac-docs/./node_modules/core-js/internals/object-create.js","webpack://jacdac-docs/./node_modules/core-js/internals/object-define-properties.js","webpack://jacdac-docs/./node_modules/core-js/internals/object-keys.js","webpack://jacdac-docs/./node_modules/core-js/modules/es.array.flat-map.js","webpack://jacdac-docs/./node_modules/core-js/modules/es.array.unscopables.flat-map.js","webpack://jacdac-docs/./src/components/dashboard/DashboardRegisterValueFallback.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardServiceDefaultWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdLEDWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdPumpWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdServoWidget.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardFwdUniqueComponents.tsx","webpack://jacdac-docs/./src/components/widgets/FwdDialButtonWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdDialWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdLineWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdSoilMoistureWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdSolarWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdSonarWidget.tsx","webpack://jacdac-docs/./src/components/widgets/FwdTouchWidget.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardFwdEduWidgets.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardButton.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardRotaryEncoder.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardSwitch.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardGamepad.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardServiceWidget.tsx","webpack://jacdac-docs/./src/components/devices/useDeviceSpecifications.ts","webpack://jacdac-docs/./src/components/hooks/useAnimationFrame.ts","webpack://jacdac-docs/./src/components/hooks/useEvent.ts","webpack://jacdac-docs/./src/components/hooks/useThrottledValue.ts","webpack://jacdac-docs/./src/components/widgets/ColorButtons.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z\"\n}), 'Circle');\nexports.default = _default;","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg) : false;\n  var element, elementLen;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        elementLen = lengthOfArrayLike(element);\n        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;\n      } else {\n        doesNotExceedSafeInteger(targetIndex + 1);\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es-x/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es-x/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es-x/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es-x/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-array.prototype.flatmap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A;\n    aCallable(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n","import React, { useEffect } from \"react\"\nimport { humanify } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport { JDRegister } from \"../../../jacdac-ts/src/jdom/register\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport IconButtonWithProgress from \"../ui/IconButtonWithProgress\"\n\nexport default function DashboardRegisterValueFallback(props: {\n    register: JDRegister\n}) {\n    const { register } = props\n    const service = register.service\n    const server = useServiceServer(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const handleRefresh = () => register?.sendGetAsync()\n    const registerName = humanify(register.name)\n\n    // try forcing a refresh\n    useEffect(() => { register?.sendGetAsync() }, [register])\n\n    return (\n        <IconButtonWithProgress\n            color={color}\n            title={`refresh ${registerName}`}\n            indeterminate={true}\n            onClick={handleRefresh}\n        />\n    )\n}\n","import React, { useMemo } from \"react\"\nimport { SystemReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { isRegister } from \"../../../jacdac-ts/src/jdom/spec\"\nimport RegisterInput from \"../RegisterInput\"\nimport { JDRegister } from \"../../../jacdac-ts/src/jdom/register\"\nimport {\n    useRegisterBoolValue,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\n\nconst collapsedRegisters = [\n    SystemReg.Reading,\n    SystemReg.Value,\n    SystemReg.Intensity,\n]\n\nfunction ValueWidget(\n    props: {\n        valueRegister: JDRegister\n        intensityRegister: JDRegister\n    } & DashboardServiceProps\n) {\n    const { valueRegister, intensityRegister, controlled, ...others } = props\n    const { visible } = others\n    const hasIntensityBool =\n        intensityRegister?.specification?.fields[0]?.type === \"bool\"\n    const intensity = useRegisterBoolValue(\n        hasIntensityBool && intensityRegister,\n        others\n    )\n    const off = hasIntensityBool ? !intensity : undefined\n    const toggleOff = async () => {\n        await intensityRegister.sendSetBoolAsync(off, true)\n    }\n\n    return (\n        <RegisterInput\n            register={valueRegister}\n            variant={\"widget\"}\n            showServiceName={false}\n            showRegisterName={false}\n            hideMissingValues={true}\n            off={off}\n            toggleOff={hasIntensityBool ? toggleOff : undefined}\n            visible={visible}\n            controlled={controlled}\n        />\n    )\n}\n\nfunction IntensityWidget(\n    props: { intensityRegister: JDRegister } & DashboardServiceProps\n) {\n    const { intensityRegister, controlled, ...others } = props\n    const { visible } = others\n\n    const hasIntensityBool =\n        intensityRegister?.specification?.fields[0]?.type === \"bool\"\n    const [intensity] = useRegisterUnpackedValue<[number | boolean]>(\n        intensityRegister,\n        others\n    )\n    const off = hasIntensityBool ? !intensity : undefined\n\n    return (\n        <RegisterInput\n            register={intensityRegister}\n            variant={\"widget\"}\n            showServiceName={false}\n            showRegisterName={false}\n            hideMissingValues={true}\n            off={off}\n            visible={visible}\n            controlled={controlled}\n        />\n    )\n}\n\nfunction DefaultRegisterWidget(\n    props: { register: JDRegister } & DashboardServiceProps\n) {\n    const { register, controlled, ...rest } = props\n    if (register.specification.identifier == SystemReg.Value) {\n        const intensityRegister = props.service.register(SystemReg.Intensity)\n        return (\n            <ValueWidget\n                valueRegister={register}\n                intensityRegister={intensityRegister}\n                controlled={controlled}\n                {...rest}\n            />\n        )\n    } else if (register.specification.identifier === SystemReg.Intensity)\n        return (\n            <IntensityWidget\n                intensityRegister={register}\n                controlled={controlled}\n                {...rest}\n            />\n        )\n    else\n        return (\n            <RegisterInput\n                register={register}\n                variant={\"widget\"}\n                showServiceName={false}\n                showRegisterName={false}\n                hideMissingValues={true}\n                visible={props.visible}\n                controlled={controlled}\n            />\n        )\n}\n\nexport default function DashboardServiceDefaultWidget(\n    props: DashboardServiceProps\n) {\n    const { service } = props\n    const { specification } = service\n    const registers = useMemo(\n        () =>\n            specification?.packets\n                .filter(\n                    pkt =>\n                        isRegister(pkt) &&\n                        collapsedRegisters.indexOf(pkt.identifier) > -1\n                )\n                // if value, skip bool intensity\n                .filter(\n                    (pkt, i, pkts) =>\n                        !(\n                            pkt.identifier === SystemReg.Intensity &&\n                            pkt.fields.length == 1 &&\n                            pkt.fields[0].type === \"bool\"\n                        ) || !pkts.some(pk => pk.identifier === SystemReg.Value)\n                )\n                // map\n                .map(rspec => service.register(rspec.identifier)),\n        [service]\n    )\n\n    if (!registers?.length)\n        // nothing to see here\n        return null\n\n    return (\n        <>\n            {registers.map(register => (\n                <DefaultRegisterWidget\n                    key={register.id}\n                    register={register}\n                    {...props}\n                />\n            ))}\n        </>\n    )\n}\n","import React, { useCallback, useEffect, useRef } from \"react\"\nimport {\n    LedStripVariant,\n    LedVariant,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport useFireKey from \"../hooks/useFireKey\"\nimport \"./fwd-edu.css\"\n\nexport const MIN_VISIBLE_OPACITY = 0.5\n\nfunction rgbToHsl(r: number, g: number, b: number): [number, number, number] {\n    const [r$, g$, b$] = [r / 255, g / 255, b / 255]\n    const cMin = Math.min(r$, g$, b$)\n    const cMax = Math.max(r$, g$, b$)\n    const cDelta = cMax - cMin\n    let h: number\n    let s: number\n    let l: number\n    const maxAndMin = cMax + cMin\n\n    //lum\n    l = (maxAndMin / 2) * 100\n\n    if (cDelta === 0) s = h = 0\n    else {\n        //hue\n        if (cMax === r$) h = 60 * (((g$ - b$) / cDelta) % 6)\n        else if (cMax === g$) h = 60 * ((b$ - r$) / cDelta + 2)\n        else if (cMax === b$) h = 60 * ((r$ - g$) / cDelta + 4)\n\n        //sat\n        if (l > 50) s = 100 * (cDelta / (2 - maxAndMin))\n        else s = 100 * (cDelta / maxAndMin)\n    }\n\n    // at least 30% luminosity\n    l = Math.max(l, 40)\n    return [Math.floor(h), Math.floor(s), Math.floor(l)]\n}\n\nfunction setRgba(\n    el: SVGElement,\n    r: number,\n    g: number,\n    b: number,\n    a: number,\n    radius?: number\n) {\n    const hsl = rgbToHsl(r, g, b)\n    const [h, s, l] = hsl\n    const fill = `hsla(${h}, ${s}%, ${l}%, ${a})`\n    el.setAttribute(\"fill\", fill)\n    if (radius !== undefined) {\n        const nr = radius * (1 + (l - 60) / 200)\n        el.setAttribute(\"r\", \"\" + nr)\n    }\n}\n\nfunction setRgbaLeds(\n    pixelsContainer: SVGElement,\n    colors: Uint8Array,\n    alpha: number,\n    radius?: number\n) {\n    const pixels = pixelsContainer?.children\n    if (!colors || !pixels) return\n\n    const pn = Math.min(pixels.length, colors.length / 3)\n    let ci = 0\n    for (let i = 0; i < pn; ++i) {\n        const pixel = pixels.item(i) as SVGElement\n        setRgba(\n            pixel,\n            colors[ci],\n            colors[ci + 1],\n            colors[ci + 2],\n            alpha,\n            radius\n        )\n        ci += 3\n    }\n}\n\nfunction brightnessToOpacity(actualBrightness: number) {\n    // tune opacity to account for global opacity\n    const alpha = MIN_VISIBLE_OPACITY\n    const opacity =\n        actualBrightness <= 0\n            ? 0\n            : alpha + (1 - alpha) * (actualBrightness || 0)\n    return opacity\n}\n\nexport default function FwdLEDWidget(props: {\n    colors: () => Uint8Array\n    subscribeColors?: (handler: () => void) => () => void\n    lightVariant: LedStripVariant | LedVariant\n    numPixels: number\n    actualBrightness: number\n    widgetSize?: string\n    onLedClick?: (index: number) => void\n}) {\n    const {\n        lightVariant,\n        numPixels,\n        actualBrightness,\n        subscribeColors,\n        widgetSize,\n        onLedClick,\n        colors,\n    } = props\n    const { background, controlBackground } = useWidgetTheme()\n    const pathRef = useRef<SVGPathElement>(undefined)\n    const pixelsRef = useRef<SVGGElement>(undefined)\n    const neoradius = 6\n    const neocircleradius = neoradius + 1\n    const isJewel = lightVariant === LedStripVariant.Jewel\n    const isRing = lightVariant === LedStripVariant.Ring\n    const opacity = brightnessToOpacity(actualBrightness)\n\n    // paint svg via dom\n    const paint = useCallback(() => {\n        setRgbaLeds(pixelsRef.current, colors(), opacity, neocircleradius)\n    }, [colors, opacity, neocircleradius])\n\n    // reposition pixels along the path\n    useEffect(() => {\n        const p = pathRef.current\n        const pixelGroup = Object.values(pixelsRef.current?.children).map(\n            g => g.children\n        )\n        const pixels = pixelGroup.map(g => g[1])\n        const pixelBoxes = pixelGroup.map(g => g[0])\n        if (!p || !pixels) return\n\n        const offset = isJewel ? 1 : 0\n        const pn = pixels.length\n        const length = p.getTotalLength()\n        const extra = isRing || isJewel ? 0 : 1\n        const step = length / (pn - offset)\n        const MAGIC_NUMBER = length * (1 / 16 + 0.25)\n\n        for (let i = offset; i < pn; ++i) {\n            const pixel = pixels[i] as SVGCircleElement\n            const box = pixelBoxes[i] as SVGRectElement\n            const boxSize = 1.3 * pixel.r.baseVal.value\n            const rotation = 360 * (i / pn + 9 / 16)\n            const pos = i - offset\n            const point = p.getPointAtLength(\n                (MAGIC_NUMBER + step * (pos + extra / 2.0)) % length\n            )\n            pixel.setAttribute(\"cx\", `${point.x}`)\n            pixel.setAttribute(\"cy\", `${point.y}`)\n            box.setAttribute(\"x\", `${point.x - boxSize}`)\n            box.setAttribute(\"y\", `${point.y - boxSize}`)\n            box.setAttribute(\"width\", `${2 * boxSize}`)\n            box.setAttribute(\"height\", `${2 * boxSize}`)\n            box.setAttribute(\n                \"transform\",\n                `rotate(${rotation}, ${point.x}, ${point.y})`\n            )\n        }\n\n        paint()\n    }, [lightVariant, numPixels, paint, pathRef.current, pixelsRef.current])\n\n    // render when new colors are in\n    useEffect(() => subscribeColors?.(paint), [paint, subscribeColors])\n\n    let d = \"\"\n    const n = numPixels - (isJewel ? 1 : 0)\n    const neoperimeter = n * (2.7 * neoradius)\n    const margin = 1.8 * neoradius\n    const ringradius = (2.2 * neoperimeter) / (2 * Math.PI)\n    const width = 2 * (margin + ringradius)\n    const height = width\n    const hm = height - 2 * margin\n    d = `M ${\n        width >> 1\n    },${margin} a ${ringradius},${ringradius} 0 0,1 0,${hm} a ${ringradius},${ringradius} 0 0,1 0, -${hm}`\n\n    return (\n        <SvgWidget width={width} height={height} size={widgetSize}>\n            <g className={\"fwdEduWidget\"}>\n                <g\n                    transform={`scale(${\n                        width /\n                        (1 +\n                            117 +\n                            2 * 15.5 -\n                            2 * 9.5 +\n                            2 * 3.25 +\n                            2 * (8 - 3.25))\n                    })`}\n                >\n                    <defs>\n                        <g id=\"jacdac-connector\">\n                            <path\n                                fill=\"#AAA\"\n                                d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"\n                            />\n                        </g>\n                    </defs>\n                    <g>\n                        <path\n                            id=\"outline\"\n                            fill=\"white\"\n                            stroke=\"black\"\n                            strokeWidth=\"1\"\n                            d=\"\n                      M 0.5, 0.5\n                      m 5.25, 8\n                      a 8,8 0 0 1 8,-8\n                      h 117\n                      a 8,8 0 0 1 8,8\n                      v 32\n                      a 4.25,4.25 0 0 1 -4.25,4.25\n                      h -9.5\n                      a 4.25,4.25 0 0 0 -4.25,4.25\n                      v 3\n                      a 4.25,4.25 0 0 0 4.25,4.25\n                      h 15.5\n                      a 3.5,3.5 0 0 1 3.5,3.5\n                      v 19\n                      a 3.5,3.5 0 0 1 -3.5,3.5\n                      h -15.5\n                      a 4.25,4.25 0 0 0 -4.25,4.25\n                      v 3\n                      a 4.25,4.25 0 0 0 4.25,4.25\n                      h 9.5\n                      a 4.25,4.25 0 0 1 4.25,4.25\n                      v 32\n                      a 8,8 0 0 1 -8,8\n                      h -117\n                      a 8,8 0 0 1 -8,-8\n                      v -32\n                      a 4.25,4.25 0 0 1 4.25,-4.25\n                      h 9.5\n                      a 4.25,4.25 0 0 0 4.25,-4.25\n                      v -3\n                      a 4.25,4.25 0 0 0 -4.25,-4.25\n                      h -15.5\n                      a 3.5,3.5 0 0 1 -3.5,-3.5\n                      v -19\n                      a 3.5,3.5 0 0 1 3.5,-3.5\n                      h 15.5\n                      a 4.25,4.25 0 0 0 4.25,-4.25\n                      v -3\n                      a 4.25,4.25 0 0 0 -4.25,-4.25\n                      h -9.5\n                      a 4.25,4.25 0 0 1 -4.25,-4.25\n                      v -16.5\n                      a 4.25,4.25 0 0 0 0,-8.5\n                      z\n                    \"\n                        ></path>\n                    </g>\n                    <g transform=\"translate(125,12)\">\n                        <circle fill=\"black\" r=\"1.75\" />\n                        <path\n                            stroke=\"black\"\n                            strokeWidth=\"1.5\"\n                            fill=\"none\"\n                            d=\"\n                      m -2.5 -3\n                      a 4 4 0 0 0 0 6\n                      M -4 -4.5\n                      a 6.25 6.25 0 0 0 0 9\n                      M 2.5 -3\n                      a 4 4 0 0 1 0 6\n                      M 4 -4.5\n                      a 6.25 6.25 0 0 1 0 9\n                    \"\n                        />\n                    </g>\n                    <use\n                        href=\"#jacdac-connector\"\n                        transform=\"translate(120 60) scale(0.8)\"\n                    />\n                    <use\n                        href=\"#jacdac-connector\"\n                        transform=\"translate(24 60) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \"\n                    />\n                    <text x={16} y={15} fontSize={10}>\n                        LED\n                    </text>\n                </g>\n                <path ref={pathRef} d={d} fill=\"transparent\" />\n                <g\n                    ref={pixelsRef}\n                    transform={`translate(${width / 2} ${\n                        height / 2\n                    }) scale(0.65) translate(${-width / 2} ${-height / 2})`}\n                >\n                    {Array(numPixels)\n                        .fill(0)\n                        .map((_, i) => {\n                            const handleClick = onLedClick\n                                ? () => onLedClick(i)\n                                : undefined\n                            const fireClick = useFireKey(handleClick)\n                            return (\n                                <g\n                                    className={`${\n                                        fireClick ? \"clickeable\" : \"\"\n                                    } pixel`}\n                                    key={\"pixel\" + i}\n                                    onPointerDown={handleClick}\n                                    onKeyDown={fireClick}\n                                >\n                                    <rect\n                                        x={\n                                            (width >> 1) -\n                                            (neocircleradius >> 1)\n                                        }\n                                        y={\n                                            (height >> 1) -\n                                            (neocircleradius >> 1)\n                                        }\n                                        rx={2}\n                                        fill=\"#fffde0\"\n                                        stroke=\"#5b5b5b\"\n                                        strokeWidth={1}\n                                    />\n                                    <circle\n                                        r={neocircleradius}\n                                        cx={width >> 1}\n                                        cy={height >> 1}\n                                        stroke={controlBackground}\n                                        strokeWidth={1 + (i == 0 ? 0.5 : 0)}\n                                        aria-label={`pixel ${i}`}\n                                    >\n                                        <title>pixel {i}</title>\n                                    </circle>\n                                </g>\n                            )\n                        })}\n                </g>\n            </g>\n        </SvgWidget>\n    )\n}\n\nexport interface LedServerRegs {\n    pixels?: number\n    numPixels: number\n    variant: number\n    actualBrightness: number\n    numColumns: number\n}\n","import React, {useRef} from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useAnimationFrame from \"../hooks/useAnimationFrame\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdPumpWidget(props: {\n    size: string,\n    active: boolean\n}) {\n    const {\n        size,\n        active,\n    } = props\n    const svgDiameter = 110\n    const impellerRef = useRef<SVGGElement>()\n    const impellerRotationRef = useRef(0)\n    const impellerRotationRate = 190\n\n    useAnimationFrame(\n      active ? timeDelta => {\n        const impeller = impellerRef.current\n        impellerRotationRef.current = (impellerRotationRef.current + impellerRotationRate / timeDelta ) % 360\n        impeller.setAttribute(\"transform\", `rotate(${impellerRotationRef.current})`)\n        return true\n      } : undefined,\n      [active]\n    )\n\n    return (\n      <SvgWidget size={size} width={1} viewBox={`${svgDiameter / -2} ${svgDiameter / -2} ${svgDiameter} ${svgDiameter}`}>\n        <defs>\n          <g id=\"fwd-pump-strut\">\n            <rect x={-2} y={7} width={4} height={4} />\n          </g>\n        </defs>\n        <g ref={impellerRef}>\n          <circle r={6}  fill={\"transparent\"} stroke={\"black\"} strokeWidth={3} />\n          <circle r={12} fill={\"transparent\"} stroke={\"black\"} strokeWidth={5} />\n          <use href=\"#fwd-pump-strut\" x={0} y={0} transform=\"rotate(10)\" />\n          <use href=\"#fwd-pump-strut\" x={0} y={0} transform=\"rotate(-110)\" />\n          <use href=\"#fwd-pump-strut\" x={0} y={0} transform=\"rotate(130)\" />\n          <circle r={10} fill={\"transparent\"} stroke={\"white\"} strokeWidth={0.5} />\n  \n          <path id=\"fwd-pump-prop\" fill={\"black\"} stroke={\"#a2a2a2\"} strokeWidth={0.5} d=\"\n            M 14,-1\n            q 0,2 3,2\n            t 12,-0.5\n            t 14,3.6\n            t -1,11\n            t -16,9.5\n            t -18,-4\n            Q 4,16 3.5,13.5\n            z\n          \"/>\n          <use href=\"#fwd-pump-prop\" x={\"0\"} y={\"0\"} transform=\"rotate(90)\" />\n          <use href=\"#fwd-pump-prop\" x={\"0\"} y={\"0\"} transform=\"rotate(180)\" />\n          <use href=\"#fwd-pump-prop\" x={\"0\"} y={\"0\"} transform=\"rotate(270)\" />\n          <circle r={14} fill={\"transparent\"} stroke={\"white\"} strokeWidth={1} />\n \n        </g>\n        <circle r={45} stroke={\"#a2a2a2\"} strokeOpacity={\"60%\"} strokeWidth={12} fill=\"transparent\"/>\n      </SvgWidget>\n    )\n}\n","import React, { useRef } from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport PowerButton from \"./PowerButton\"\nimport useAnimationFrame from \"../hooks/useAnimationFrame\"\nimport { polarToCartesian } from \"./svgutils\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdServoWidget(props: {\n    angle: number\n    offset: number\n    color: \"primary\" | \"secondary\"\n    enabled?: boolean\n    toggleOff?: () => void\n    widgetSize?: string\n    rotationRate?: number\n    visible?: boolean\n}) {\n    const {\n        widgetSize,\n        toggleOff,\n        angle,\n        offset,\n        color,\n        enabled,\n        rotationRate,\n        visible,\n    } = props\n    const { background, active, textProps } =\n        useWidgetTheme(color)\n    const continuous = rotationRate !== undefined\n    const offsetRef = useRef(0)\n    const armRef = useRef<SVGPathElement>()\n    const textRef = useRef<SVGTextElement>()\n\n    const cx = 78\n    const cy = 55\n\n    const a = enabled ? angle + (offset || 0) : 90\n    const transform = `rotate(${-a + 90}, ${cx}, ${cy})`\n    const h = 111.406\n    const w = 158.50195\n    const pr = 14\n    const pri = 6\n    const text = enabled ? `${Math.round(a)}°` : \"off\"\n\n    useAnimationFrame(\n        continuous && enabled && visible && rotationRate !== undefined\n            ? time => {\n                  const arm = armRef.current\n                  if (!arm) return\n                  const text = textRef.current\n\n                  let offset = offsetRef.current\n                  offset = (offset + (time / 1000) * rotationRate) % 360\n                  offsetRef.current = offset\n                  const transform = `rotate(${offset}, ${cx}, ${cy})`\n                  arm.setAttribute(\"transform\", transform)\n                  text.childNodes[0].nodeValue = `${Math.round(\n                      rotationRate / 360 * 60\n                  )} rpm`\n\n                  return true\n              }\n            : undefined,\n        [continuous, visible, enabled, rotationRate]\n    )\n\n    function generateGearPath (cx:number, cy: number, id: number, od: number, teeth: number) {\n      function* pathDiameter() { while (true) { yield id/2; yield od/2 } }\n      const drawDiameter = pathDiameter()\n      const makePoint = (dia: number, offset: number) => polarToCartesian(cx, cy, dia, offset)\n      const segmentOffset = 180/(2 * teeth)\n      let dia = 0\n      const updateDia = () => { dia = drawDiameter.next().value as number; return true }\n      updateDia()\n      const drawPoint = (dia:number, offset:number) => { const {x,y} = makePoint(dia, offset); return `${x},${y}` }\n      let gearPath = `M ${drawPoint(dia, 0)}`\n      gearPath += `C ${drawPoint(dia, segmentOffset)} ${updateDia() && drawPoint(dia, segmentOffset)} ${drawPoint(dia, 2*segmentOffset)}`\n      for ( let i=3; i<4*teeth; i+=2 ) {\n        updateDia()\n        gearPath += `S ${drawPoint(dia, i*segmentOffset)} ${drawPoint(dia, (i+1)*segmentOffset)}`\n      }\n      return gearPath\n    }\n    const fwdGearPaths = { small: generateGearPath(cx, cy, 18, 27, 10), large: generateGearPath(cx, cy, 66, 80, 30) }\n\n    return (\n        <SvgWidget\n            title={`servo at angle ${angle}`}\n            width={w}\n            height={h}\n            size={widgetSize}\n        >\n            <g className={\"fwdEduWidget\"}>\n              <rect\n                  fill={continuous ? \"#333\" : \"#666\"}\n                  x={0}\n                  y={10.687}\n                  width={158.62}\n                  height={89.75}\n                  rx={4}\n                  ry={4}\n              />\n              {!continuous && <path transform={transform} fill={\"white\"} d={fwdGearPaths.large}/>}\n              {!continuous && <g transform=\"translate(-51 0)\"><path transform={`rotate(${3*a}, ${cx}, ${cy})`} fill={\"white\"} d={fwdGearPaths.small}/></g>}\n              <path\n                  fill={continuous ? \"#555\" : \"#999\"}\n                  fillOpacity={continuous ? \"100%\" : \"70%\"}\n                  d=\"M123.8 55.641 c0-24.994-20.26-45.256-45.254-45.256-17.882.016-34.077 9.446-41.328 25.79-2.655.024-4.192.076-6.35.07-11.158 0-20.204 9.046-20.204 20.204 0 11.158 9.046 20.203 20.203 20.203 2.389-.005 4.354-.332 6.997-.256 7.56 15.59 23.356 24.485 40.682 24.5 24.992 0 45.254-20.264 45.254-45.256z\"\n              />\n              <path\n                  ref={armRef}\n                  fill={enabled ? \"#deddd8\" : background}\n                  stroke={active}\n                  transform={transform}\n                  d=\"M93.782 55.623c-.032-3.809-.19-6.403-.352-7.023h-.002c-.93-3.558-6.621-6.73-14.793-6.73-8.17 0-14.649 3.016-14.795 6.73-.25 6.419-4.049 62.795 13.561 62.806 14.308.008 16.52-39.277 16.38-55.783zm-8.05.08a7.178 7.178 0 010 .012 7.178 7.178 0 01-7.179 7.176 7.178 7.178 0 01-7.177-7.176 7.178 7.178 0 017.177-7.178 7.178 7.178 0 017.178 7.166z\"\n              />\n              <text\n                  ref={textRef}\n                  {...textProps}\n                  x={w / 2}\n                  y={30}\n                  textAnchor=\"middle\"\n                  fontSize=\"1em\"\n                  fontWeight=\"bold\"\n                  lengthAdjust=\"0.3em\"\n                  fill=\"#fff\"\n                  stroke=\"#000\"\n                  strokeWidth=\"0.05em\"\n                  shapeRendering=\"crispEdges\"\n              >\n                  {text}\n              </text>\n              {toggleOff && (\n                  <PowerButton\n                      r={pr}\n                      ri={pri}\n                      cx={w - pr - 4}\n                      cy={pr + 14}\n                      color={color}\n                      strokeWidth={1.8}\n                      off={!enabled}\n                      onClick={toggleOff}\n                  />\n              )}\n            </g>\n        </SvgWidget>\n    )\n}\n","import React, { useState, useEffect, useRef, useCallback } from \"react\"\nimport {\n  RENDER,\n  REPORT_UPDATE,\n  SG90_RESPONSE_SPEED,\n  ServoServer,\n  BaseReg,\n  RelayReg,\n  ServoReg,\n  LedStripVariant,\n  LedReg,\n  bufferEq,\n  JDEventSource,\n} from \"../../../jacdac-ts/src/jacdac\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport useRegister from \"../hooks/useRegister\"\nimport useThrottledValue from \"../hooks/useThrottledValue\"\nimport {useRegisterBoolValue, useRegisterUnpackedValue} from \"../../jacdac/useRegisterValue\"\nimport {FormControlLabel, Grid, Slider, Switch} from \"@mui/material\"\n\nimport FwdLEDWidget from \"../widgets/FwdLEDWidget\"\nimport FwdPumpWidget from \"../widgets/FwdPumpWidget\"\nimport FwdServoWidget from \"../widgets/FwdServoWidget\"\nimport DashboardRegisterValueFallback from \"./DashboardRegisterValueFallback\"\nimport SwitchWithLabel from \"../ui/SwitchWithLabel\"\nimport useChange from \"../../jacdac/useChange\"\nimport ColorButtons from \"../widgets/ColorButtons\"\n\n\nexport function createPumpWidget (props: DashboardServiceProps) {\n    const { service } = props\n    const activeRegister = useRegister(service, RelayReg.Active)\n    const active = useRegisterBoolValue(activeRegister, props)\n\n    const handleClose = (_: unknown, checked: boolean) =>\n        activeRegister?.sendSetBoolAsync(checked, true)\n\n    if (active === undefined)\n        return <DashboardRegisterValueFallback register={activeRegister} />\n\n    return (\n      <>\n        <FwdPumpWidget \n          active={active}\n          size={`clamp(7em, 13vw, 14vh)`}\n        />\n        <SwitchWithLabel\n            label={active ? \"Running\" : \"Stopped\"}\n            checked={active}\n            onChange={handleClose}\n        /> \n      </>\n    )\n}\n\nexport function createServoWidget (props: DashboardServiceProps) {\n    const { service, visible } = props\n\n    const enabledRegister = useRegister(service, ServoReg.Enabled)\n    const enabled = useRegisterBoolValue(enabledRegister, props)\n    const angleRegister = useRegister(service, ServoReg.Angle)\n    const [reportedAngle = 90] = useRegisterUnpackedValue<[number]>(angleRegister, {\n        visible,\n    })\n    // sec/60deg\n    const responseSpeedRegister = useRegister(service, ServoReg.ResponseSpeed)\n    const [responseSpeed = SG90_RESPONSE_SPEED] = useRegisterUnpackedValue<\n        [number]\n    >(responseSpeedRegister, { visible })\n    const rotationalSpeed = 60 / responseSpeed\n    const angle = useThrottledValue(reportedAngle, rotationalSpeed)\n\n    const offsetRegister = useRegister(service, ServoReg.Offset)\n    const [offset] = useRegisterUnpackedValue<[number]>(offsetRegister, props)\n    const clientVariantRegister = useRegister(service, BaseReg.ClientVariant)\n    const [clientVariant] = useRegisterUnpackedValue<[string]>(\n        clientVariantRegister,\n        props\n    )\n    const minAngleRegister = useRegister(service, ServoReg.MinAngle)\n    const [minAngle = 0] = useRegisterUnpackedValue<[number]>(\n        minAngleRegister,\n        props\n    )\n    const maxAngleRegister = useRegister(service, ServoReg.MaxAngle)\n    const [maxAngle = 270] = useRegisterUnpackedValue<[number]>(\n        maxAngleRegister,\n        props\n    )\n\n    const [continuous, setContinuous] = useState( /cont=1/.test(clientVariant) || false )\n    const throttle = ((angle - minAngle) / (maxAngle - minAngle)) * 200 - 100\n\n    const server = useServiceServer<ServoServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n\n    const toggleOff = () => enabledRegister.sendSetBoolAsync(!enabled, true)\n    const widgetSize = `clamp(7rem, 16vw, 16vh)`\n    const readOnly = false\n\n    const label = continuous ? \"Throttle (%)\" : \"Angle\"\n    const angleFormat = (a: number) => `${Math.round(a)}`\n    const continuousFormat = (throttle: number) => {\n        return Math.round(throttle) + \"%\"\n    }\n    const handleContinuousChange = (\n        ev: unknown,\n        newValue: number | number[]\n    ) => {\n        const newAngle =\n            (0.5 + (newValue as number) / 200) * (maxAngle - minAngle) +\n            minAngle\n        angleRegister.sendSetPackedAsync([newAngle], true)\n    }\n    const handleAngleChange = (ev: unknown, newValue: number | number[]) =>\n        angleRegister.sendSetPackedAsync([newValue as number], true)\n\n    const handleVariantChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const isContinuous = event.target.checked\n        if (clientVariant !== undefined) {\n          clientVariantRegister.sendSetStringAsync(`cont=${isContinuous ? '1' : '0'}`, true)\n        }\n        setContinuous(isContinuous)\n        if (!isContinuous) handleAngleChange(undefined, (maxAngle - minAngle) / 2 + minAngle)\n    }\n\n    return (\n        <Grid container alignContent=\"center\">\n            <Grid item xs={12}>\n                <FormControlLabel\n                  value=\"servo-mode\"\n                  control={<Switch checked={continuous} onChange={handleVariantChange} />}\n                  label={continuous ? \"Continuous\" : \"Positional\"}\n                  labelPlacement=\"end\"\n                />\n                <FwdServoWidget\n                    angle={angle}\n                    offset={offset}\n                    color={color}\n                    enabled={enabled}\n                    toggleOff={toggleOff}\n                    widgetSize={widgetSize}\n                    rotationRate={continuous ? (throttle * rotationalSpeed) / 100 : undefined}\n                    visible={visible}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                {continuous ? (\n                    <Slider\n                        aria-label={label}\n                        color={color}\n                        value={throttle}\n                        valueLabelFormat={continuousFormat}\n                        onChange={readOnly ? undefined : handleContinuousChange}\n                        min={-100}\n                        max={100}\n                        step={10}\n                        valueLabelDisplay=\"auto\"\n                    />\n                ) : (\n                    <Slider\n                        aria-label={label}\n                        color={color}\n                        value={angle}\n                        valueLabelFormat={angleFormat}\n                        onChange={readOnly ? undefined : handleAngleChange}\n                        min={minAngle}\n                        max={maxAngle}\n                        step={5}\n                        valueLabelDisplay=\"auto\"\n                    />\n                )}\n            </Grid>\n        </Grid>\n    )\n}\n\nexport function createLEDWidget (props: DashboardServiceProps) {\n  const { service } = props\n  const pixelsRegister = useRegister(service, LedReg.Pixels)\n  const hasData = useChange(pixelsRegister, _ => !!_?.data)\n  const [penColor, setPenColor] = useState<number>(0x0000ff)\n  const colorsRef = useRef<Uint8Array>(new Uint8Array(0))\n  const clientRef = useRef(new JDEventSource())\n const [ledControls, setLedControls] = useState( false )\n\n  const handleColorChange = (newColor: number) =>\n  setPenColor(current => (newColor === current ? undefined : newColor))\n  const handleLedClick: (index: number) => void = async (index: number) => {\n    const pixels = colorsRef.current\n    if (index >= pixels.length * 3) return\n\n    const newPixels = pixels.slice(0)\n    const k = index * 3\n    let r = (penColor >> 16) & 0xff\n    let g = (penColor >> 8) & 0xff\n    let b = penColor & 0xff\n    if ( newPixels[k] == r && newPixels[k + 1] == g && newPixels[k + 2] == b) {\n      r = 0\n      g = 0\n      b = 0\n    }\n    newPixels[k] = r\n    newPixels[k + 1] = g\n    newPixels[k + 2] = b\n    await pixelsRegister.sendSetPackedAsync([newPixels], true)\n    colorsRef.current = newPixels\n    clientRef.current.emit(RENDER)\n  }\n\n  useEffect(() => {\n    if (!pixelsRegister) return undefined\n    const updatePixels = () => {\n      const [pixels] = pixelsRegister.unpackedValue || []\n      if (pixels && !bufferEq(colorsRef.current, pixels)) {\n        colorsRef.current = pixels.slice(0)\n        clientRef.current.emit(RENDER)\n      }\n    }\n    updatePixels()\n    return pixelsRegister.subscribe(REPORT_UPDATE, updatePixels)\n  }, [pixelsRegister])\n  const colors: () => Uint8Array = useCallback(() => colorsRef.current, [])\n  const numPixelsRegister = useRegister(service, LedReg.NumPixels)\n  const [numPixels] = useRegisterUnpackedValue<[number]>(\n      numPixelsRegister,\n      props\n    )\n\n  const actualBrightnessRegister = useRegister(\n      service,\n      LedReg.ActualBrightness\n    )\n  const [actualBrightness = 0.5] = useRegisterUnpackedValue<[number]>(\n      actualBrightnessRegister,\n      props\n    )\n\n  const subscribeColors = useCallback(\n    handler => clientRef.current.subscribe(RENDER, handler),\n    []\n  )\n\n  const colourPalette = [\n\t\t\t\t\t\t{ name: \"red\", value: 0xff0000 },\n\t\t\t\t\t\t{ name: \"orange\", value: 0xff7f00 },\n\t\t\t\t\t\t{ name: \"yellow\", value: 0xffff00 },\n\t\t\t\t\t\t{ name: \"green\", value: 0x00ff00 },\n\t\t\t\t\t\t{ name: \"blue\", value: 0x0000ff },\n\t\t\t\t\t\t{ name: \"purple\", value: 0xa033e5 },\n\t\t\t\t\t\t{ name: \"pink\", value: 0xff007f },\n\t\t\t\t\t\t{ name: \"white\", value: 0xffffff },\n\t\t\t\t\t\t{ name: \"black\", value: 0x000000 },\n          ]\n\n  const handlePanelToggle = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setLedControls(event.target.checked)\n  }\n\n  const ready = numPixels !== undefined && hasData\n\n  return (\n    <Grid container flexWrap={\"nowrap\"}>\n      <Grid item xs={12}>\n        { ready && <FwdLEDWidget\n          widgetSize={ledControls ? 'clamp(8rem, 12vw, 15vh)' : 'clamp(6rem, 12vw, 15vh)'}\n          colors={colors}\n          subscribeColors={subscribeColors}\n          numPixels={numPixels}\n          lightVariant={LedStripVariant.Ring}\n          actualBrightness={actualBrightness}\n          onLedClick={handleLedClick}\n        /> }\n        <FormControlLabel\n          value=\"led-control\"\n          control={<Switch checked={ledControls} onChange={handlePanelToggle} />}\n          label={\"Palette\"}\n          labelPlacement=\"end\"\n        />\n      </Grid>\n      <Grid item xs={12}>\n        { ledControls && <ColorButtons\n          color={penColor}\n          onColorChange={handleColorChange}\n          colors={colourPalette}\n        /> }\n      </Grid>\n    </Grid>\n  )\n}\n","import React from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useWidgetTheme from \"./useWidgetTheme\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\n\nexport default function FwdDialButtonWidget(props: {\n    checked?: boolean\n    label?: string\n    color?: \"primary\" | \"secondary\"\n    size?: string\n    onDown?: () => void\n    onUp?: () => void\n}) {\n    const { checked, label, color, size, onDown, onUp } = props\n    const { background, controlBackground, active } = useWidgetTheme(color)\n\n    const buttonProps = useSvgButtonProps<SVGRectElement>(label, onDown, onUp)\n    const w = 64\n\n    return (\n        <SvgWidget width={w} size={size}>\n            <rect\n                x={w/2 - w*0.06}\n                y={w*0.70}\n                height={w*0.14}\n                width={w*0.12}\n                fill={\"#a2a2a2\"}\n                stroke={\"#5b5b5b\"}\n                strokeWidth={0.5}\n            />\n            <rect\n                x={w/2 - w*0.14}\n                y={w*0.82}\n                height={w*0.08}\n                width={w*0.06}\n                fill={\"#0f5a96\"}\n            />\n            <rect\n                x={w/2 + w*0.08}\n                y={w*0.82}\n                height={w*0.08}\n                width={w*0.06}\n                fill={\"#0f5a96\"}\n            />\n            <rect\n                x={w/2 - w*0.14}\n                y={w*0.79}\n                height={w*0.03}\n                width={w*0.28}\n                fill={\"#1ad672\"}\n            />\n            <rect\n                x={w/2 - w*0.14}\n                y={w*0.77}\n                height={w*0.02}\n                width={w*0.28}\n                fill={\"#a2a2a2\"}\n            />\n            <rect\n                x={w/2 - w*0.08}\n                y={w*0.77}\n                height={w*0.08}\n                width={w*0.16}\n                fill={\"#a2a2a2\"}\n            />\n            <rect\n                x={1}\n                y={w - w/10}\n                rx={1}\n                width={w - 2}\n                height={w/12}\n                fill={\"white\"}\n                stroke={\"black\"}\n                strokeWidth={0.4}\n            />\n            <g  transform={`translate(0 ${checked ? w*0.05 : 0 })`}>\n              <rect\n                  x={w/2 - w*0.15}\n                  y={w*0.25}\n                  height={w*0.45}\n                  width={w*0.3}\n                  fill={\"#deddd8\"}\n                  stroke={\"#5b5b5b\"}\n                  strokeWidth={0.5}\n              />\n              <rect x={w/2 - w*0.108} y={w*0.30} height={w*.28} width={w*0.06} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n              <rect x={w/2 + w*0.045} y={w*0.30} height={w*.28} width={w*0.06} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n              <rect x={w/2 + w*0.110} y={w*0.30} height={w*.28} width={w*0.05} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n              <rect x={w/2 - w*0.160} y={w*0.30} height={w*.28} width={w*0.05} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n              <rect x={w/2 - w*0.040} y={w*0.30} height={w*.28}  width={w*0.08} fill={\"#deddd8\"} stroke={\"#5b5b5b\"} strokeWidth={0.5} />\n            </g>\n            <rect x={w*0.15} width={w*0.70} y={0} height={w*0.9} fillOpacity={0} fill={background} {...buttonProps} strokeOpacity={0}/>\n        </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport SvgWidget from \"../widgets/SvgWidget\"\n\nexport default function FwdDialWidget(props: {\n  size: string,\n  color: \"primary\" | \"secondary\",\n  position: number,\n  angle: number\n}) {\n  const { size, color, position, angle } = props\n  const { background, controlBackground, active, textProps } =\n      useWidgetTheme(color)\n  const label = `${position}`\n  const w = 10\n  const r = 0.06\n  const fs = Math.max(0.2, 0.4 - label.length * 0.1)\n\n  return <SvgWidget\n    title={`rotary encoder at position ${position}`}\n    size={size}\n    width={w}\n    height={w}\n    viewBox={\"0 0 1 1\"}\n    >\n    <g transform={ `scale(${1 / ( 1 + 117 + 2*15.5 - 2*9.5 + 2*3.25 + 2*(8-3.25))})` }>\n      <defs>\n        <g id=\"jacdac-connector\" >\n          <path fill=\"#AAA\" d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"/>\n        </g>\n      </defs>\n    <g>\n      <path\n        fill=\"white\"\n        stroke=\"black\"\n        strokeWidth=\"1\"\n        d=\"\n        M 0.5, 0.5\n        m 5.25, 8\n        a 8,8 0 0 1 8,-8\n        h 117\n        a 8,8 0 0 1 8,8\n        v 32\n        a 4.25,4.25 0 0 1 -4.25,4.25\n        h -9.5\n        a 4.25,4.25 0 0 0 -4.25,4.25\n        v 3\n        a 4.25,4.25 0 0 0 4.25,4.25\n        h 15.5\n        a 3.5,3.5 0 0 1 3.5,3.5\n        v 19\n        a 3.5,3.5 0 0 1 -3.5,3.5\n        h -15.5\n        a 4.25,4.25 0 0 0 -4.25,4.25\n        v 3\n        a 4.25,4.25 0 0 0 4.25,4.25\n        h 9.5\n        a 4.25,4.25 0 0 1 4.25,4.25\n        v 32\n        a 8,8 0 0 1 -8,8\n        h -117\n        a 8,8 0 0 1 -8,-8\n        v -32\n        a 4.25,4.25 0 0 1 4.25,-4.25\n        h 9.5\n        a 4.25,4.25 0 0 0 4.25,-4.25\n        v -3\n        a 4.25,4.25 0 0 0 -4.25,-4.25\n        h -15.5\n        a 3.5,3.5 0 0 1 -3.5,-3.5\n        v -19\n        a 3.5,3.5 0 0 1 3.5,-3.5\n        h 15.5\n        a 4.25,4.25 0 0 0 4.25,-4.25\n        v -3\n        a 4.25,4.25 0 0 0 -4.25,-4.25\n        h -9.5\n        a 4.25,4.25 0 0 1 -4.25,-4.25\n        v -16.5\n        a 4.25,4.25 0 0 0 0,-8.5\n        z\n      \" />\n    </g>\n      <g transform=\"translate(125,12)\">\n        <circle fill=\"black\" r=\"1.75\" />\n        <path stroke=\"black\" strokeWidth=\"1.5\" fill=\"none\" d=\"\n          m -2.5 -3\n          a 4 4 0 0 0 0 6\n          M -4 -4.5\n          a 6.25 6.25 0 0 0 0 9\n          M 2.5 -3\n          a 4 4 0 0 1 0 6\n          M 4 -4.5\n          a 6.25 6.25 0 0 1 0 9\n        \" />\n      </g>\n      <use href=\"#jacdac-connector\" transform=\"translate(120 60) scale(0.8)\" />\n      <use href=\"#jacdac-connector\" transform=\"translate(24 60) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \" />\n      <text fontFamily=\"Galano Grotesque Bold\" x={16} y={15} fontSize={10}>Dial</text>\n    </g>\n    <g transform={`translate(0.5 0.5) scale(0.5) rotate(${angle}) translate(-0.5 -0.5)`}>\n      <path\n        fill={background}\n        d=\"M.67.029a.037.037 0 01-.072-.02A.5.5 0 00.538 0a.037.037 0 01-.075 0 .5.5 0 00-.061.008.038.038 0 01-.073.02.5.5 0 00-.056.025.037.037 0 01-.064.04A.5.5 0 00.16.13.037.037 0 01.11.186a.5.5 0 00-.035.05.037.037 0 01-.035.066.5.5 0 00-.02.058.037.037 0 01-.016.074A.5.5 0 000 .495.037.037 0 01.005.57a.5.5 0 00.013.06.038.038 0 01.025.07.5.5 0 00.028.056.037.037 0 01.043.06.5.5 0 00.042.046.037.037 0 01.058.047.5.5 0 00.053.032.037.037 0 01.069.03.5.5 0 00.059.016.037.037 0 01.074.01.5.5 0 00.062 0 .037.037 0 01.074-.01.5.5 0 00.06-.016.037.037 0 01.068-.03.5.5 0 00.053-.032.037.037 0 01.058-.047.5.5 0 00.042-.045.037.037 0 01.043-.061A.5.5 0 00.957.7.037.037 0 01.982.63.5.5 0 00.995.57.037.037 0 011 .495.5.5 0 00.996.434.038.038 0 01.98.36.5.5 0 00.96.302.037.037 0 01.925.236.5.5 0 00.89.186.037.037 0 01.839.13.5.5 0 00.79.092.037.037 0 01.727.053.5.5 0 00.671.03z\"\n      />\n      <path\n        fill={controlBackground}\n        d=\"M.1.499a.4.4 0 10.8 0 .4.4 0 10-.8 0z\"\n      />\n      <circle cx={0.5} cy={0.19} r={r} fill={active} />\n    </g>\n    <text x={0.5} y={0.5} fontFamily=\"Galano Grotesque Bold\" fontSize={fs} {...textProps}>\n      {label}\n    </text>\n  </SvgWidget>\n}\n","import React from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useWidgetTheme from \"./useWidgetTheme\"\n\nexport default function FwdLineWidget(props: {\n  size: string,\n  color: \"primary\" | \"secondary\",\n  value: number,\n  buttonProps: React.SVGProps<SVGRectElement>,\n}) {\n  const {\n    size,\n    color,\n    value,\n    buttonProps\n  } = props\n\n  const { background, controlBackground, active } = useWidgetTheme(color)\n\n  const w = 48\n  const h = 48\n  const m = 4\n  const sw = 20\n  const dx = w >> 1\n  const x = (w - sw - dx) / 2\n  const sh = 32\n  const dark = \"#000\"\n  const bright = active\n\n  const isLit = value > 0.5\n\n  return (\n    <SvgWidget width={w} height={h} size={size}>\n      <g transform={`translate(${x}, ${h - m - sh})`}>\n        <rect\n          x={0}\n          y={5.5*sh/8}\n          width={2*sw}\n          height={sh/5}\n          fill={\"#a4a4a4\"}\n        />\n        <rect\n          x={0}\n          y={sh/8}\n          width={2*sw}\n          height={sh/5}\n          fill={\"#a4a4a4\"}\n        />\n        <rect\n          x={sw/2}\n          y={0}\n          rx={1}\n          width={sw}\n          height={sh}\n          fill={background}\n          {...buttonProps}\n        />\n        <rect\n          x={sw*0.6}\n          y={sh*0.10}\n          height={sh/3}\n          width={sw*0.8}\n          fill={isLit ? bright : dark}\n          stroke={controlBackground}\n          strokeWidth={1}\n          style={{ userSelect: \"none\", pointerEvents: \"none\" }}\n        />\n        <rect\n          x={sw*0.6}\n          y={sh*0.60}\n          height={sh/3}\n          width={sw*0.8}\n          fill={isLit ? bright : dark}\n          stroke={controlBackground}\n          strokeWidth={1}\n          style={{ userSelect: \"none\", pointerEvents: \"none\" }}\n        />\n        </g>\n    </SvgWidget>\n  )\n}\n","import React from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { useId } from \"react\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdSoilMoistureWidget(props: {\n    value: number\n    color: \"primary\" | \"secondary\"\n    size?: string\n}) {\n    const { value, color, size } = props\n    const { active, textProps } =\n        useWidgetTheme(color)\n    const clipId = useId()\n\n    const hasValue = !isNaN(value)\n    const tvalue = hasValue ? `${Math.round(value * 100)}%` : `--`\n\n    const w = 3\n    const h = 6\n    const ch = 5.4 * value\n\n    return (\n      <SvgWidget width={w} height={h} size={size}>\n        <g className={\"fwdEduWidget\"}>\n          {hasValue && (\n              <defs>\n              <clipPath id={clipId}>\n              <rect x={0} y={h - ch} width={w} height={ch} />\n              </clipPath>\n              </defs>\n              )}\n          <path\n            fill=\"white\"\n            stroke=\"black\"\n            strokeWidth={0.02}\n            d=\" M 0.05 -.05 v 0.05 a .2 .2 0 00 .1 .2 h .35 v 4.4 l .9 1 l .9 -1 v -4.4 h .35 a .2 -.2 0 00 .1 -.2 v -0.05 Z \"\n          />\n          <path\n            stroke=\"black\"\n            strokeWidth={0.02}\n            fill={active}\n            d=\" M 0.05 -.05 v 0.05 a .2 .2 0 00 .1 .2 h .35 v 4.4 l .9 1 l .9 -1 v -4.4 h .35 a .2 -.2 0 00 .1 -.2 v -0.05 Z \"\n            clipPath={`url(#${clipId})`}\n          />\n          <path\n            stroke=\"#000000\"\n            strokeLinecap=\"butt\"\n            strokeWidth=\".02\"\n            shapeRendering=\"crispEdges\"\n            d=\" M .6 .5 h 1.6\n            \"\n          />\n          <text\n            className=\"galanoAltA\"\n            fill=\"black\"\n            x=\"1.4\"\n            y=\".5\"\n            fontSize=\".25\"\n            letterSpacing=\"-.01em\"\n            textAnchor=\"middle\"\n            dominantBaseline=\"ideographic\"\n            shapeRendering=\"crispEdges\"\n            >\n            max\n          </text>\n          <text\n            x={w / 2}\n            y={h * 0.5}\n            fontSize=\"0.6\"\n            strokeWidth=\".02\"\n            stroke={value > .5 ? \"#000\" : \"#fff\"}\n            {...textProps}\n            fill={value > .5? \"#fff\" : \"#000\"}\n          >\n            {tvalue}\n          </text>\n        </g>\n      </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { useId } from \"react\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdSolarWidget(props: {\n    value: number\n    color: \"primary\" | \"secondary\"\n    size?: string\n}) {\n    const { value, color, size } = props\n    const { active, textProps } =\n        useWidgetTheme(color)\n    const clipId = useId()\n\n    const hasValue = !isNaN(value)\n    const tvalue = hasValue ? `${Math.round(value * 100)}%` : `--`\n\n    const w = 64\n    const widgetScale = 0.45\n\n    return (\n      <SvgWidget width={w} height={w} size={size}>\n        <g className={\"fwdEduWidget\"}>\n          <g transform={ `scale(${w / ( 1 + 117 + 2*15.5 - 2*9.5 + 2*3.25 + 2*(8-3.25))})` }>\n            <defs>\n              <g id=\"jacdac-connector\" >\n                <path fill=\"#AAA\" d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"/>\n              </g>\n            </defs>\n            <g>\n              <path\n                id=\"outline\"\n                fill=\"white\"\n                stroke=\"black\"\n                strokeWidth=\"1\"\n                d=\"\n                  M 0.5, 0.5\n                  m 5.25, 8\n                  a 8,8 0 0 1 8,-8\n                  h 117\n                  a 8,8 0 0 1 8,8\n                  v 32\n                  a 4.25,4.25 0 0 1 -4.25,4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 15.5\n                  a 3.5,3.5 0 0 1 3.5,3.5\n                  v 19\n                  a 3.5,3.5 0 0 1 -3.5,3.5\n                  h -15.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 9.5\n                  a 4.25,4.25 0 0 1 4.25,4.25\n                  v 32\n                  a 8,8 0 0 1 -8,8\n                  h -117\n                  a 8,8 0 0 1 -8,-8\n                  v -32\n                  a 4.25,4.25 0 0 1 4.25,-4.25\n                  h 9.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -15.5\n                  a 3.5,3.5 0 0 1 -3.5,-3.5\n                  v -19\n                  a 3.5,3.5 0 0 1 3.5,-3.5\n                  h 15.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 1 -4.25,-4.25\n                  v -16.5\n                  a 4.25,4.25 0 0 0 0,-8.5\n                  z\n                \"\n              >\n              </path>\n            </g>\n            <g transform=\"translate(125,12)\">\n              <circle fill=\"black\" r=\"1.75\" />\n              <path stroke=\"black\" strokeWidth=\"1.5\" fill=\"none\" d=\"\n                m -2.5 -3\n                a 4 4 0 0 0 0 6\n                M -4 -4.5\n                a 6.25 6.25 0 0 0 0 9\n                M 2.5 -3\n                a 4 4 0 0 1 0 6\n                M 4 -4.5\n                a 6.25 6.25 0 0 1 0 9\n              \" />\n            </g>\n            <use href=\"#jacdac-connector\" transform=\"translate(120 60) scale(0.8)\" />\n            <use href=\"#jacdac-connector\" transform=\"translate(24 60) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \" />\n            <text fontFamily=\"Galano Grotesque Bold\" x={16} y={15} fontSize={10}>Solar</text>\n          </g>\n          <g transform={ `scale(${widgetScale}) translate(${w/(2*widgetScale)} ${w/(2*widgetScale)})` } x={w/(2*widgetScale)} y={w/(2*widgetScale)}>\n            <path stroke=\"black\" fill={active} fillOpacity={value} strokeWidth={1} x={0} y={0}\n             d={`\n              m -9.25 -11.5\n              h 18.5\n              a 15 15 0 0 1 0 20\n              h -18.5\n              a 15 15 0 0 1 0 -20\n              z\n              `}\n             />\n            <path stroke=\"black\" strokeWidth={0.5} fill=\"none\" x={0} y={0}\n             d={`\n              m -11.5 -9\n              h 15\n              a 1.25 1.25 0 0 1 0 2.5\n              h -7.5\n              a 1.25 1.25 0 0 0 0 2.5\n              h 7.5\n              a 1.25 1.25 0 0 1 0 2.5\n              h -7.5\n              a 1.25 1.25 0 0 0 0 2.5\n              h 7.5\n              a 1.25 1.25 0 0 1 0 2.5\n              h -7.5\n              a 1.25 1.25 0 0 0 0 2.5\n              h 15\n              `}\n             />\n          </g>\n          <text\n            className=\"galanoAltA\"\n            x={w / 2}\n            y={w * 0.7}\n            fontSize=\"8\"\n            lengthAdjust=\".5em\"\n            {...textProps}\n            fill={\"#000\"}\n          >\n            {tvalue}\n          </text>\n        </g>\n      </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { useId } from \"react\"\nimport \"./fwd-edu.css\"\n\nexport default function FwdSonarWidget(props: {\n    value: number\n    color: \"primary\" | \"secondary\"\n    min?: number\n    max?: number\n    size?: string\n}) {\n    const { value, color, size } = props\n    const { active, textProps } =\n        useWidgetTheme(color)\n    const clipId = useId()\n\n    const hasValue = !isNaN(value)\n    const tvalue = hasValue ? `${(value / 100).toFixed(2)} m` : `--`\n\n    const w = 60\n\n    return (\n      <SvgWidget width={w} height={w*1.2} size={size}>\n        <g className=\"fwdEduWidget\">\n          <g transform={ `scale(${w / ( 1 + 141 + 2*15.5 - 2*9.5 + 2*3.25 + 2*(8-3.25))})` }>\n            <defs>\n              <g id=\"jacdac-connector\" >\n                <path fill=\"#AAA\" d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"/>\n              </g>\n            </defs>\n            <g>\n              <path\n                fill=\"white\"\n                stroke=\"black\"\n                strokeWidth=\"1\"\n                transform=\"rotate(180 72.5 69.5) translate(-12 -60)\"\n                d=\"\n                  M 0.5, 0.5\n                  m 5.25, 8\n                  a 8,8 0 0 1 8,-8\n                  h 117\n                  a 8,8 0 0 1 8,8\n                  v 32\n                  a 4.25,4.25 0 0 1 -4.25,4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 15.5\n                  a 3.5,3.5 0 0 1 3.5,3.5\n                  v 19\n                  a 3.5,3.5 0 0 1 -3.5,3.5\n                  h -15.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n  \n                  h 21.5\n                  a 4.25,4.25 0 0 1 4.25,4.25\n                  v 66.75\n                  a 8,8 0 0 1 -8,8\n                  h -141\n                  a 8,8 0 0 1 -8,-8\n                  v -66.75\n                  a 4.25,4.25 0 0 1 4.25,-4.25\n                  h 21.5\n  \n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -15.5\n                  a 3.5,3.5 0 0 1 -3.5,-3.5\n                  v -19\n                  a 3.5,3.5 0 0 1 3.5,-3.5\n                  h 15.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 1 -4.25,-4.25\n                  v -16.5\n                  a 4.25,4.25 0 0 0 0,-8.5\n                  z\n                \"\n              >\n              </path>\n            </g>\n            <g>\n              <circle fill=\"#deddd8\" r=\"28\" stroke=\"black\" strokeWidth=\"1\" transform=\"translate(33 38)\" />\n              <circle fill=\"white\" r=\"22\" stroke=\"black\" strokeWidth=\"1\" transform=\"translate(33 38)\" />\n            </g>\n            <g>\n              <circle fill=\"#deddd8\" r=\"28\" stroke=\"black\" strokeWidth=\"1\" transform=\"translate(137 38)\" />\n              <circle fill=\"white\" r=\"22\" stroke=\"black\" strokeWidth=\"1\" transform=\"translate(137 38)\" />\n            </g>\n            <g transform=\"translate(132,185)\">\n              <circle fill=\"black\" r=\"1.75\" transform=\"scale(1.2)\"/>\n              <path stroke=\"black\" strokeWidth=\"1.5\" fill=\"none\" transform=\"scale(1.2)\" d=\"\n                m -2.5 -3\n                a 4 4 0 0 0 0 6\n                M -4 -4.5\n                a 6.25 6.25 0 0 0 0 9\n                M 2.5 -3\n                a 4 4 0 0 1 0 6\n                M 4 -4.5\n                a 6.25 6.25 0 0 1 0 9\n              \" />\n            </g>\n            <use href=\"#jacdac-connector\" transform=\"translate(132 120) scale(0.8)\" />\n            <use href=\"#jacdac-connector\" transform=\"translate(38 120) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \" />\n            <text className={\"galanoAltA\"} x={26} y={190} fontSize={11}>Sonar</text>\n          </g>\n          <text\n            x={w / 2}\n            y={w / 2}\n            fontSize=\"8\"\n            {...textProps}\n            fill={\"#000\"}\n          >\n            {tvalue}\n          </text>\n        </g>\n      </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport SvgWidget from \"./SvgWidget\"\nimport useWidgetTheme from \"./useWidgetTheme\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\nimport {act} from \"@react-three/fiber\"\n\nexport default function FwdTouchWidget(props: {\n    checked?: boolean\n    label?: string\n    color?: \"primary\" | \"secondary\"\n    size?: string\n    onDown?: () => void\n    onUp?: () => void\n}) {\n    const { checked, label, color, size, onDown, onUp } = props\n    const { background, controlBackground, active } = useWidgetTheme(color)\n\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(label, onDown, onUp)\n    const w = 90\n    const mo = checked ? 3 : 5\n    const r = w / 2\n    const cx = r\n    const cy = r\n    const ri = r - mo\n    const rn = 8\n    return (\n      <SvgWidget width={w} height={w} size={size}>\n        <g className=\"fwdEduWidget\">\n          <g transform={ `scale(${w / ( 1 + 117 + 2*15.5 - 2*9.5 + 2*3.25 + 2*(8-3.25))})` }>\n            <defs>\n              <g id=\"jacdac-connector\" >\n                <path fill=\"#AAA\" d=\"M22.369 14.045H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 12c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.656.173h18.332c.9 0 1.631.712 1.631 1.59v.91c0 .878-.73 1.59-1.631 1.59zM4.124 12c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 12c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077zM4.187 18c0-.404-.167-.791-.464-1.077a1.618 1.618 0 0 0-1.121-.446c-.42 0-.824.16-1.12.446A1.493 1.493 0 0 0 1.016 18c0 .404.167.791.464 1.077.297.285.7.446 1.121.446.42 0 .823-.16 1.12-.446.298-.286.465-.673.465-1.077zm16.157 2.045H4.098a2.692 2.692 0 0 1-2.695.173C.54 19.788 0 18.933 0 18s.54-1.788 1.403-2.218a2.692 2.692 0 0 1 2.695.173h16.246c.915 0 1.656.712 1.656 1.59v.91c0 .878-.741 1.59-1.656 1.59zM24 6.455c0 .878-.73 1.59-1.631 1.59H4.037a2.618 2.618 0 0 1-2.656.173A2.493 2.493 0 0 1 0 6c0-.933.533-1.788 1.381-2.218a2.618 2.618 0 0 1 2.65.168l.006.005h18.332c.9 0 1.631.712 1.631 1.59ZM4.124 6c0-.404-.164-.791-.457-1.077a1.581 1.581 0 0 0-1.104-.446c-.414 0-.811.16-1.104.446A1.504 1.504 0 0 0 1.002 6c0 .404.164.791.457 1.077.293.285.69.446 1.104.446.414 0 .811-.16 1.104-.446.293-.286.457-.673.457-1.077z\"/>\n              </g>\n            </defs>\n            <g>\n              <path\n                id=\"outline\"\n                fill=\"white\"\n                stroke=\"black\"\n                strokeWidth=\"1\"\n                d=\"\n                  M 0.5, 0.5\n                  m 5.25, 8\n                  a 8,8 0 0 1 8,-8\n                  h 117\n                  a 8,8 0 0 1 8,8\n                  v 32\n                  a 4.25,4.25 0 0 1 -4.25,4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 15.5\n                  a 3.5,3.5 0 0 1 3.5,3.5\n                  v 19\n                  a 3.5,3.5 0 0 1 -3.5,3.5\n                  h -15.5\n                  a 4.25,4.25 0 0 0 -4.25,4.25\n                  v 3\n                  a 4.25,4.25 0 0 0 4.25,4.25\n                  h 9.5\n                  a 4.25,4.25 0 0 1 4.25,4.25\n                  v 32\n                  a 8,8 0 0 1 -8,8\n                  h -117\n                  a 8,8 0 0 1 -8,-8\n                  v -32\n                  a 4.25,4.25 0 0 1 4.25,-4.25\n                  h 9.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -15.5\n                  a 3.5,3.5 0 0 1 -3.5,-3.5\n                  v -19\n                  a 3.5,3.5 0 0 1 3.5,-3.5\n                  h 15.5\n                  a 4.25,4.25 0 0 0 4.25,-4.25\n                  v -3\n                  a 4.25,4.25 0 0 0 -4.25,-4.25\n                  h -9.5\n                  a 4.25,4.25 0 0 1 -4.25,-4.25\n                  v -16.5\n                  a 4.25,4.25 0 0 0 0,-8.5\n                  z\n                \"\n              >\n              </path>\n            </g>\n            <g transform=\"translate(125,12)\">\n              <circle fill=\"black\" r=\"1.75\" />\n              <path stroke=\"black\" strokeWidth=\"1.5\" fill=\"none\" d=\"\n                m -2.5 -3\n                a 4 4 0 0 0 0 6\n                M -4 -4.5\n                a 6.25 6.25 0 0 0 0 9\n                M 2.5 -3\n                a 4 4 0 0 1 0 6\n                M 4 -4.5\n                a 6.25 6.25 0 0 1 0 9\n              \" />\n            </g>\n            <use href=\"#jacdac-connector\" transform=\"translate(120 60) scale(0.8)\" />\n            <use href=\"#jacdac-connector\" transform=\"translate(24 60) translate(0 11) rotate(180) scale(0.8) translate(0 -11) \" />\n            <text x={16} y={15} fontSize={10}>Touch</text>\n          </g>\n          <g transform={ `translate(${w/2} ${w/2 + w*0.125}) scale(0.45)` } {...buttonProps}>\n            <rect x={-w/2} y={-2*w/3} rx=\"10\" width={w} height={4*w/3} fill=\"white\" fillOpacity=\"0\" stroke=\"#CCC\" strokeWidth=\"1.2\"/>\n            <circle x=\"0\" y=\"0\" r={3*w/8} fill={checked ? active : \"white\"}stroke=\"black\" strokeWidth=\"2\" />\n            <circle x=\"0\" y=\"0\" r={2*w/8} fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n            <circle x=\"0\" y=\"0\" r={w/8} fill=\"none\" stroke=\"black\" strokeWidth=\"2\" />\n          </g>\n        </g>\n      </SvgWidget>\n    )\n}\n","import React, { createElement, useState, useEffect } from \"react\"\nimport useDeviceProductIdentifier from \"../../jacdac/useDeviceProductIdentifier\"\nimport useDeviceSpecifications from \"../devices/useDeviceSpecifications\"\nimport {\n  JDDevice,\n  JDService,\n  SRV_DISTANCE,\n  SRV_LIGHT_LEVEL,\n  SRV_SOIL_MOISTURE,\n  SRV_BUTTON,\n  SRV_ROTARY_ENCODER,\n  SRV_RELAY,\n  SRV_REFLECTED_LIGHT,\n  SRV_SERVO,\n  SRV_LED,\n  EVENT,\n  ButtonEvent,\n  ButtonServer,\n  ReflectedLightServer,\n  JDRegister,\n  RotaryEncoderReg,\n} from \"../../../jacdac-ts/src/jacdac\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport DashboardServiceDefaultWidget from \"./DashboardServiceDefaultWidget\"\nimport useRegister from \"../hooks/useRegister\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport Suspense from \"../ui/Suspense\"\nimport { CircularProgress } from \"@mui/material\"\n\nimport { createLEDWidget, createPumpWidget, createServoWidget } from \"./DashboardFwdUniqueComponents\"\nimport FwdDialButtonWidget from \"../widgets/FwdDialButtonWidget\"\nimport FwdDialWidget from \"../widgets/FwdDialWidget\"\nimport FwdLineWidget from \"../widgets/FwdLineWidget\"\nimport FwdSoilMoistureWidget from \"../widgets/FwdSoilMoistureWidget\"\nimport FwdSolarWidget from \"../widgets/FwdSolarWidget\"\nimport FwdSonarWidget from \"../widgets/FwdSonarWidget\"\nimport FwdTouchWidget from \"../widgets/FwdTouchWidget\"\nimport useEvent from \"../hooks/useEvent\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\n\n\nexport function isFwdEdu (device: JDDevice): boolean {\n  const FwdEduDevices = useDeviceSpecifications()\n      .filter( device => device?.productIdentifiers && device.company.match(/(fwd|forward) ?edu(cation)?/i) )\n      .flatMap( device => device.productIdentifiers )\n  const deviceId = useDeviceProductIdentifier(device)\n  return FwdEduDevices.includes( deviceId )\n}\n\nfunction isRotaryVariant (service: JDService): boolean {\n  return service.serviceIndex > 1 && service.device.serviceClassAt(service.serviceIndex - 1) == SRV_ROTARY_ENCODER\n}\n\nfunction buttonWidgetProps (service: JDService, server?: ButtonServer) {\n  const [pressed, setPressed] = useState<boolean>(false)\n  const downEvent = useEvent(service, ButtonEvent.Down)\n  const upEvent = useEvent(service, ButtonEvent.Up)\n  useEffect(\n      () => downEvent.subscribe(EVENT, () => setPressed(true)),\n      [downEvent]\n  )\n  useEffect(\n      () => upEvent.subscribe(EVENT, () => setPressed(false)),\n      [upEvent]\n  )\n\n  return {\n    onDown: () => server?.down(),\n    onUp: () => server?.up(),\n    checked: pressed,\n    label: `button ${pressed ? `down` : `up`}`\n  }\n}\n\nfunction lineWidgetProps (value: number, register: JDRegister, server: ReflectedLightServer) {\n const handleDown = () => {\n    server.reading.setValues([value > 0 ? 0 : 1.0])\n    register.refresh()\n  }\n  return {\n    buttonProps: useSvgButtonProps(\"line detector\", server && handleDown)\n  }\n}\n\nfunction dialWidgetProps (value: number, service: JDService) {\n  const clicksPerTurnRegister = useRegister(service, RotaryEncoderReg.ClicksPerTurn)\n  const [clicksPerTurn = 20] = useRegisterUnpackedValue<[number]>(clicksPerTurnRegister)\n\n  return {\n    position: value,\n    angle: (value / clicksPerTurn) * 360\n  }\n}\n\nexport function lazifyWidget (widget, widgetProps) {\n  return (\n    <Suspense\n      fallback={\n        <CircularProgress\n          aria-label={`loading...`}\n          color={widgetProps.color}\n          disableShrink={true}\n          variant={\"indeterminate\"}\n          size={\"1rem\"}\n        />\n      }\n    >\n      {createElement(widget, widgetProps)}\n    </Suspense>\n  )\n}\n\nexport function FwdEduSubstituteWidget (dashboardProps: DashboardServiceProps) {\n  const { service } = dashboardProps\n  switch (service.serviceClass) {\n    case SRV_RELAY : return createPumpWidget( dashboardProps );\n    case SRV_SERVO : return createServoWidget( dashboardProps );\n    case SRV_LED   : return createLEDWidget( dashboardProps );\n    default: break;\n  }\n\n  const server = useServiceServer(service)\n  const color = server ? \"secondary\" : \"primary\" as \"primary\" | \"secondary\"\n  const size = 'clamp(6rem, 12vw, 14vh)'\n\n  // semi-generics\n  const registerNumber = service.readingRegister.specification.identifier || 257\n  const valueReg = useRegister(service, registerNumber)\n  const [value] = useRegisterUnpackedValue<[number]>(valueReg, dashboardProps)\n  const widgetProps = { color: color, size: size, value: value }\n\n  switch (service.serviceClass) {\n    case SRV_DISTANCE:\n      return lazifyWidget(FwdSonarWidget, {color: widgetProps.color, value: widgetProps.value*100, size: 'clamp(6rem, 15vw, 20vh'})\n    case SRV_LIGHT_LEVEL:\n      return lazifyWidget(FwdSolarWidget, widgetProps)\n    case SRV_SOIL_MOISTURE:\n      return lazifyWidget(FwdSoilMoistureWidget, {...widgetProps, size: 'clamp(14rem, 12vw, 16vh)'} )\n    case SRV_BUTTON:\n      return lazifyWidget(isRotaryVariant(service) ? FwdDialButtonWidget : FwdTouchWidget,\n        { ...widgetProps, ...buttonWidgetProps(service, server as ButtonServer) }\n      )\n    case SRV_REFLECTED_LIGHT:\n      return lazifyWidget(FwdLineWidget,\n        { ...widgetProps, size: 'clamp(4rem, 8vw, 12vh)', ...lineWidgetProps(value, valueReg, server as ReflectedLightServer) }\n      )\n    case SRV_ROTARY_ENCODER:\n      return lazifyWidget(FwdDialWidget, {...widgetProps, ...dialWidgetProps(value, service)})\n    // case SRV_RELAY:\n    // case SRV_SERVO:\n    // case SRV_LED:\n    default:\n      return DashboardServiceDefaultWidget(dashboardProps)\n  }\n}\n","import React, { useEffect, useMemo, useState } from \"react\"\nimport {\n    ButtonEvent,\n    ButtonReg,\n    EVENT,\n    SystemReg,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { ButtonServer } from \"../../../jacdac-ts/src/servers/buttonserver\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport ButtonWidget from \"../widgets/ButtonWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport {\n    useRegisterBoolValue,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { describeArc } from \"../widgets/svgutils\"\nimport useAnimationFrame from \"../hooks/useAnimationFrame\"\nimport useRegister from \"../hooks/useRegister\"\nimport useEvent from \"../hooks/useEvent\"\nimport { roundWithPrecision } from \"../../../jacdac-ts/src/jdom/utils\"\nimport OptionalTooltip from \"../widgets/OptionalTooltip\"\n\nexport default function DashboardButton(props: DashboardServiceProps) {\n    const { service } = props\n    const [pressed, setPressed] = useState<boolean>(false)\n    const analogRegister = useRegister(service, ButtonReg.Analog)\n    const analog = useRegisterBoolValue(analogRegister)\n    // don't track reading, use events only\n    const downEvent = useEvent(service, ButtonEvent.Down)\n    const upEvent = useEvent(service, ButtonEvent.Up)\n    useEffect(\n        () => downEvent.subscribe(EVENT, () => setPressed(true)),\n        [downEvent]\n    )\n    useEffect(\n        () => upEvent.subscribe(EVENT, () => setPressed(false)),\n        [upEvent]\n    )\n\n    if (!analog) return <BinaryButton {...props} pressed={pressed} />\n    else return <AnalogButton {...props} pressed={pressed} />\n}\n\nfunction BinaryButton(props: { pressed: boolean } & DashboardServiceProps) {\n    const { service, pressed } = props\n\n    const server = useServiceServer<ButtonServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const label = `button ${pressed ? `down` : `up`}`\n    const handleDown = () => server?.down()\n    const handleUp = () => server?.up()\n    const widgetSize = `clamp(3rem, 10vw, 10vh)`\n\n    return (\n        <OptionalTooltip\n            title={!server ? \"Use the physical button!\" : undefined}\n        >\n            <ButtonWidget\n                checked={!!pressed}\n                color={color}\n                onDown={server ? handleDown : undefined}\n                onUp={server ? handleUp : undefined}\n                label={label}\n                size={widgetSize}\n            />\n        </OptionalTooltip>\n    )\n}\n\nconst ACTIVE_SPEED = 0.05\nconst INACTIVE_SPEED = 0.1\nconst LABEL_PRECISION = 2\n\nfunction AnalogButton(props: { pressed: boolean } & DashboardServiceProps) {\n    const { service, pressed, visible } = props\n    const { mixins } = service\n    const pressureRegister = useRegister(service, ButtonReg.Pressure)\n    const [pressure] = useRegisterUnpackedValue<[number]>(pressureRegister, {\n        visible,\n    })\n    // find threshold if any\n    const thresholdRegister = useMemo(\n        () =>\n            mixins\n                .find(cfg => !!cfg.register(SystemReg.ActiveThreshold))\n                ?.register(SystemReg.ActiveThreshold),\n        [service]\n    )\n    const [threshold] = useRegisterUnpackedValue(thresholdRegister, { visible })\n\n    const widgetSize = `clamp(3rem, 10vw, 10vh)`\n    const server = useServiceServer<ButtonServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const label = `button pressure ${roundWithPrecision(\n        pressure,\n        LABEL_PRECISION\n    )}`\n    const { background, controlBackground, active } = useWidgetTheme(color)\n    const [down, setDown] = useState(false)\n    const handleDown = () => {\n        setDown(true)\n    }\n    const handleUp = () => {\n        setDown(false)\n    }\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(\n        label,\n        server && handleDown,\n        server && handleUp\n    )\n\n    useAnimationFrame(() => {\n        if (!server) return false\n        const [p] = server.reading.values()\n        let keepAnimating = true\n        if (down) {\n            if (p > 1 - ACTIVE_SPEED) {\n                server.reading.setValues([1])\n                keepAnimating = false\n            } else server.reading.setValues([p + ACTIVE_SPEED])\n        } else {\n            if (p < INACTIVE_SPEED) {\n                server.reading.setValues([0])\n                keepAnimating = false\n            } else server.reading.setValues([p - INACTIVE_SPEED])\n        }\n        server.reading.sendGetAsync() // refresh ui\n        return keepAnimating\n    }, [down])\n\n    const w = 64\n    const mo = pressed ? 3 : 5\n    const r = w / 2\n    const cx = r\n    const cy = r\n    const rp = r - mo\n    const ri = rp - mo\n    const ps = mo\n\n    const range = 360\n\n    /*\n        {buttonVariant === AnalogButtonVariant.Capacitive && <path transform={`translate(20,20)`} aria-hidden={true}\n            pointerEvents=\"none\"\n            style={{ userSelect: \"none\" }}\n            fill={background}\n            d=\"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z\"></path>}\n            */\n\n    return (\n        <SvgWidget width={w} size={widgetSize}>\n            <rect\n                x={0}\n                y={0}\n                rx={2}\n                ry={2}\n                width={w}\n                height={w}\n                fill={background}\n            />\n            {pressure && (\n                <path\n                    d={describeArc(cx, cy, rp, 0, pressure * range)}\n                    stroke={active}\n                    strokeLinecap={\"round\"}\n                    strokeWidth={ps}\n                />\n            )}\n            {threshold !== undefined && (\n                <circle\n                    cx={cx}\n                    cy={mo}\n                    r={mo / 3}\n                    aria-label={`active threshold ${roundWithPrecision(\n                        threshold,\n                        LABEL_PRECISION\n                    )}`}\n                    fill={controlBackground}\n                    transform={`rotate(${range * threshold}, ${cx}, ${cy})`}\n                />\n            )}\n            <circle\n                cx={cx}\n                cy={cy}\n                r={ri}\n                fill={pressed ? active : controlBackground}\n                {...buttonProps}\n            />\n        </SvgWidget>\n    )\n}\n","import React from \"react\"\nimport { RotaryEncoderReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport { RotaryEncoderServer } from \"../../../jacdac-ts/src/servers/rotaryencoderserver\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { Grid, Slider } from \"@mui/material\"\nimport useThrottledValue from \"../hooks/useThrottledValue\"\nimport useRegister from \"../hooks/useRegister\"\n\nexport default function DashboardRotaryEncoder(props: DashboardServiceProps) {\n    const { service } = props\n    const positionRegister = useRegister(service, RotaryEncoderReg.Position)\n    const [position = 0] = useRegisterUnpackedValue<[number]>(\n        positionRegister,\n        props\n    )\n    const clicksPerTurnRegister = useRegister(\n        service,\n        RotaryEncoderReg.ClicksPerTurn\n    )\n    const [clicksPerTurn = 12] = useRegisterUnpackedValue<[number]>(\n        clicksPerTurnRegister,\n        props\n    )\n    const server = useServiceServer<RotaryEncoderServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const { background, controlBackground, active, textProps } =\n        useWidgetTheme(color)\n    const label = \"\" + position\n    const widgetSize = `clamp(6rem, 15vw, 15vh)`\n\n    const w = 37.794\n    const r = 0.06\n    const fs = Math.max(0.2, 0.5 - label.length * 0.1)\n\n    const handleChange = async (ev: unknown, newValue: number | number[]) => {\n        server?.reading.setValues([newValue as number])\n        positionRegister.refresh()\n        clicksPerTurnRegister.refresh()\n    }\n\n    const throttled = useThrottledValue(position, clicksPerTurn, 1.5)\n    const angle = (throttled / clicksPerTurn) * 360\n\n    const range = Math.abs(Math.round(position / clicksPerTurn))\n    const min = (-range - 1) * clicksPerTurn\n    const max = (range + 1) * clicksPerTurn\n    const marks = [{ value: 0 }]\n\n    return (\n        <Grid container direction=\"column\">\n            <Grid item>\n                <SvgWidget\n                    title={`rotary encoder at position ${position}`}\n                    size={widgetSize}\n                    width={w}\n                    height={w}\n                    viewBox={\"0 0 1 1\"}\n                >\n                    <g transform={`rotate(${angle}, 0.5, 0.5)`}>\n                        <path\n                            fill={background}\n                            d=\"M.67.029a.037.037 0 01-.072-.02A.5.5 0 00.538 0a.037.037 0 01-.075 0 .5.5 0 00-.061.008.038.038 0 01-.073.02.5.5 0 00-.056.025.037.037 0 01-.064.04A.5.5 0 00.16.13.037.037 0 01.11.186a.5.5 0 00-.035.05.037.037 0 01-.035.066.5.5 0 00-.02.058.037.037 0 01-.016.074A.5.5 0 000 .495.037.037 0 01.005.57a.5.5 0 00.013.06.038.038 0 01.025.07.5.5 0 00.028.056.037.037 0 01.043.06.5.5 0 00.042.046.037.037 0 01.058.047.5.5 0 00.053.032.037.037 0 01.069.03.5.5 0 00.059.016.037.037 0 01.074.01.5.5 0 00.062 0 .037.037 0 01.074-.01.5.5 0 00.06-.016.037.037 0 01.068-.03.5.5 0 00.053-.032.037.037 0 01.058-.047.5.5 0 00.042-.045.037.037 0 01.043-.061A.5.5 0 00.957.7.037.037 0 01.982.63.5.5 0 00.995.57.037.037 0 011 .495.5.5 0 00.996.434.038.038 0 01.98.36.5.5 0 00.96.302.037.037 0 01.925.236.5.5 0 00.89.186.037.037 0 01.839.13.5.5 0 00.79.092.037.037 0 01.727.053.5.5 0 00.671.03z\"\n                        />\n                        <path\n                            fill={controlBackground}\n                            d=\"M.1.499a.4.4 0 10.8 0 .4.4 0 10-.8 0z\"\n                        />\n                        <circle cx={0.5} cy={0.19} r={r} fill={active} />\n                    </g>\n                    <text x={0.5} y={0.5} fontSize={fs} {...textProps}>\n                        {label}\n                    </text>\n                </SvgWidget>\n            </Grid>\n            {server && (\n                <Grid item>\n                    <Slider\n                        color={color}\n                        min={min}\n                        max={max}\n                        step={1}\n                        value={position}\n                        valueLabelDisplay=\"off\"\n                        onChange={handleChange}\n                        marks={marks}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import { SwitchReg, SwitchVariant } from \"../../../jacdac-ts/src/jdom/constants\"\nimport {\n    useRegisterBoolValue,\n    useRegisterUnpackedValue,\n} from \"../../jacdac/useRegisterValue\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { SwitchServer } from \"../../../jacdac-ts/src/servers/switchserver\"\nimport React from \"react\"\nimport { Switch } from \"@mui/material\"\nimport { useId } from \"react\"\nimport ButtonWidget from \"../widgets/ButtonWidget\"\nimport useRegister from \"../hooks/useRegister\"\nimport OptionalTooltip from \"../widgets/OptionalTooltip\"\nimport DashboardRegisterValueFallback from \"./DashboardRegisterValueFallback\"\n\nexport default function DashboardSwitch(props: DashboardServiceProps) {\n    const { service } = props\n\n    const labelId = useId()\n    const activeRegister = useRegister(service, SwitchReg.Active)\n    const variantRegister = useRegister(service, SwitchReg.Variant)\n    const on = useRegisterBoolValue(activeRegister, props)\n    const [switchVariant] = useRegisterUnpackedValue<[SwitchVariant]>(\n        variantRegister,\n        props\n    )\n    const server = useServiceServer<SwitchServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const widgetSize = `clamp(5em, 25vw, 100%)`\n    const title = !server ? \"Use the physical switch!\" : undefined\n\n    const handleToggle = () => server?.toggle?.()\n\n    if (on === undefined)\n        return <DashboardRegisterValueFallback register={activeRegister} />\n\n    switch (switchVariant) {\n        case SwitchVariant.PushButton:\n            return (\n                <OptionalTooltip title={title}>\n                    <ButtonWidget\n                        checked={on}\n                        color={color}\n                        label={on ? \"active\" : \"inactive\"}\n                        onDown={server && handleToggle}\n                        size={widgetSize}\n                    />\n                </OptionalTooltip>\n            )\n        default:\n            return (\n                <>\n                    <OptionalTooltip title={title}>\n                        <Switch\n                            aria-labelledby={labelId}\n                            color={color}\n                            checked={on}\n                            onChange={server && handleToggle}\n                        />\n                    </OptionalTooltip>\n                    <label id={labelId}>{on ? \"on\" : \"off\"}</label>\n                </>\n            )\n    }\n}\n","import React, { CSSProperties, useMemo, useRef, useState } from \"react\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport {\n    GamepadServer,\n    GAMEPAD_DPAD_BUTTONS,\n    GAMEPAD_GAMEPAD_EXTRA_BUTTONS,\n} from \"../../../jacdac-ts/src/servers/gamepadserver\"\nimport {\n    GamepadButtons,\n    GamepadReg,\n    GamepadVariant,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\nimport useAnimationFrame from \"../hooks/useAnimationFrame\"\nimport useRegister from \"../hooks/useRegister\"\nimport OptionalTooltip from \"../widgets/OptionalTooltip\"\nimport DashboardRegisterValueFallback from \"./DashboardRegisterValueFallback\"\n\nconst buttonLabels = {\n    [GamepadButtons.Left]: \"\\u25C4\",\n    [GamepadButtons.Up]: \"\\u25B2\",\n    [GamepadButtons.Down]: \"\\u25BC\",\n    [GamepadButtons.Right]: \"\\u25BA\",\n}\n\nfunction decay(value: number, rate: number, precision: number) {\n    let nv = value * rate\n    if (Math.abs(nv) < precision) nv = 0\n    return nv\n}\n\nfunction GamepadWidget(props: DashboardServiceProps) {\n    const { service } = props\n    const register = useRegister(service, GamepadReg.Direction)\n    const [buttons, x, y] = useRegisterUnpackedValue<\n        [GamepadButtons, number, number]\n    >(register, props)\n    const server = useServiceServer<GamepadServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n\n    const hostValues = (): [number, number] => {\n        const [, x, y] = server.reading.values()\n        return [x, y]\n    }\n    const onUpdate = (newx: number, newy: number) => {\n        server.updateDirection(newx, newy)\n        register.refresh()\n    }\n    const { active, background, controlBackground } = useWidgetTheme(color)\n    const dragSurfaceRef = useRef<SVGCircleElement>()\n    const [grabbing, setGrabbing] = useState(false)\n\n    const w = 40\n    const w2 = w >> 1\n    const cx = w2\n    const cy = w2\n    const rp = 2\n    const rc = 6\n    const rj = 10\n    const pw = 12\n    const ph = 8\n\n    const jx = cx + (x || 0) * rj\n    const jy = cy + (y || 0) * rj\n    const jw = 1\n\n    const updateGamepadDrag = (x: number, y: number) => {\n        const bounds = dragSurfaceRef.current.getBoundingClientRect()\n\n        const dx = (x - bounds.left) * (w / bounds.width) - w2\n        const dy = (y - bounds.top) * (w / bounds.height) - w2\n\n        const angle = Math.atan2(dy, dx)\n        const distance =\n            Math.min(Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2)), rj) / rj\n\n        const newx = distance * Math.cos(angle)\n        const newy = distance * Math.sin(angle)\n\n        onUpdate(newx, newy)\n    }\n\n    const handlePointerDown = async (\n        ev: React.PointerEvent<SVGCircleElement>\n    ) => {\n        ev.preventDefault()\n        const circle = ev.target as SVGCircleElement\n        circle.setPointerCapture(ev.pointerId)\n        setGrabbing(true)\n        updateGamepadDrag(ev.clientX, ev.clientY)\n    }\n    const handlePointerUp = (ev: React.PointerEvent<SVGCircleElement>) => {\n        ev.preventDefault()\n        const circle = ev.target as SVGCircleElement\n        circle.releasePointerCapture(ev.pointerId)\n        setGrabbing(false)\n    }\n    const handlePointerMove = async (\n        ev: React.PointerEvent<SVGCircleElement>\n    ) => {\n        ev.preventDefault()\n        if (grabbing) updateGamepadDrag(ev.clientX, ev.clientY)\n    }\n\n    useAnimationFrame(() => {\n        if (!server || grabbing) return false // let use do its thing\n        const [ax, ay] = hostValues()\n        const nx = decay(ax, 0.95, 16)\n        const ny = decay(ay, 0.95, 16)\n\n        // async\n        onUpdate(nx, ny)\n\n        return nx !== 0 || ny !== 0\n    }, [server, grabbing])\n\n    const handleStyle: CSSProperties = {\n        cursor: grabbing ? \"grabbing\" : \"grab\",\n    }\n\n    return (\n        <>\n            <circle\n                ref={dragSurfaceRef}\n                className=\"Gamepad-background\"\n                cx={cx}\n                cy={cy}\n                r=\"16\"\n                fill={background}\n            ></circle>\n            <rect\n                className=\"dpad-up\"\n                x={\"16\"}\n                y=\"6\"\n                width={ph}\n                height={pw}\n                rx={rp}\n                fill={buttons & GamepadButtons.Up ? active : controlBackground}\n            ></rect>\n            <rect\n                className=\"dpad-down\"\n                x=\"16\"\n                y=\"22\"\n                width={ph}\n                height={pw}\n                rx={rp}\n                fill={\n                    buttons & GamepadButtons.Down ? active : controlBackground\n                }\n            ></rect>\n            <rect\n                className=\"dpad-right\"\n                x=\"22\"\n                y=\"16\"\n                width={pw}\n                height={ph}\n                ry={rp}\n                fill={\n                    buttons & GamepadButtons.Right ? active : controlBackground\n                }\n            ></rect>\n            <rect\n                className=\"dpad-left\"\n                x=\"6\"\n                y=\"16\"\n                width={pw}\n                height={ph}\n                ry={rp}\n                fill={\n                    buttons & GamepadButtons.Left ? active : controlBackground\n                }\n            ></rect>\n            <circle\n                className=\"dpad-center\"\n                cx={cx}\n                cy={cy}\n                r={rc}\n                fill={controlBackground}\n            ></circle>\n            {server ? (\n                <circle\n                    className=\"Gamepad-handle\"\n                    cx={jx}\n                    cy={jy}\n                    r={rc}\n                    fill={background}\n                    stroke={active}\n                    strokeWidth={jw}\n                    tabIndex={0}\n                    role=\"button\"\n                    aria-label=\"Gamepad handle\"\n                    arial-live=\"polite\"\n                    onPointerMove={handlePointerMove}\n                    onPointerDown={handlePointerDown}\n                    onPointerUp={handlePointerUp}\n                    style={handleStyle}\n                />\n            ) : (\n                <circle\n                    className=\"Gamepad-handle\"\n                    cx={jx}\n                    cy={jy}\n                    r={rc}\n                    fill={background}\n                    stroke={active}\n                    strokeWidth={jw}\n                    role=\"button\"\n                    aria-label=\"Gamepad handle\"\n                    arial-live=\"polite\"\n                />\n            )}\n        </>\n    )\n}\n\nfunction ArcadeButton(props: {\n    cx: number\n    cy: number\n    ro: number\n    ri: number\n    pressure: number\n    button: GamepadButtons\n    server: GamepadServer\n    onRefresh: () => void\n    color?: \"primary\" | \"secondary\"\n}) {\n    const { cx, cy, ro, color, pressure, ri, button, server, onRefresh } = props\n    const { textProps, active, background, controlBackground } =\n        useWidgetTheme(color)\n    const checked = (pressure || 0) > 0\n    const title = GamepadButtons[button]\n    const label = buttonLabels[button] || title[0]\n\n    const handleDown = server\n        ? () => {\n              server.down(button) //, 0.7)\n              onRefresh()\n          }\n        : undefined\n    const handleUp = server\n        ? () => {\n              server.up(button)\n              onRefresh()\n          }\n        : undefined\n    const buttonProps = useSvgButtonProps<SVGCircleElement>(\n        title,\n        handleDown,\n        handleUp\n    )\n\n    return (\n        <g\n            transform={`translate(${cx},${cy})`}\n            role=\"button\"\n            aria-live=\"polite\"\n            aria-label={`button ${title} ${checked ? \"down\" : \"up\"}`}\n        >\n            <circle cx={0} cy={0} r={ro} fill={background} />\n            <circle\n                cx={0}\n                cy={0}\n                r={ri}\n                fill={checked ? active : controlBackground}\n                {...buttonProps}\n            >\n                <title>{title}</title>\n            </circle>\n            <text cx={0} cy={0} fontSize={ri} {...textProps}>\n                {label}\n            </text>\n        </g>\n    )\n}\n\nexport default function DashboardGamepad(props: DashboardServiceProps) {\n    const { service } = props\n    const variantRegister = useRegister(service, GamepadReg.Variant)\n    let [variant] = useRegisterUnpackedValue<[GamepadVariant]>(\n        variantRegister,\n        props\n    )\n    const buttonsAvailableRegister = useRegister(\n        service,\n        GamepadReg.ButtonsAvailable\n    )\n    const [buttonsAvailable] = useRegisterUnpackedValue<[GamepadButtons]>(\n        buttonsAvailableRegister,\n        props\n    )\n\n    // if variant is not specific, infer from buttons\n    if (variant === undefined) {\n        if (buttonsAvailable & GAMEPAD_GAMEPAD_EXTRA_BUTTONS)\n            variant = GamepadVariant.Gamepad\n        else if (!buttonsAvailable || buttonsAvailable === GamepadButtons.A)\n            variant = GamepadVariant.Thumb\n    }\n    const directionRegister = useRegister(service, GamepadReg.Direction)\n    const [buttons] = useRegisterUnpackedValue<\n        [GamepadButtons, number, number]\n    >(directionRegister, props)\n    const server = useServiceServer<GamepadServer>(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const { background } = useWidgetTheme(color)\n\n    // buttonsAvailable should be defined by now\n    const analog = !(buttonsAvailable & GAMEPAD_DPAD_BUTTONS)\n    const hasABButtons = !!(\n        buttonsAvailable &\n        (GamepadButtons.A | GamepadButtons.B)\n    )\n\n    const w = 256\n    const h = 128\n\n    const cw = w / 12\n    const ch = h / 4\n\n    const ro = cw - 2\n    const ri = ro - 4\n\n    const sro = ro - 10\n    const sri = sro - 2\n    const scy = sro\n\n    const pos = useMemo(\n        () =>\n            [\n                {\n                    id: GamepadButtons.Left,\n                    cx: cw * 1.5,\n                    cy: 2 * ch,\n                    small: false,\n                },\n                { id: GamepadButtons.Up, cx: cw * 3, cy: ch, small: false },\n                {\n                    id: GamepadButtons.Right,\n                    cx: cw * 4.5,\n                    cy: 2 * ch,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.Down,\n                    cx: cw * 3,\n                    cy: 3 * ch,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.A,\n                    cx: cw * 10.5,\n                    cy: ch * 1.25,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.B,\n                    cx: cw * 9.5,\n                    cy: ch * 2.75,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.X,\n                    cx: cw * 8.5,\n                    cy: ch * 0.75,\n                    small: false,\n                },\n                {\n                    id: GamepadButtons.Y,\n                    cx: cw * 7.5,\n                    cy: ch * 2.25,\n                    small: false,\n                },\n                { id: GamepadButtons.Menu, cx: cw * 6, cy: scy, small: true },\n                {\n                    id: GamepadButtons.Select,\n                    cx: cw * 5,\n                    cy: scy,\n                    small: true,\n                },\n\n                { id: GamepadButtons.Exit, cx: cw * 7, cy: scy, small: true },\n                { id: GamepadButtons.Reset, cx: cw * 8, cy: scy, small: true },\n            ].filter(p => !!(p.id & buttonsAvailable)),\n        [buttonsAvailable]\n    )\n\n    const handleRefresh = async () => await directionRegister.refresh()\n\n    const abx = cw * 8 + 1\n    const aby = ch * 3 + 4\n\n    const abr = cw / 2\n    const abw = cw * 5 - 6\n    const padcx = 3 * cw\n    const padcy = 2 * ch\n    const padr = 2.6 * cw\n\n    // need button info\n    if (buttonsAvailable === undefined)\n        return (\n            <DashboardRegisterValueFallback\n                register={buttonsAvailableRegister}\n            />\n        )\n\n    return (\n        <OptionalTooltip\n            title={!server ? \"Use the physical Gamepad!\" : undefined}\n        >\n            <SvgWidget width={w} height={h}>\n                {!analog && (\n                    <circle\n                        cx={padcx}\n                        cy={padcy}\n                        r={padr}\n                        fill=\"none\"\n                        stroke={background}\n                        strokeWidth={4}\n                    />\n                )}\n                {analog && (\n                    <g\n                        transform={`scale(${\n                            padr / 16\n                        }) translate(${-1.8},${-1.8})`}\n                    >\n                        <GamepadWidget {...props} />\n                    </g>\n                )}\n                {hasABButtons && (\n                    <rect\n                        transform={`rotate(-66, ${abx}, ${aby})`}\n                        x={abx}\n                        y={aby}\n                        rx={abr}\n                        ry={abr}\n                        width={abw}\n                        height={cw * 2.2}\n                        fill=\"none\"\n                        stroke={background}\n                        strokeWidth={4}\n                    />\n                )}\n                {pos.map(({ id, cx, cy, small }) => (\n                    <ArcadeButton\n                        key={id}\n                        cx={cx}\n                        cy={cy}\n                        ro={small ? sro : ro}\n                        ri={small ? sri : ri}\n                        button={id}\n                        server={server}\n                        onRefresh={handleRefresh}\n                        pressure={buttons & id ? 1 : 0}\n                        color={color}\n                    />\n                ))}\n            </SvgWidget>\n        </OptionalTooltip>\n    )\n}\n","import React, { createElement, FunctionComponent, lazy } from \"react\"\nimport {\n    SRV_ACCELEROMETER,\n    SRV_BUTTON,\n    SRV_BUZZER,\n    SRV_CHARACTER_SCREEN,\n    SRV_COLOR,\n    SRV_COMPASS,\n    SRV_GYROSCOPE,\n    SRV_GAMEPAD,\n    SRV_LED,\n    SRV_DOT_MATRIX,\n    SRV_LED_STRIP,\n    SRV_LED_SINGLE,\n    SRV_MATRIX_KEYPAD,\n    SRV_MOTION,\n    SRV_POWER,\n    SRV_RAIN_GAUGE,\n    SRV_REAL_TIME_CLOCK,\n    SRV_REFLECTED_LIGHT,\n    SRV_RNG,\n    SRV_ROLE_MANAGER,\n    SRV_ROTARY_ENCODER,\n    SRV_SERVO,\n    SRV_SEVEN_SEGMENT_DISPLAY,\n    SRV_SOIL_MOISTURE,\n    SRV_SOLENOID,\n    SRV_SOUND_LEVEL,\n    SRV_SOUND_PLAYER,\n    SRV_SOUND_SPECTRUM,\n    SRV_SPEECH_SYNTHESIS,\n    SRV_SWITCH,\n    SRV_TRAFFIC_LIGHT,\n    SRV_WATER_LEVEL,\n    SRV_WIND_DIRECTION,\n    SRV_BIT_RADIO,\n    SRV_HID_KEYBOARD,\n    SRV_HID_MOUSE,\n    SRV_CLOUD_CONFIGURATION,\n    SRV_WIFI,\n    SRV_VIBRATION_MOTOR,\n    SRV_CODAL_MESSAGE_BUS,\n    SRV_RELAY,\n    SRV_LIGHT_BULB,\n    SRV_BRAILLE_DISPLAY,\n    SRV_DEVICE_SCRIPT_MANAGER,\n    SRV_HID_JOYSTICK,\n    SRV_CLOUD_ADAPTER,\n    SRV_SAT_NAV,\n    SRV_PLANAR_POSITION,\n    SRV_SERIAL,\n    SRV_GPIO,\n    SRV_ROS,\n    SRV_INDEXED_SCREEN,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport { CircularProgress, SvgIconProps } from \"@mui/material\"\n\nimport { FwdEduSubstituteWidget, isFwdEdu } from \"./DashboardFwdEduWidgets\"\n\n// bundled\nimport DashboardButton from \"./DashboardButton\"\nimport DashboardRotaryEncoder from \"./DashboardRotaryEncoder\"\nimport DashboardSwitch from \"./DashboardSwitch\"\nimport DashboardGamepad from \"./DashboardGamepad\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport Suspense from \"../ui/Suspense\"\nimport DashboardServiceDefaultWidget from \"./DashboardServiceDefaultWidget\"\n\n// lazy devices\nconst DashboardServo = lazy(() => import(\"./DashboardServo\"))\nconst DashboardAccelerometer = lazy(() => import(\"./DashboardAccelerometer\"))\nconst DashboardBuzzer = lazy(() => import(\"./DashboardBuzzer\"))\nconst DashboardLED = lazy(() => import(\"./DashboardLED\"))\nconst DashboardLEDStrip = lazy(() => import(\"./DashboardLEDStrip\"))\nconst DashboardLEDSingle = lazy(() => import(\"./DashboardLEDSingle\"))\nconst DashboardRoleManager = lazy(() => import(\"./DashboardRoleManager\"))\nconst DashboardTrafficLight = lazy(() => import(\"./DashboardTrafficLight\"))\nconst DashboardCharacterScreen = lazy(\n    () => import(\"./DashboardCharacterScreen\")\n)\nconst DashboardBrailleDisplay = lazy(() => import(\"./DashboardBrailleDisplay\"))\nconst DashboardRainGauge = lazy(() => import(\"./DashboardRainGauge\"))\nconst DashboardDotMatrix = lazy(() => import(\"./DashboardDotMatrix\"))\nconst DashboardWindDirection = lazy(() => import(\"./DashboardWindDirection\"))\nconst DashboardMatrixKeypad = lazy(() => import(\"./DashboardMatrixKeypad\"))\nconst DashboardReflectedLight = lazy(() => import(\"./DashboardReflectedLight\"))\nconst DashboardPower = lazy(() => import(\"./DashboardPower\"))\nconst DashboardSpeechSynthesis = lazy(\n    () => import(\"./DashboardSpeechSynthesis\")\n)\nconst DashboardSoilMoisture = lazy(() => import(\"./DashboardSoilMoisture\"))\nconst DashboardRealTimeClock = lazy(() => import(\"./DashboardRealTimeClock\"))\nconst DashboardSatNav = lazy(() => import(\"./DashboardSatNav\"))\nconst DashboardSevenSegmentDisplay = lazy(\n    () => import(\"./DashboardSevenSegmentDisplay\")\n)\nconst DashboardMotion = lazy(() => import(\"./DashboardMotion\"))\nconst DashboardWaterLevel = lazy(() => import(\"./DashboardWaterLevel\"))\nconst DashboardColor = lazy(() => import(\"./DashboardColor\"))\nconst DashboardSoundPlayer = lazy(() => import(\"./DashboardSoundPlayer\"))\nconst DashboardSoundLevel = lazy(() => import(\"./DashboardSoundLevel\"))\nconst DashboardSoundSpectrum = lazy(() => import(\"./DashboardSoundSpectrum\"))\nconst DashboardRandomNumberGenerator = lazy(\n    () => import(\"./DashboardRandomNumberGenerator\")\n)\nconst DashboardCompass = lazy(() => import(\"./DashboardCompass\"))\nconst DashboardGyroscope = lazy(() => import(\"./DashboardGyroscope\"))\nconst DashboardSolenoid = lazy(() => import(\"./DashboardSolenoid\"))\nconst DashboardBitRadio = lazy(() => import(\"./DashboardBitRadio\"))\nconst DashboardHIDKeyboard = lazy(() => import(\"./DashboardHIDKeyboard\"))\nconst DashboardHIDMouse = lazy(() => import(\"./DashboardHIDMouse\"))\nconst DashboardHIDJoystick = lazy(() => import(\"./DashboardHIDJoystick\"))\nconst DashboardCloudConfiguration = lazy(\n    () => import(\"./DashboardCloudConfiguration\")\n)\nconst DashboardWifi = lazy(() => import(\"./DashboardWifi\"))\nconst DashboardVibrationMotor = lazy(() => import(\"./DashboardVibrationMotor\"))\nconst DashboardCODALMessageBus = lazy(\n    () => import(\"./DashboardCODALMessageBus\")\n)\nconst DashboardRelay = lazy(() => import(\"./DashboardRelay\"))\nconst DashboardGPIO = lazy(() => import(\"./DashboardGPIO\"))\nconst DashboardLightBulb = lazy(() => import(\"./DashboardLightBulb\"))\nconst DashboardDeviceScriptManager = lazy(\n    () => import(\"./DashboardDeviceScriptManager\")\n)\nconst DashboardCloudAdapter = lazy(() => import(\"./DashboardCloudAdapter\"))\nconst DashboardPlanarPosition = lazy(() => import(\"./DashboardPlanarPosition\"))\nconst DashboardSerial = lazy(() => import(\"./DashboardSerial\"))\nconst DashboardRos = lazy(() => import(\"./DashboardRos\"))\nconst DashboardIndexedScreen = lazy(() => import(\"./DashboardIndexedScreen\"))\n\n// icons\nconst PowerSettingsNewIcon = lazy(\n    () => import(\"@mui/icons-material/PowerSettingsNew\")\n)\nconst MusicNoteIcon = lazy(() => import(\"@mui/icons-material/MusicNote\"))\nconst AppsIcon = lazy(() => import(\"@mui/icons-material/Apps\"))\nconst SensorsIcon = lazy(() => import(\"@mui/icons-material/Sensors\"))\nconst MemoryIcon = lazy(() => import(\"@mui/icons-material/Memory\"))\nconst CloudQueueIcon = lazy(() => import(\"@mui/icons-material/CloudQueue\"))\nconst SerialIcon = lazy(() => import(\"../icons/SerialIcon\"))\n\nexport interface DashboardServiceProps {\n    service: JDService\n    expanded?: boolean\n    // all widget services\n    services?: JDService[]\n    variant?: \"icon\" | \"\"\n    // the dashboard html element is in the view\n    visible?: boolean\n    // a programming experience is controlling the device\n    controlled?: boolean\n    // show a button to toggle an advanced interaction mode\n    expandable?: boolean\n    icon?: DashboardIcon\n}\nexport type DashboardServiceComponent = FunctionComponent<DashboardServiceProps>\nexport type DashboardIcon = FunctionComponent<SvgIconProps>\n\nconst serviceViews: {\n    [serviceClass: number]: {\n        component: DashboardServiceComponent\n        bundled?: boolean\n        weight?: (service: JDService) => number\n        // show a button to toggle an advanced interaction mode\n        expandable?: boolean\n        icon?: DashboardIcon\n    }\n} = {\n    [SRV_ROLE_MANAGER]: {\n        component: DashboardRoleManager,\n        weight: () => 2,\n    },\n    [SRV_BUZZER]: {\n        component: DashboardBuzzer,\n        weight: () => 4,\n        expandable: true,\n        icon: MusicNoteIcon,\n    },\n    [SRV_LED_STRIP]: {\n        component: DashboardLEDStrip,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_INDEXED_SCREEN]: {\n        component: DashboardIndexedScreen,\n        weight: () => 3,\n        expandable: true\n    },\n    [SRV_LED]: {\n        component: DashboardLED,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_ACCELEROMETER]: {\n        component: DashboardAccelerometer,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_ROTARY_ENCODER]: {\n        component: DashboardRotaryEncoder,\n        bundled: true,\n        weight: () => 2,\n    },\n    [SRV_BUTTON]: {\n        component: DashboardButton,\n        bundled: true,\n    },\n    [SRV_SERVO]: {\n        component: DashboardServo,\n    },\n    [SRV_SWITCH]: {\n        component: DashboardSwitch,\n        bundled: true,\n    },\n    [SRV_TRAFFIC_LIGHT]: {\n        component: DashboardTrafficLight,\n    },\n    [SRV_CHARACTER_SCREEN]: {\n        component: DashboardCharacterScreen,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_BRAILLE_DISPLAY]: {\n        component: DashboardBrailleDisplay,\n        weight: () => 2,\n        expandable: true,\n    },\n    [SRV_RAIN_GAUGE]: {\n        component: DashboardRainGauge,\n    },\n    [SRV_DOT_MATRIX]: {\n        component: DashboardDotMatrix,\n        weight: () => 3,\n        expandable: true,\n        icon: AppsIcon,\n    },\n    [SRV_WIND_DIRECTION]: {\n        component: DashboardWindDirection,\n    },\n    [SRV_MATRIX_KEYPAD]: {\n        component: DashboardMatrixKeypad,\n    },\n    [SRV_REFLECTED_LIGHT]: {\n        component: DashboardReflectedLight,\n    },\n    [SRV_POWER]: {\n        component: DashboardPower,\n        expandable: true,\n        icon: PowerSettingsNewIcon,\n    },\n    [SRV_SPEECH_SYNTHESIS]: {\n        component: DashboardSpeechSynthesis,\n    },\n    [SRV_SOIL_MOISTURE]: {\n        component: DashboardSoilMoisture,\n    },\n    [SRV_REAL_TIME_CLOCK]: {\n        component: DashboardRealTimeClock,\n        expandable: true,\n    },\n    [SRV_SAT_NAV]: {\n        component: DashboardSatNav,\n    },\n    [SRV_LED_SINGLE]: {\n        component: DashboardLEDSingle,\n    },\n    [SRV_GAMEPAD]: {\n        component: DashboardGamepad,\n        bundled: true,\n        weight: () => 3,\n    },\n    [SRV_SEVEN_SEGMENT_DISPLAY]: {\n        component: DashboardSevenSegmentDisplay,\n        expandable: true,\n    },\n    [SRV_MOTION]: {\n        component: DashboardMotion,\n    },\n    [SRV_WATER_LEVEL]: {\n        component: DashboardWaterLevel,\n    },\n    [SRV_COLOR]: {\n        component: DashboardColor,\n        weight: () => 1,\n    },\n    [SRV_SOUND_PLAYER]: {\n        component: DashboardSoundPlayer,\n        weight: () => 1,\n        expandable: true,\n        icon: MusicNoteIcon,\n    },\n    [SRV_SOUND_LEVEL]: {\n        component: DashboardSoundLevel,\n        expandable: true,\n    },\n    [SRV_RNG]: {\n        component: DashboardRandomNumberGenerator,\n    },\n    [SRV_COMPASS]: {\n        component: DashboardCompass,\n    },\n    [SRV_GYROSCOPE]: {\n        component: DashboardGyroscope,\n        weight: () => 3,\n        expandable: true,\n    },\n    [SRV_SOUND_SPECTRUM]: {\n        component: DashboardSoundSpectrum,\n        weight: () => 2,\n    },\n    [SRV_SOLENOID]: {\n        component: DashboardSolenoid,\n    },\n    [SRV_BIT_RADIO]: {\n        component: DashboardBitRadio,\n        weight: () => 4,\n        expandable: true,\n        icon: SensorsIcon,\n    },\n    [SRV_SERIAL]: {\n        component: DashboardSerial,\n        weight: () => 2,\n        icon: SerialIcon,\n    },\n    [SRV_ROS]: {\n        component: DashboardRos,\n        expandable: true,\n        weight: () => 4,\n    },\n    [SRV_HID_KEYBOARD]: {\n        component: DashboardHIDKeyboard,\n        weight: () => 4,\n        expandable: true,\n    },\n    [SRV_HID_MOUSE]: {\n        component: DashboardHIDMouse,\n        weight: () => 2,\n    },\n    [SRV_HID_JOYSTICK]: {\n        component: DashboardHIDJoystick,\n        weight: () => 2,\n    },\n    [SRV_CLOUD_CONFIGURATION]: {\n        component: DashboardCloudConfiguration,\n        weight: () => 2,\n    },\n    [SRV_WIFI]: {\n        component: DashboardWifi,\n        weight: () => 4,\n    },\n    [SRV_VIBRATION_MOTOR]: {\n        component: DashboardVibrationMotor,\n        weight: () => 3,\n    },\n    [SRV_CODAL_MESSAGE_BUS]: {\n        component: DashboardCODALMessageBus,\n        weight: () => 2,\n    },\n    [SRV_RELAY]: {\n        component: DashboardRelay,\n    },\n    [SRV_GPIO]: {\n        component: DashboardGPIO,\n        weight: () => 4,\n    },\n    [SRV_LIGHT_BULB]: {\n        component: DashboardLightBulb,\n    },\n    [SRV_PLANAR_POSITION]: {\n        component: DashboardPlanarPosition,\n        weight: () => 1,\n    },\n    [SRV_DEVICE_SCRIPT_MANAGER]: {\n        component: DashboardDeviceScriptManager,\n        expandable: true,\n        icon: MemoryIcon,\n    },\n    [SRV_CLOUD_ADAPTER]: {\n        component: DashboardCloudAdapter,\n        weight: () => 4,\n        expandable: true,\n        icon: CloudQueueIcon,\n    },\n}\n\nexport function isExpandableView(serviceClass: number) {\n    return !!serviceViews[serviceClass]?.expandable\n}\n\nexport function hasServiceView(serviceClass: number) {\n    return !!serviceViews[serviceClass]\n}\n\nexport default function DashboardServiceWidget(\n    props: React.Attributes & DashboardServiceProps\n): JSX.Element {\n    const { service } = props\n    const { specification } = service\n    const { component, bundled } =\n        serviceViews[specification.classIdentifier] || {}\n    const server = useServiceServer(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const useFwdWidget = isFwdEdu(service.device)\n\n    // for FwdEdu widgets that replace Default widgets\n    if (useFwdWidget) return createElement(FwdEduSubstituteWidget, props)\n\n    // no special support\n    if (!component) return createElement(DashboardServiceDefaultWidget, props)\n\n    // precompiled\n    if (bundled) return createElement(component, props)\n\n    // lazy loading\n    return (\n        <Suspense\n            fallback={\n                <CircularProgress\n                    aria-label={`loading...`}\n                    color={color}\n                    disableShrink={true}\n                    variant={\"indeterminate\"}\n                    size={\"1rem\"}\n                />\n            }\n        >\n            {createElement(component, props)}\n        </Suspense>\n    )\n}\n\nexport function dashboardServiceWeight(service: JDService) {\n    const view = serviceViews[service.serviceClass]\n    return view?.weight?.(service)\n}\n\nexport function dashboardServiceIcon(serviceClass: number) {\n    return serviceViews[serviceClass]?.icon\n}\n","import { DeviceSpecificationOptions } from \"../../../jacdac-ts/src/jdom/catalog\"\nimport { arrayEq } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useChange from \"../../jacdac/useChange\"\nimport useDeviceCatalog from \"./useDeviceCatalog\"\n\nexport default function useDeviceSpecifications(\n    options?: DeviceSpecificationOptions\n) {\n    const catalog = useDeviceCatalog()\n    const specifications = useChange(\n        catalog,\n        _ => _?.specifications(options),\n        [JSON.stringify(options)],\n        (a, b) => arrayEq(a, b, (l, r) => l.id === r.id)\n    )\n    return specifications\n}\n","import { DependencyList, useEffect, useRef } from \"react\"\n\nexport default function useAnimationFrame(\n    callback: (time: number) => boolean,\n    deps?: DependencyList\n) {\n    const requestRef = useRef<number>()\n    const previousTimeRef = useRef<number>()\n\n    const animate = (time: number) => {\n        let active = true\n        if (previousTimeRef.current != undefined) {\n            const deltaTime = time - previousTimeRef.current\n            active = callback(deltaTime)\n        }\n        previousTimeRef.current = time\n        if (active) requestRef.current = requestAnimationFrame(animate)\n        // we're done\n        else requestRef.current = undefined\n    }\n\n    useEffect(() => {\n        if (callback) {\n            previousTimeRef.current = undefined\n            requestRef.current = requestAnimationFrame(animate)\n        }\n        return () =>\n            requestRef.current !== undefined &&\n            cancelAnimationFrame(requestRef.current)\n    }, deps || [])\n}\n","import { useMemo } from \"react\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\n\nexport default function useEvent(service: JDService, identifier: number) {\n    return useMemo(() => service?.event(identifier), [service, identifier])\n}\n","import { useState } from \"react\"\nimport useAnimationFrame from \"./useAnimationFrame\"\n\nexport default function useThrottledValue(\n    value: number,\n    maxRate: number,\n    maxCycles = 2\n) {\n    const [actual, setActual] = useState<number>(value)\n\n    let animated = actual\n    useAnimationFrame(\n        time => {\n            // no valid rate\n            if (isNaN(maxRate) || isNaN(animated)) {\n                setActual(value)\n                return false\n            }\n\n            // not a value yet\n            if (isNaN(value)) {\n                return false\n            }\n\n            // increment towards value\n            const dt = time / 1000 // s\n            const error = value - animated\n            const maxError = maxRate * dt // deg\n            let active = true\n            animated += Math.sign(error) * Math.min(Math.abs(error), maxError)\n            // close to goal, finish animation\n            if (Math.abs(value - animated) / maxRate < 0.01) {\n                animated = value\n                active = false\n            }\n            // very far from goal, get closer immediately\n            if (!isNaN(maxCycles)) {\n                const maxErrorRange = maxRate * maxCycles\n                animated = Math.max(\n                    value - maxErrorRange,\n                    Math.min(value + maxErrorRange, animated)\n                )\n            }\n            // store and update ui\n            setActual(animated)\n            return active\n        },\n        [value, maxRate, maxCycles]\n    )\n\n    return actual\n}\n","import { Grid, IconButton, useTheme } from \"@mui/material\"\nimport React, { ReactNode } from \"react\"\nimport { rgbToHtmlColor } from \"../../../jacdac-ts/src/jdom/utils\"\nimport CircleIcon from \"@mui/icons-material/Circle\"\n\nexport const DEFAULT_COLORS = [\n    {\n        name: \"red\",\n        value: 0xff0000,\n    },\n    { name: \"blue\", value: 0x0000ff },\n    { name: \"green\", value: 0x00ff00 },\n    { name: \"black\", value: 0x010101 },\n]\n\nexport default function ColorButtons(props: {\n    children?: ReactNode\n    colors?: { name: string; value: number }[]\n    color: number\n    onColorChange?: (newLedColor: number) => void\n}) {\n    const theme = useTheme()\n\n    const { children, colors = DEFAULT_COLORS, color, onColorChange } = props\n    const handleSetColor = (col: number) => () => onColorChange(col)\n    return (\n        <Grid container spacing={1}>\n            {colors.map(({ name, value }) => {\n                const selected = value === color\n                const c = rgbToHtmlColor(value)\n                const title = value === color ? `${name} (selected)` : name\n                return (\n                    <Grid key={name} item xs>\n                        <IconButton\n                            style={{ color: c }}\n                            onClick={handleSetColor(value)}\n                            aria-label={title}\n                            title={title}\n                            sx={{\n                                backgroundColor: selected\n                                    ? c\n                                    : theme.palette.grey[300],\n                            }}\n                        >\n                            <CircleIcon />\n                        </IconButton>\n                    </Grid>\n                )\n            })}\n            {children}\n        </Grid>\n    )\n}\n"],"names":["service","register","server","useServiceServer","color","handleRefresh","registerName","humanify","useEffect","collapsedRegisters","SystemReg","others","hasIntensityBool","intensity","useRegisterBoolValue","off","toggleOff","intensityRegister","useRegisterUnpackedValue","rest","props","registers","useMemo","pkt","isRegister","pkts","pk","rspec","MIN_VISIBLE_OPACITY","r","g","b","cMin","Math","cMax","cDelta","maxAndMin","l","s","h","g$","b$","r$","hsl","rgbToHsl","fill","el","radius","nr","pixels","pixelsContainer","pn","colors","ci","i","pixel","setRgba","alpha","opacity","actualBrightness","useWidgetTheme","pathRef","useRef","pixelsRef","neoradius","neocircleradius","isJewel","lightVariant","LedStripVariant","isRing","brightnessToOpacity","paint","useCallback","setRgbaLeds","p","pixelGroup","Object","pixelBoxes","offset","length","extra","step","MAGIC_NUMBER","box","boxSize","rotation","pos","point","subscribeColors","d","n","numPixels","neoperimeter","margin","ringradius","width","height","hm","Array","handleClick","onLedClick","fireClick","useFireKey","svgDiameter","impellerRef","impellerRotationRef","impellerRotationRate","useAnimationFrame","active","timeDelta","impeller","continuous","rotationRate","offsetRef","armRef","textRef","cx","cy","a","enabled","angle","transform","w","pr","pri","text","time","arm","id","od","drawDiameter","pathDiameter","makePoint","polarToCartesian","segmentOffset","dia","updateDia","drawPoint","x","gearPath","fwdGearPaths","small","generateGearPath","large","activeRegister","useRegister","RelayReg","handleClose","enabledRegister","ServoReg","angleRegister","reportedAngle","responseSpeedRegister","responseSpeed","rotationalSpeed","useThrottledValue","offsetRegister","clientVariantRegister","BaseReg","minAngleRegister","minAngle","maxAngleRegister","maxAngle","useState","throttle","widgetSize","readOnly","label","angleFormat","continuousFormat","handleContinuousChange","newAngle","newValue","handleAngleChange","handleVariantChange","event","isContinuous","clientVariant","setContinuous","pixelsRegister","LedReg","hasData","useChange","_","colorsRef","clientRef","handleColorChange","newColor","setPenColor","current","handleLedClick","index","newPixels","k","penColor","updatePixels","bufferEq","numPixelsRegister","actualBrightnessRegister","handler","colourPalette","name","value","handlePanelToggle","setLedControls","ready","ledControls","buttonProps","useSvgButtonProps","checked","fs","m","sw","dx","sh","dark","bright","isLit","userSelect","pointerEvents","clipId","useId","hasValue","isNaN","tvalue","ch","widgetScale","mo","ri","rn","FwdEduDevices","useDeviceSpecifications","device","deviceId","useDeviceProductIdentifier","downEvent","useEvent","ButtonEvent","upEvent","setPressed","onDown","onUp","pressed","handleDown","clicksPerTurnRegister","RotaryEncoderReg","clicksPerTurn","position","widgetProps","createElement","createPumpWidget","createServoWidget","createLEDWidget","size","registerNumber","valueReg","lazifyWidget","isRotaryVariant","buttonWidgetProps","lineWidgetProps","dialWidgetProps","DashboardServiceDefaultWidget","analogRegister","ButtonReg","analog","handleUp","ACTIVE_SPEED","INACTIVE_SPEED","LABEL_PRECISION","pressureRegister","thresholdRegister","mixins","cfg","roundWithPrecision","setDown","keepAnimating","rp","ps","range","pressure","describeArc","threshold","positionRegister","handleChange","throttled","min","max","marks","labelId","SwitchReg","variantRegister","on","title","handleToggle","SwitchVariant","buttonLabels","GamepadButtons","nv","GamepadReg","hostValues","onUpdate","dragSurfaceRef","w2","rc","rj","pw","ph","jx","jy","y","jw","updateGamepadDrag","bounds","dy","distance","newx","newy","handlePointerDown","ev","circle","setGrabbing","handlePointerUp","handlePointerMove","nx","decay","ny","handleStyle","cursor","grabbing","buttons","onRefresh","buttonsAvailableRegister","variant","buttonsAvailable","GamepadVariant","directionRegister","hasABButtons","cw","ro","sro","sri","scy","abx","aby","abr","abw","padcx","padcy","padr","DashboardServo","lazy","DashboardAccelerometer","DashboardBuzzer","DashboardLED","DashboardLEDStrip","DashboardLEDSingle","DashboardRoleManager","DashboardTrafficLight","DashboardCharacterScreen","DashboardBrailleDisplay","DashboardRainGauge","DashboardDotMatrix","DashboardWindDirection","DashboardMatrixKeypad","DashboardReflectedLight","DashboardPower","DashboardSpeechSynthesis","DashboardSoilMoisture","DashboardRealTimeClock","DashboardSatNav","DashboardSevenSegmentDisplay","DashboardMotion","DashboardWaterLevel","DashboardColor","DashboardSoundPlayer","DashboardSoundLevel","DashboardSoundSpectrum","DashboardRandomNumberGenerator","DashboardCompass","DashboardGyroscope","DashboardSolenoid","DashboardBitRadio","DashboardHIDKeyboard","DashboardHIDMouse","DashboardHIDJoystick","DashboardCloudConfiguration","DashboardWifi","DashboardVibrationMotor","DashboardCODALMessageBus","DashboardRelay","DashboardGPIO","DashboardLightBulb","DashboardDeviceScriptManager","DashboardCloudAdapter","DashboardPlanarPosition","DashboardSerial","DashboardRos","DashboardIndexedScreen","PowerSettingsNewIcon","MusicNoteIcon","AppsIcon","SensorsIcon","MemoryIcon","CloudQueueIcon","SerialIcon","serviceViews","component","weight","expandable","icon","bundled","specification","useFwdWidget","isFwdEdu","view","catalog","useDeviceCatalog","specifications","JSON","arrayEq","requestRef","previousTimeRef","animate","deltaTime","callback","requestAnimationFrame","cancelAnimationFrame","deps","maxCycles","animated","setActual","dt","error","maxError","maxRate","maxErrorRange","DEFAULT_COLORS","theme","useTheme","handleSetColor","col","onColorChange","selected","c","rgbToHtmlColor","backgroundColor"],"sourceRoot":""}