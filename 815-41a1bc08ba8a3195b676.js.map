{"version":3,"file":"815-41a1bc08ba8a3195b676.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@mui/icons-material/Edit.js","webpack://jacdac-docs/./src/components/widgets/LEDWidget.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardLEDSingle.tsx","webpack://jacdac-docs/./src/components/ui/SliderWithLabel.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Edit');\nexports.default = _default;","import React, { useState } from \"react\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport { Grid, Typography } from \"@mui/material\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport SliderWithLabel from \"../ui/SliderWithLabel\"\nimport ColorButtons from \"./ColorButtons\"\nimport { rgbToHtmlColor } from \"../../../jacdac-ts/src/jdom/utils\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport EditIcon from \"@mui/icons-material/Edit\"\n\nfunction LEDWidgetController(props: {\n    color: \"primary\" | \"secondary\"\n    waveLength?: number\n    ledCount?: number\n    ledColor: number\n    onLedColorChange?: (newLedColor: number) => void\n    speed?: number\n    onSpeedChange?: (newSpeed: number) => void\n    brightness?: number\n    onBrightnessChange?: (newBrightness: number) => void\n}) {\n    const {\n        ledColor,\n        onLedColorChange,\n        speed = 32,\n        onSpeedChange,\n        brightness = 16,\n        onBrightnessChange,\n    } = props\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const handleSpeedChange: any = (event: unknown, newSpeed: number) =>\n        onSpeedChange(newSpeed)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const handleBrightnessChange: any = (event: unknown, newValue: number) =>\n        onBrightnessChange(newValue)\n    const percentValueFormat = (newValue: number) =>\n        `${((newValue / 0xff) * 100) | 0}%`\n\n    return (\n        <Grid container spacing={1} alignItems=\"center\" alignContent=\"center\">\n            {onLedColorChange && (\n                <Grid item xs={12}>\n                    <ColorButtons\n                        color={ledColor}\n                        onColorChange={onLedColorChange}\n                    />\n                </Grid>\n            )}\n            {onSpeedChange && (\n                <Grid item xs={12}>\n                    <SliderWithLabel\n                        label={\"speed\"}\n                        min={0}\n                        step={5}\n                        max={255}\n                        value={speed}\n                        valueLabelDisplay=\"auto\"\n                        valueLabelFormat={percentValueFormat}\n                        onChange={handleSpeedChange}\n                    />\n                </Grid>\n            )}\n            {onBrightnessChange && (\n                <Grid item xs={12}>\n                    <SliderWithLabel\n                        label={\"brightness\"}\n                        min={0}\n                        step={5}\n                        max={255}\n                        value={brightness}\n                        valueLabelDisplay=\"auto\"\n                        valueLabelFormat={percentValueFormat}\n                        onChange={handleBrightnessChange}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n\nfunction LEDWidgetBulb(props: {\n    color: \"primary\" | \"secondary\"\n    waveLength?: number\n    ledCount?: number\n    ledColor: number\n    edit?: boolean\n    onEdit?: () => void\n}) {\n    const { color, ledCount, ledColor, edit, onEdit } = props\n    const r = (ledColor >> 16) & 0xff\n    const g = (ledColor >> 8) & 0xff\n    const b = (ledColor >> 0) & 0xff\n\n    const { active } = useWidgetTheme(color)\n\n    const opacity = !r && !b && !g ? 0 : 1\n    const fill = `rgb(${r}, ${g}, ${b})`\n    const ln = Math.min(ledCount || 1, 5)\n    const lw = 15.5\n    const m = 1\n    const w = (lw + m) * ln\n    const h = 42\n    return (\n        <Grid container spacing={1} direction=\"row\">\n            <Grid item>\n                <SvgWidget width={w} height={h} size={`5em`}>\n                    {Array(ln)\n                        .fill(0)\n                        .map((_, i) => (\n                            <g\n                                key={i}\n                                transform={`translate(${i * (lw + m)}, 0)`}\n                            >\n                                <path\n                                    fill=\"#999\"\n                                    d=\"M14.2 13V7.1C14.2 3.2 11 0 7.1 0 3.2 0 0 3.2 0 7.1v13.7c1.9 1.9 4.4 2.9 7.1 2.8 4.6 0 8.4-2.6 8.4-5.9v-1.5c0-1.2-.5-2.3-1.3-3.2z\"\n                                    opacity=\".65\"\n                                />\n                                <path\n                                    fill={active}\n                                    d=\"M2.8 17.5l-1.2-1.4h1L5 17.5v18.6c0 .3-.5.5-1.1.5-.6 0-1.1-.2-1.1-.5zm10.1 6.7c0-.7-1.1-1.3-2.1-1.8-.4-.2-1.2-.6-1.2-.9v-3.4l2.5-2h-.9l-3.7 2v3.5c0 .7.9 1.2 1.9 1.7.4.2 1.3.8 1.3 1.1v16.9c0 .4.5.7 1.1.7.6 0 1.1-.3 1.1-.7z\"\n                                    stroke=\"#8c8c8c\"\n                                    strokeWidth=\"1px\"\n                                />\n                                <path\n                                    opacity={opacity}\n                                    fill={fill}\n                                    d=\"M14.2 13V7.1C14.2 3.2 11 0 7.1 0 3.2 0 0 3.2 0 7.1v13.7c1.9 1.9 4.4 2.9 7.1 2.8 4.6 0 8.4-2.6 8.4-5.9v-1.5c0-1.2-.5-2.3-1.3-3.2z\"\n                                />\n                                <path\n                                    fill=\"#d1d1d1\"\n                                    d=\"M14.2 13v3.1c0 2.7-3.2 5-7.1 5-3.9 0-7.1-2.2-7.1-5v4.6c1.9 1.9 4.4 2.9 7.1 2.8 4.6 0 8.4-2.6 8.4-5.9v-1.5c0-1.1-.5-2.2-1.3-3.1z\"\n                                    opacity=\".9\"\n                                />\n                                <path\n                                    fill=\"#e6e6e6\"\n                                    d=\"M14.2 13v3.1c0 2.7-3.2 5-7.1 5-3.9 0-7.1-2.2-7.1-5v4.6c1.9 1.9 4.4 2.9 7.1 2.8 4.6 0 8.4-2.6 8.4-5.9v-1.5c0-1.1-.5-2.2-1.3-3.1z\"\n                                    opacity=\".7\"\n                                />\n                                <path\n                                    fill=\"#e6e6e6\"\n                                    d=\"M14.2 13v3.1c0 2.7-3.2 5-7.1 5-3.9 0-7.1-2.2-7.1-5v3.1c1.9 1.9 4.4 2.9 7.1 2.8 4.6 0 8.4-2.6 8.4-5.9 0-1.1-.5-2.2-1.3-3.1z\"\n                                    opacity=\".25\"\n                                />\n                                <ellipse\n                                    cx=\"-7.2\"\n                                    cy=\"-16.1\"\n                                    fill=\"#e6e6e6\"\n                                    opacity=\".25\"\n                                    rx=\"7.1\"\n                                    ry=\"5\"\n                                    transform=\"scale(-1)\"\n                                />\n                                <ellipse\n                                    cx=\"-7.2\"\n                                    cy=\"-16.1\"\n                                    fill=\"#e6e6e6\"\n                                    opacity=\".25\"\n                                    rx=\"7.1\"\n                                    ry=\"5\"\n                                    transform=\"scale(-1)\"\n                                />\n                                <path\n                                    opacity=\".61\"\n                                    fill=\"#fff\"\n                                    d=\"M7.2 22c-4.3 0-6.1-2-6.1-2l.7-.7S3.4 21 7.2 21c2.4.1 4.7-.9 6.3-2.7l.8.6C12.4 21 9.9 22.1 7.2 22z\"\n                                />\n                                <path\n                                    opacity=\".61\"\n                                    fill=\"#fff\"\n                                    d=\"M2.6 3.2C1.5 4.3.9 5.8.9 7.4v10.3l1.9 1.5V8.8c-.9-2.8-.3-4.2.7-5.2-.3-.1-.6-.2-.9-.4zm7.3-1.6l-.3.9c1.5.7 2.6 2.1 2.8 3.7h1c-.3-2-1.6-3.7-3.5-4.6z\"\n                                />\n                            </g>\n                        ))}\n                </SvgWidget>\n            </Grid>\n            <Grid item>\n                <Typography\n                    variant=\"caption\"\n                    style={{ fontFamily: \"monospace\" }}\n                >\n                    {rgbToHtmlColor(ledColor)}\n                </Typography>\n            </Grid>\n            <Grid item>\n                <IconButtonWithTooltip\n                    title={!edit ? \"show editor\" : \"hide editor\"}\n                    onClick={onEdit}\n                >\n                    <EditIcon />\n                </IconButtonWithTooltip>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default function LEDWidget(props: {\n    color: \"primary\" | \"secondary\"\n    waveLength?: number\n    ledCount?: number\n    ledColor: number\n    onLedColorChange?: (newLedColor: number) => void\n    speed?: number\n    onSpeedChange?: (newSpeed: number) => void\n    brightness?: number\n    onBrightnessChange?: (newBrightness: number) => void\n}) {\n    const {\n        color,\n        waveLength,\n        ledCount,\n        ledColor,\n        onLedColorChange,\n        speed = 32,\n        onSpeedChange,\n        brightness = 16,\n        onBrightnessChange,\n    } = props\n    const [edit, setEdit] = useState(false)\n    const handleEdit = () => setEdit(e => !e)\n\n    return (\n        <Grid container spacing={1} alignItems=\"center\" alignContent=\"center\">\n            <Grid item xs={12}>\n                <LEDWidgetBulb\n                    color={color}\n                    ledColor={ledColor}\n                    ledCount={ledCount}\n                    edit={edit}\n                    onEdit={handleEdit}\n                />\n            </Grid>\n            {edit && (\n                <Grid item xs={12}>\n                    <LEDWidgetController\n                        color={color}\n                        waveLength={waveLength}\n                        ledColor={ledColor}\n                        onLedColorChange={onLedColorChange}\n                        speed={speed}\n                        onSpeedChange={onSpeedChange}\n                        brightness={brightness}\n                        onBrightnessChange={onBrightnessChange}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import React, { useEffect, useState } from \"react\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport {\n    COMMAND_RECEIVE,\n    LedSingleCmd,\n    LedSingleReg,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport LoadingProgress from \"../ui/LoadingProgress\"\nimport { jdpack } from \"../../../jacdac-ts/src/jdom/pack\"\nimport LEDWidget from \"../widgets/LEDWidget\"\nimport useRegister from \"../hooks/useRegister\"\nimport { Packet } from \"../../../jacdac-ts/src/jdom/packet\"\nimport useSnackbar from \"../hooks/useSnackbar\"\n\nexport default function DashboardLEDSingle(props: DashboardServiceProps) {\n    const { service } = props\n    const { setError } = useSnackbar()\n    const server = useServiceServer(service)\n    const themeColor = server ? \"secondary\" : \"primary\"\n\n    const [speed, setSpeed] = useState(64)\n    const [brightness, setBrightness] = useState(32)\n\n    const colorRegister = useRegister(service, LedSingleReg.Color)\n    const [r, g, b] = useRegisterUnpackedValue<[number, number, number]>(\n        colorRegister,\n        props\n    )\n    const [uiColor, setUiColor] = useState((r << 16) | (g << 8) | b)\n    const [uiSpeed, setUiSpeed] = useState(speed)\n\n    const waveLengthRegister = useRegister(service, LedSingleReg.WaveLength)\n    const [waveLength] = useRegisterUnpackedValue<[number]>(\n        waveLengthRegister,\n        props\n    )\n    const ledCountRegister = useRegister(service, LedSingleReg.LedCount)\n    const [ledCount] = useRegisterUnpackedValue<[number]>(\n        ledCountRegister,\n        props\n    )\n\n    const setRgb = async (rgb: number) => {\n        const r = ((((rgb >> 16) & 0xff) * brightness) >> 8) & 0xff\n        const g = ((((rgb >> 8) & 0xff) * brightness) >> 8) & 0xff\n        const b = ((((rgb >> 0) & 0xff) * brightness) >> 8) & 0xff\n        try {\n            await service.sendCmdAsync(\n                LedSingleCmd.Animate,\n                jdpack<[number, number, number, number]>(\"u8 u8 u8 u8\", [\n                    r,\n                    g,\n                    b,\n                    speed,\n                ])\n            )\n            setUiColor((r << 16) | (g << 8) | b)\n            setUiSpeed(speed)\n        } catch (e) {\n            setError(e)\n        }\n    }\n\n    // sniff animate call\n    useEffect(\n        () =>\n            service?.subscribe(COMMAND_RECEIVE, (pkt: Packet) => {\n                if (pkt.serviceCommand === LedSingleCmd.Animate) {\n                    const [r, g, b, s] =\n                        pkt.jdunpack<[number, number, number, number]>(\n                            \"u8 u8 u8 u8\"\n                        )\n                    setUiColor((r << 16) | (g << 8) | b)\n                    setUiSpeed(s)\n                }\n            }),\n        [service]\n    )\n\n    // sync color\n    useEffect(() => setUiColor((r << 16) | (g << 8) | b), [r, g, b])\n    // nothing to see\n    if (isNaN(uiColor)) return <LoadingProgress />\n\n    return (\n        <LEDWidget\n            color={themeColor}\n            ledColor={uiColor}\n            waveLength={waveLength}\n            ledCount={ledCount}\n            onLedColorChange={setRgb}\n            speed={speed}\n            onSpeedChange={setSpeed}\n            brightness={brightness}\n            onBrightnessChange={setBrightness}\n        />\n    )\n}\n","import { Slider, SliderProps, Typography } from \"@mui/material\"\nimport React from \"react\"\nimport { useId } from \"react\"\n\nexport default function SliderWithLabel(\n    props: {\n        label?: string\n    } & SliderProps\n) {\n    const { label, ...others } = props\n    const labelId = useId()\n    const sliderId = labelId + \"sliderId\"\n\n    return (\n        <>\n            <Typography id={labelId} variant=\"caption\" gutterBottom>\n                {label}\n            </Typography>\n            <Slider\n                id={sliderId}\n                aria-labelledby={labelId}\n                aria-label={label}\n                valueLabelDisplay=\"auto\"\n                {...others}\n            />\n        </>\n    )\n}\n"],"names":["speed","brightness","handleSpeedChange","onSpeedChange","handleBrightnessChange","onBrightnessChange","percentValueFormat","newValue","onLedColorChange","r","ledColor","g","b","useWidgetTheme","opacity","fill","ln","Math","ledCount","lw","m","w","h","Array","i","fontFamily","rgbToHtmlColor","useState","handleEdit","setEdit","e","edit","useSnackbar","server","useServiceServer","themeColor","colorRegister","useRegister","LedSingleReg","useRegisterUnpackedValue","waveLengthRegister","ledCountRegister","setRgb","rgb","service","LedSingleCmd","jdpack","setUiColor","setUiSpeed","setError","useEffect","pkt","isNaN","others","labelId","useId","sliderId"],"sourceRoot":""}