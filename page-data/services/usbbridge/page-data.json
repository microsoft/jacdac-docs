{"componentChunkName":"component---src-templates-service-tsx","path":"/services/usbbridge/","result":{"pageContext":{"classIdentifier":418781770,"source":"# USB Bridge\n\n    identifier: 0x18f61a4a\n    camel: usbBridge\n    tags: infrastructure\n    status: rc\n\nThis service is normally not announced or otherwise exposed on the serial bus.\nIt is used to communicate with a USB-Jacdac bridge at the USB layer.\nThe host sends broadcast packets to this service to control the link layer.\nThe device responds with broadcast reports (no-one else does that).\nThese packets are not forwarded to the UART Jacdac line.\n\nPackets are sent over USB Serial (CDC).\nThe host shall set the CDC to 1Mbaud 8N1\n(even though in some cases the USB interface is connected directly to the MCU and line settings are\nignored).\n\nThe CDC line carries both Jacdac frames and serial logging output.\nJacdac frames have valid CRC and are framed by delimeter characters and possibly fragmented.\n\n`0xFE` is used as a framing byte.\nNote that bytes `0xF8`-`0xFF` are always invalid UTF-8.\n`0xFF` occurs relatively often in Jacdac packets, so is not used for framing.\n\nThe following sequences are supported:\n\n* `0xFE 0xF8` - literal 0xFE\n* `0xFE 0xF9` - reserved; ignore\n* `0xFE 0xFA` - indicates that some serial logs were dropped at this point\n* `0xFE 0xFB` - indicates that some Jacdac frames were dropped at this point\n* `0xFE 0xFC` - Jacdac frame start\n* `0xFE 0xFD` - Jacdac frame end\n\n0xFE followed by any other byte:\n* in serial, should be treated as literal 0xFE (and the byte as itself, unless it's 0xFE)\n* in frame data, should terminate the current frame fragment,\n  and ideally have all data (incl. fragment start) in the current frame fragment treated as serial\n\n    enum QByte: u8 {\n        Magic = 0xFE\n        LiteralMagic = 0xF8\n        Reserved = 0xF9\n        SerialGap = 0xFA\n        FrameGap = 0xFB\n        FrameStart = 0xFC\n        FrameEnd = 0xFD\n    }\n\n## Commands\n\n    command disable_packets @ 0x80 {}\n    report {}\n\nDisables forwarding of Jacdac packets.\n\n    command enable_packets @ 0x81 {}\n    report {}\n\nEnables forwarding of Jacdac packets.\n\n    command disable_log @ 0x82 {}\n    report {}\n\nDisables forwarding of serial log messages.\n\n    command enable_log @ 0x83 {}\n    report {}\n\nEnables forwarding of serial log messages.\n","title":"USB Bridge"}},"staticQueryHashes":["1089213825","2744294623","3360859391","3610498499","3868184074","4022945823","413816803","63159454"]}