{"componentChunkName":"component---src-templates-service-tsx","path":"/services/timeseriesaggregator/","result":{"pageContext":{"classIdentifier":294829516,"source":"# Timeseries Aggregator\n\n    identifier: 0x1192bdcc\n    group: iot\n    tags: infrastructure, devicescript\n    restricted: true\n    status: experimental\n\nSupports aggregating timeseries data (especially sensor readings)\nand sending them to a cloud/storage service.\nUsed in DeviceScript.\n\nNote that `f64` values are not necessarily aligned.\n\n## Commands\n\n    command clear @ 0x80 {}\n\nRemove all pending timeseries.\n\n    command update @ 0x83 {\n        value: f64\n        label: string\n    }\n\nAdd a data point to a timeseries.\n\n    command set_window @ 0x84 {\n        duration: u32 ms\n        label: string\n    }\n\nSet aggregation window.\nSetting to `0` will restore default.\n\n    command set_upload @ 0x85 {\n        upload: bool\n        label: string\n    }\n\nSet whether or not the timeseries will be uploaded to the cloud.\nThe `stored` reports are generated regardless.\n\n    report stored @ 0x90 {\n        num_samples: u32 #\n        padding: u8[4]\n        avg: f64\n        min: f64\n        max: f64\n        start_time: u32 ms\n        end_time: u32 ms\n        label: string\n    }\n\nIndicates that the average, minimum and maximum value of a given\ntimeseries are as indicated.\nIt also says how many samples were collected, and the collection period.\nTimestamps are given using device's internal clock, which will wrap around.\nTypically, `end_time` can be assumed to be \"now\".\n`end_time - start_time == window`\n\n# Registers\n\n    volatile ro now: u32 us @ 0x180\n\nThis can queried to establish local time on the device.\n\n    rw fast_start = 1: bool @ 0x80\n\nWhen `true`, the windows will be shorter after service reset and gradually extend to requested length.\nThis is ensure valid data is being streamed in program development.\n\n    rw default_window = 60000: u32 ms @ 0x81\n\nWindow for timeseries for which `set_window` was never called.\nNote that windows returned initially may be shorter if `fast_start` is enabled.\n\n    rw default_upload = 1: bool @ 0x82\n\nWhether labelled timeseries for which `set_upload` was never called should be automatically uploaded.\n\n    rw upload_unlabelled = 1: bool @ 0x83\n\nWhether automatically created timeseries not bound in role manager should be uploaded.\n\n    rw sensor_watchdog_period: u32 ms @ 0x84\n\nIf no data is received from any sensor within given period, the device is rebooted.\nSet to `0` to disable (default).\nUpdating user-provided timeseries does not reset the watchdog.\n","title":"Timeseries Aggregator"}},"staticQueryHashes":["1089213825","2744294623","3360859391","3610498499","3868184074","4022945823","413816803","63159454"]}