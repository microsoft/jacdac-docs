{"version":3,"file":"6370-6416003f9a42245ce02d.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@mui/icons-material/MouseOutlined.js","webpack://jacdac-docs/./src/components/dashboard/DashboardHIDMouse.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 9c-.04-4.39-3.6-7.93-8-7.93S4.04 4.61 4 9v6c0 4.42 3.58 8 8 8s8-3.58 8-8V9zm-2 0h-5V3.16c2.81.47 4.96 2.9 5 5.84zm-7-5.84V9H6c.04-2.94 2.19-5.37 5-5.84zM18 15c0 3.31-2.69 6-6 6s-6-2.69-6-6v-4h12v4z\"\n}), 'MouseOutlined');\nexports.default = _default;","/* eslint-disable jsx-a11y/no-noninteractive-tabindex */\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\nimport React, { KeyboardEvent, MouseEvent, useRef, useState } from \"react\"\nimport { styled } from \"@mui/material/styles\"\nimport { Grid, Typography } from \"@mui/material\"\nimport {\n    HidMouseButton,\n    HidMouseButtonEvent,\n    HidMouseCmd,\n} from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { jdpack } from \"../../../jacdac-ts/src/jdom/pack\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport {\n    HIDMouseServer,\n    renderHidMouseButtons,\n} from \"../../../jacdac-ts/src/servers/hidmouseserver\"\nimport useChange from \"../../jacdac/useChange\"\nimport MouseIcon from \"@mui/icons-material/MouseOutlined\"\n\nconst PREFIX = \"DashboardHIDMouse\"\n\nconst classes = {\n    capture: `${PREFIX}capture`,\n}\n\nconst StyledGrid = styled(Grid)(({ theme }) => ({\n    [`& .${classes.capture}`]: {\n        whiteSpace: \"pre-wrap\",\n        borderWidth: \"1px\",\n        borderStyle: \"solid\",\n        borderColor: \"transparent\",\n        userSelect: \"none\",\n        \"&:hover\": {\n            borderColor: theme.palette.primary.main,\n        },\n        \"&:focus\": {\n            borderColor: theme.palette.action.active,\n        },\n    },\n}))\n\nexport default function DashboardHIDMouse(props: DashboardServiceProps) {\n    const { service } = props\n\n    const preRef = useRef<HTMLPreElement>()\n    const server = useServiceServer<HIDMouseServer>(service)\n    const [observed, setObserved] = useState(\"\")\n    const sendButton = async (\n        buttons: HidMouseButton,\n        event: HidMouseButtonEvent\n    ) => {\n        const data = jdpack<[HidMouseButton, HidMouseButtonEvent]>(\"u16 u8\", [\n            buttons,\n            event,\n        ])\n        await service.sendCmdAsync(HidMouseCmd.SetButton, data)\n    }\n    const sendMove = async (dx: number, dy: number) => {\n        const data = jdpack<[number, number, number]>(\"i16 i16 u16\", [\n            dx,\n            dy,\n            100,\n        ])\n        await service.sendCmdAsync(HidMouseCmd.Move, data)\n    }\n    const sendWheel = async (dy: number) => {\n        const data = jdpack<[number, number]>(\"i16 u16\", [dy, 100])\n        await service.sendCmdAsync(HidMouseCmd.Wheel, data)\n    }\n    const serverValue = useChange(server, _ => _?.lastCommand)\n    const preview = serverValue || observed\n    const handleMouseDown = (ev: MouseEvent<HTMLPreElement>) => {\n        const { buttons } = ev\n        preRef.current.focus()\n        setObserved(`set button ${renderHidMouseButtons(buttons)} down`)\n    }\n    const handleMouseUp = (ev: MouseEvent<HTMLPreElement>) => {\n        const { buttons } = ev\n        setObserved(`set button ${renderHidMouseButtons(buttons)} up`)\n    }\n    const handleKeyDown = async (ev: KeyboardEvent<HTMLPreElement>) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n        const { key } = ev\n        switch (key) {\n            case \"l\":\n                sendButton(HidMouseButton.Left, HidMouseButtonEvent.Click)\n                break\n            case \"r\":\n                sendButton(HidMouseButton.Right, HidMouseButtonEvent.Click)\n                break\n            case \"m\":\n                sendButton(HidMouseButton.Middle, HidMouseButtonEvent.Click)\n                break\n            case \"ArrowRight\":\n                sendMove(10, 0)\n                break\n            case \"ArrowLeft\":\n                sendMove(-10, 0)\n                break\n            case \"ArrowUp\":\n                sendMove(0, -10)\n                break\n            case \"ArrowDown\":\n                sendMove(0, 10)\n                break\n            case \"w\":\n                sendWheel(-10)\n                break\n            case \"d\":\n                sendWheel(10)\n                break\n        }\n    }\n\n    return (\n        <StyledGrid container>\n            <Grid item xs={12}>\n                <pre\n                    ref={preRef}\n                    className={classes.capture}\n                    tabIndex={0}\n                    onMouseDown={handleMouseDown}\n                    onMouseUp={handleMouseUp}\n                    onKeyDown={handleKeyDown}\n                >\n                    <Grid container spacing={1} direction=\"row\">\n                        <Grid item>\n                            <MouseIcon fontSize=\"large\" />\n                        </Grid>\n                        <Grid item xs style={{ userSelect: \"none\" }}>\n                            focus and type l(eft), r(ight), m(iddle) for\n                            buttons, arrow keys to move, w(heel up), d(wheel\n                            down) for the wheel\n                        </Grid>\n                    </Grid>\n                </pre>\n            </Grid>\n            {server && preview && (\n                <Grid item xs={12}>\n                    <Typography variant=\"caption\" component=\"pre\">\n                        mouse preview: {preview || \"...\"}\n                    </Typography>\n                </Grid>\n            )}\n        </StyledGrid>\n    )\n}\n"],"names":["PREFIX","classes","capture","StyledGrid","styled","whiteSpace","borderWidth","borderStyle","borderColor","userSelect","theme","preRef","useRef","server","useServiceServer","useState","sendButton","data","jdpack","service","HidMouseCmd","sendMove","sendWheel","serverValue","useChange","_","preview","handleMouseDown","ev","setObserved","renderHidMouseButtons","handleMouseUp","handleKeyDown","HidMouseButton","HidMouseButtonEvent"],"sourceRoot":""}