"use strict";
(self["webpackChunkjacdac_docs"] = self["webpackChunkjacdac_docs"] || []).push([[7327],{

/***/ 97327:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ DashboardAccelerometer; }
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(15861);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67294);
/* harmony import */ var _jacdac_ts_src_jdom_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3964);
/* harmony import */ var _jacdac_useRegisterValue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9680);
/* harmony import */ var _widgets_useWidgetTheme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2874);
/* harmony import */ var _hooks_useServiceServer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(75938);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(15725);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(79104);
/* harmony import */ var _jacdac_ts_src_jdom_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(46196);
/* harmony import */ var _ui_Suspense__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(19811);
/* harmony import */ var _ui_SliderWithLabel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32849);
/* harmony import */ var _hooks_useRegister__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(22878);
/* harmony import */ var _MaxReadingField__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(66660);
/* harmony import */ var _DashboardRegisterValueFallback__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(47644);
var CanvasWidget=/*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.lazy)(()=>Promise.all(/* import() */[__webpack_require__.e(3737), __webpack_require__.e(317)]).then(__webpack_require__.bind(__webpack_require__, 22561)));var valueDisplay=v=>(0,_jacdac_ts_src_jdom_utils__WEBPACK_IMPORTED_MODULE_5__/* .roundWithPrecision */ .JI)(v,1);function Sliders(props){var{server,register}=props;var xId=(0,react__WEBPACK_IMPORTED_MODULE_0__.useId)();var yId=xId+"-y";var zId=xId+"-z";var forces=(0,_jacdac_useRegisterValue__WEBPACK_IMPORTED_MODULE_2__/* .useRegisterUnpackedValue */ .Pf)(register,props);// eslint-disable-next-line @typescript-eslint/no-explicit-any
var handleChangeX=/*#__PURE__*/function(){var _ref=(0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(function*(event,newValue){var[,y]=server.reading.values();// eslint-disable-next-line @typescript-eslint/no-explicit-any
var n=newValue;var nz=-Math.sqrt(1-(n*n+y*y));server.reading.setValues([n,y,nz]);yield register.sendGetAsync();});return function handleChangeX(_x,_x2){return _ref.apply(this,arguments);};}();// eslint-disable-next-line @typescript-eslint/no-explicit-any
var handleChangeY=/*#__PURE__*/function(){var _ref2=(0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z)(function*(event,newValue){var[x]=server.reading.values();// eslint-disable-next-line @typescript-eslint/no-explicit-any
var n=newValue;var nz=-Math.sqrt(1-(x*x+n*n));server.reading.setValues([x,n,nz]);yield register.sendGetAsync();});return function handleChangeY(_x3,_x4){return _ref2.apply(this,arguments);};}();if(!(forces!==null&&forces!==void 0&&forces.length))return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DashboardRegisterValueFallback__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z,{register:register});var[x,y,z]=forces;var min=-2;var max=2;var step=0.1;var marks=[{value:0},{value:-1},{value:1}];return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .ZP,{item:true,xs:12},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_SliderWithLabel__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z,{id:xId,label:"X",valueLabelDisplay:"on",valueLabelFormat:valueDisplay,"aria-label":"x",min:min,max:max,step:step,value:x,onChange:server?handleChangeX:undefined,marks:marks})),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .ZP,{item:true,xs:12},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_SliderWithLabel__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z,{id:yId,label:"Y",valueLabelDisplay:"on",valueLabelFormat:valueDisplay,"aria-label":"y",min:min,max:max,step:step,value:y,onChange:server?handleChangeY:undefined,marks:marks})),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .ZP,{item:true,xs:12},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_SliderWithLabel__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z,{id:zId,label:"Z",valueLabelDisplay:"on",valueLabelFormat:valueDisplay,"aria-label":"z",min:min,max:max,step:step,value:z,marks:marks})));}function lerp(v0,v1,t){return v0*(1-t)+v1*t;}function DashboardAccelerometer(props){var{service,visible,expanded}=props;var register=(0,_hooks_useRegister__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)(service,_jacdac_ts_src_jdom_constants__WEBPACK_IMPORTED_MODULE_1__/* .AccelerometerReg.Forces */ .bdf.Forces);(0,_jacdac_useRegisterValue__WEBPACK_IMPORTED_MODULE_2__/* .useRegisterUnpackedValue */ .Pf)(register,props);var server=(0,_hooks_useServiceServer__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(service);var color=server?"secondary":"primary";var{active}=(0,_widgets_useWidgetTheme__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(color);var rotator=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((delta,rotation)=>{var forces=register.unpackedValue;if(!forces)return undefined;var[x,y,z]=forces;var roll=Math.atan2(-y,z);if(y>=0)roll+=Math.PI;else roll-=Math.PI;var pitch=Math.atan(x/(y*y+z*z));return{x:lerp(rotation.x,roll,0.1),y:0,z:lerp(rotation.z,pitch,0.1)};},[register]);return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .ZP,{container:true,direction:"row"},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .ZP,{item:true},/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Z,null,/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_Suspense__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z,null,/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(CanvasWidget,{color:active,rotator:rotator})))),expanded&&/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Sliders,{server:server,register:register,visible:visible}),expanded&&/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_MaxReadingField__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z,Object.assign({registerCode:_jacdac_ts_src_jdom_constants__WEBPACK_IMPORTED_MODULE_1__/* .AccelerometerReg.MaxForce */ .bdf.MaxForce},props)));}

/***/ })

}]);
//# sourceMappingURL=7327-75ba85181bd81a81fafc.js.map