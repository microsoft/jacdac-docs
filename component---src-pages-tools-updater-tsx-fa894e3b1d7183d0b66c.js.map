{"version":3,"file":"component---src-pages-tools-updater-tsx-fa894e3b1d7183d0b66c.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@mui/icons-material/DeleteForever.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/GitHub.js","webpack://jacdac-docs/./node_modules/@mui/material/ListItemText/ListItemText.js","webpack://jacdac-docs/./src/components/alert/ConnectAlert.tsx","webpack://jacdac-docs/./src/components/firmware/FirmwareLoader.tsx","webpack://jacdac-docs/./src/components/firmware/FlashDeviceButton.tsx","webpack://jacdac-docs/./src/components/firmware/useDeviceFirmwareBlob.ts","webpack://jacdac-docs/./src/components/firmware/useDeviceFirmwareInfo.ts","webpack://jacdac-docs/./src/components/makecode/MakeCodeGithubImportLink.tsx","webpack://jacdac-docs/./src/components/github/GithubRepositoryCardHeader.tsx","webpack://jacdac-docs/./src/components/icons/MakeCodeIcon.tsx","webpack://jacdac-docs/./src/components/makecode/MakeCodeOpenSnippetButton.tsx","webpack://jacdac-docs/./src/components/makecode/usePxtJson.ts","webpack://jacdac-docs/./src/components/ui/AlertSwitch.tsx","webpack://jacdac-docs/./src/components/ui/CircularProgressWithLabel.tsx","webpack://jacdac-docs/./src/components/ui/GridHeader.tsx","webpack://jacdac-docs/./src/jacdac/useProxy.ts","webpack://jacdac-docs/./src/components/firmware/useFirmwareRepos.ts","webpack://jacdac-docs/./src/components/firmware/LocalFileFirmwareCard.tsx","webpack://jacdac-docs/./src/components/firmware/FirmwareCardGrid.tsx","webpack://jacdac-docs/./src/components/UpdateDeviceList.tsx","webpack://jacdac-docs/./src/components/firmware/SafeBootAlert.tsx","webpack://jacdac-docs/./src/components/select/SelectDevice.tsx","webpack://jacdac-docs/./src/components/firmware/ManualFirmwareAlert.tsx","webpack://jacdac-docs/./src/components/tools/Flash.tsx","webpack://jacdac-docs/./src/pages/tools/updater.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'DeleteForever');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27\"\n}), 'GitHub');\nexports.default = _default;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"children\", \"className\", \"disableTypography\", \"inset\", \"primary\", \"primaryTypographyProps\", \"secondary\", \"secondaryTypographyProps\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport Typography from '../Typography';\nimport ListContext from '../List/ListContext';\nimport useThemeProps from '../styles/useThemeProps';\nimport styled from '../styles/styled';\nimport listItemTextClasses, { getListItemTextUtilityClass } from './listItemTextClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    inset,\n    primary,\n    secondary,\n    dense\n  } = ownerState;\n  const slots = {\n    root: ['root', inset && 'inset', dense && 'dense', primary && secondary && 'multiline'],\n    primary: ['primary'],\n    secondary: ['secondary']\n  };\n  return composeClasses(slots, getListItemTextUtilityClass, classes);\n};\nconst ListItemTextRoot = styled('div', {\n  name: 'MuiListItemText',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [{\n      [`& .${listItemTextClasses.primary}`]: styles.primary\n    }, {\n      [`& .${listItemTextClasses.secondary}`]: styles.secondary\n    }, styles.root, ownerState.inset && styles.inset, ownerState.primary && ownerState.secondary && styles.multiline, ownerState.dense && styles.dense];\n  }\n})(({\n  ownerState\n}) => _extends({\n  flex: '1 1 auto',\n  minWidth: 0,\n  marginTop: 4,\n  marginBottom: 4\n}, ownerState.primary && ownerState.secondary && {\n  marginTop: 6,\n  marginBottom: 6\n}, ownerState.inset && {\n  paddingLeft: 56\n}));\nconst ListItemText = /*#__PURE__*/React.forwardRef(function ListItemText(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiListItemText'\n  });\n  const {\n      children,\n      className,\n      disableTypography = false,\n      inset = false,\n      primary: primaryProp,\n      primaryTypographyProps,\n      secondary: secondaryProp,\n      secondaryTypographyProps\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const {\n    dense\n  } = React.useContext(ListContext);\n  let primary = primaryProp != null ? primaryProp : children;\n  let secondary = secondaryProp;\n  const ownerState = _extends({}, props, {\n    disableTypography,\n    inset,\n    primary: !!primary,\n    secondary: !!secondary,\n    dense\n  });\n  const classes = useUtilityClasses(ownerState);\n  if (primary != null && primary.type !== Typography && !disableTypography) {\n    primary = /*#__PURE__*/_jsx(Typography, _extends({\n      variant: dense ? 'body2' : 'body1',\n      className: classes.primary,\n      component: primaryTypographyProps != null && primaryTypographyProps.variant ? undefined : 'span',\n      display: \"block\"\n    }, primaryTypographyProps, {\n      children: primary\n    }));\n  }\n  if (secondary != null && secondary.type !== Typography && !disableTypography) {\n    secondary = /*#__PURE__*/_jsx(Typography, _extends({\n      variant: \"body2\",\n      className: classes.secondary,\n      color: \"text.secondary\",\n      display: \"block\"\n    }, secondaryTypographyProps, {\n      children: secondary\n    }));\n  }\n  return /*#__PURE__*/_jsxs(ListItemTextRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other, {\n    children: [primary, secondary]\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItemText.propTypes /* remove-proptypes */ = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * Alias for the `primary` prop.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the children won't be wrapped by a Typography component.\n   * This can be useful to render an alternative Typography variant by wrapping\n   * the `children` (or `primary`) text, and optional `secondary` text\n   * with the Typography component.\n   * @default false\n   */\n  disableTypography: PropTypes.bool,\n  /**\n   * If `true`, the children are indented.\n   * This should be used if there is no left avatar or left icon.\n   * @default false\n   */\n  inset: PropTypes.bool,\n  /**\n   * The main content element.\n   */\n  primary: PropTypes.node,\n  /**\n   * These props will be forwarded to the primary typography component\n   * (as long as disableTypography is not `true`).\n   */\n  primaryTypographyProps: PropTypes.object,\n  /**\n   * The secondary content element.\n   */\n  secondary: PropTypes.node,\n  /**\n   * These props will be forwarded to the secondary typography component\n   * (as long as disableTypography is not `true`).\n   */\n  secondaryTypographyProps: PropTypes.object,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default ListItemText;","// tslint:disable-next-line: no-submodule-imports\nimport { Box } from \"@mui/material\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport React, { useContext } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/spec\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport { NoSsr } from \"@mui/material\"\nimport ConnectButtons from \"../buttons/ConnectButtons\"\nimport useDevices from \"../hooks/useDevices\"\nimport { UIFlags } from \"../../jacdac/providerbus\"\n\nfunction NoSsrConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    const { serviceClass, closeable } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { transports } = bus\n    const devices = useDevices({ serviceClass, ignoreInfrastructure: true })\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n\n    // don't show if no transport, some devices\n    if ((!UIFlags.connect && !transports.length) || devices?.length) return null\n\n    return (\n        <Box displayPrint=\"none\">\n            <Alert severity=\"info\" closeable={closeable}>\n                {!spec && <span>Did you connect your device?</span>}\n                {spec && <span>Did you connect a {spec.name} device?</span>}\n                <Box component=\"span\" ml={2}>\n                    <ConnectButtons full=\"always\" transparent={true} />\n                </Box>\n            </Alert>\n        </Box>\n    )\n}\n\nexport default function ConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    return (\n        <NoSsr>\n            <NoSsrConnectAlert {...props} />\n        </NoSsr>\n    )\n}\n","import React from \"react\"\nimport useFirmwareBlobs from \"./useFirmwareBlobs\"\n\nexport default function FirmwareLoader() {\n    useFirmwareBlobs()\n    return <></>\n}\n","import {\n    Button,\n    Typography,\n    Dialog,\n    DialogContent,\n    Grid,\n    AlertTitle,\n} from \"@mui/material\"\nimport { Alert } from \"@mui/material\"\nimport React, { useEffect, useState } from \"react\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport {\n    updateApplicable,\n    FirmwareBlob,\n    FirmwareUpdater,\n} from \"../../../jacdac-ts/src/jdom/flashing\"\nimport CircularProgressWithLabel from \"../ui/CircularProgressWithLabel\"\nimport useChange from \"../../jacdac/useChange\"\nimport useAnalytics from \"../hooks/useAnalytics\"\nimport useDeviceSpecification from \"../../jacdac/useDeviceSpecification\"\nimport { Link } from \"gatsby-material-ui-components\"\nimport DialogTitleWithClose from \"../ui/DialogTitleWithClose\"\nimport { useLatestReleaseAsset } from \"../github\"\nimport useBus from \"../../jacdac/useBus\"\nimport useSnackbar from \"../hooks/useSnackbar\"\nimport { PROGRESS } from \"../../../jacdac-ts/src/jdom/constants\"\nimport useDeviceFirmwareInfo from \"./useDeviceFirmwareInfo\"\nimport { semverCmp } from \"../../../jacdac-ts/src/jdom/semver\"\nimport FirmwareFlashInstructions from \"./FirmwareFlashInstructions\"\n\nfunction DragAndDropUpdateButton(props: {\n    firmwareVersion: string\n    productIdentifier: number\n    specification: jdspec.DeviceSpec\n    info: { name: string; url: string; productIdentifier?: number }\n}) {\n    const bus = useBus()\n    const { firmwareVersion, specification, info, productIdentifier } = props\n    const { name, url } = info\n    const [open, setOpen] = useState(false)\n    const { trackEvent } = useAnalytics()\n    const handleOpen = () => {\n        trackEvent(\"flash.download\", {\n            device: specification.name,\n            firmwareName: name,\n        })\n        setOpen(true)\n    }\n    const handleClose = () => setOpen(false)\n    const { version, assertUrl } = useLatestReleaseAsset(url)\n    const current =\n        !!productIdentifier && productIdentifier === info.productIdentifier\n    const hasUpdate =\n        current &&\n        version &&\n        firmwareVersion &&\n        semverCmp(firmwareVersion, version) > 0\n\n    // device dissapears after reset\n    useEffect(() => {\n        if (open) {\n            bus.pushDeviceFrozen()\n            return () => bus.popDeviceFrozen()\n        }\n    }, [open])\n\n    return (\n        <>\n            <Button\n                variant={hasUpdate ? \"contained\" : \"outlined\"}\n                color={current ? \"primary\" : \"inherit\"}\n                onClick={handleOpen}\n            >\n                {name}\n                {version && (\n                    <Typography sx={{ ml: 1 }} variant=\"caption\">\n                        {version}\n                    </Typography>\n                )}\n            </Button>\n            <Dialog open={open}>\n                <DialogTitleWithClose onClose={handleClose}>\n                    Updating your {specification.name}\n                </DialogTitleWithClose>\n                <DialogContent>\n                    <p>\n                        Follow these instruction to upgrade your{\" \"}\n                        {specification.name} with <b>{name}</b>.\n                    </p>\n                    <ol>\n                        <li>\n                            <Link href={assertUrl || url}>\n                                Download the firmware file\n                            </Link>\n                        </li>\n                        <FirmwareFlashInstructions\n                            specification={specification}\n                        />\n                    </ol>\n                </DialogContent>\n            </Dialog>\n        </>\n    )\n}\n\nexport function FlashDeviceButton(props: {\n    device: JDDevice\n    blob: FirmwareBlob\n    ignoreFirmwareCheck?: boolean\n    hideUpToDate?: boolean\n}) {\n    const { device, blob, ignoreFirmwareCheck, hideUpToDate } = props\n    const bus = useBus()\n    const { setError } = useSnackbar()\n    const { trackEvent, trackError } = useAnalytics()\n    const [progress, setProgress] = useState(0)\n    const specification = useDeviceSpecification(device)\n    const firmwares = specification?.firmwares\n    const bootloader = useChange(device, _ => _?.bootloader)\n    const firmwareUpdater = useChange(device, _ => _?.firmwareUpdater)\n    const firmwareInfo = useDeviceFirmwareInfo(device)\n    const update =\n        ignoreFirmwareCheck ||\n        (blob?.version &&\n            firmwareInfo?.version &&\n            updateApplicable(firmwareInfo, blob))\n    const upToDate =\n        blob?.version &&\n        firmwareInfo?.version &&\n        blob.version === firmwareInfo.version\n    const unsupported = specification && !specification.repo\n    const missing = !device || !blob\n    const disabled = !!firmwareUpdater\n    const color = update && !upToDate ? \"primary\" : \"inherit\"\n\n    useEffect(\n        () =>\n            firmwareUpdater?.subscribe(PROGRESS, (v: number) =>\n                setProgress(v * 100)\n            ),\n        [firmwareUpdater]\n    )\n\n    const handleFlashing = async () => {\n        if (device.firmwareUpdater) return\n        const props = {\n            productId: firmwareInfo.productIdentifier,\n            name: firmwareInfo.name,\n            version: firmwareInfo.version,\n        }\n        console.debug(\"start flash\", { ...props, device })\n        trackEvent(\"flash.start\", props)\n        const updater = new FirmwareUpdater(device.bus, blob)\n        try {\n            device.firmwareUpdater = updater\n            setProgress(0)\n            const updateCandidates = [firmwareInfo]\n            await updater.flash(updateCandidates, ignoreFirmwareCheck)\n            trackEvent(\"flash.success\", props)\n        } catch (e) {\n            trackError(e, props)\n            trackEvent(\"flash.error\", props)\n            setError(e)\n        } finally {\n            console.debug(\"end flash\", { ...props, device })\n            // rebuild device\n            bus.removeDevice(device.deviceId)\n        }\n    }\n\n    useEffect(() => {\n        if (device && firmwareInfo && !bootloader && update && !upToDate) {\n            handleFlashing()\n        }\n    }, [device, firmwareInfo, bootloader, update, upToDate])\n\n    if (hideUpToDate && upToDate) return null\n\n    if (firmwares?.length)\n        return (\n            <Grid container spacing={1} direction=\"row\">\n                {firmwares.map(fw => (\n                    <Grid item key={fw.name}>\n                        <DragAndDropUpdateButton\n                            firmwareVersion={firmwareInfo?.version}\n                            productIdentifier={firmwareInfo?.productIdentifier}\n                            specification={specification}\n                            info={fw}\n                        />\n                    </Grid>\n                ))}\n            </Grid>\n        )\n\n    return unsupported ? (\n        <Alert severity=\"info\">No registered firmware</Alert>\n    ) : missing ? (\n        <Alert severity=\"info\">No firmware available</Alert>\n    ) : firmwareUpdater ? (\n        <>\n            <Typography variant=\"caption\" component=\"div\" color=\"textSecondary\">\n                Updating firmware\n            </Typography>\n            <CircularProgressWithLabel value={progress} />\n        </>\n    ) : firmwareInfo || update ? (\n        <Alert severity={upToDate ? \"success\" : \"info\"}>\n            <AlertTitle>\n                {upToDate ? \"Up to date!\" : `${blob.version} available`}\n            </AlertTitle>\n            {(!upToDate || ignoreFirmwareCheck) && firmwareInfo && (\n                <Button\n                    title={`Flash ${blob.version}`}\n                    disabled={disabled}\n                    variant=\"contained\"\n                    color={color}\n                    onClick={handleFlashing}\n                >\n                    Update\n                </Button>\n            )}\n        </Alert>\n    ) : (\n        <Alert severity=\"info\">No firmware available</Alert>\n    )\n}\n","import { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport useBus from \"../../jacdac/useBus\"\nimport useChange from \"../../jacdac/useChange\"\nimport useDeviceFirmwareInfo from \"./useDeviceFirmwareInfo\"\n\nexport default function useDeviceFirmwareBlob(device: JDDevice) {\n    const bus = useBus()\n    const blobs = useChange(bus, _ => _.firmwareBlobs)\n    const firmwareInfo = useDeviceFirmwareInfo(device)\n    const blob =\n        firmwareInfo &&\n        blobs?.find(b => firmwareInfo.productIdentifier == b.productIdentifier)\n\n    return blob\n}\n","import { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function useDeviceFirmwareInfo(device: JDDevice) {\n    const firmwareInfo = useChange(\n        device,\n        _ => _?.firmwareInfo,\n        undefined,\n        (a, b) =>\n            !!a == !!b &&\n            (!a ||\n                (a.deviceId === b.deviceId &&\n                    a.version === b.version &&\n                    a.productIdentifier === b.productIdentifier &&\n                    a.bootloaderProductIdentifier ==\n                        b.bootloaderProductIdentifier))\n    )\n\n    return firmwareInfo\n}\n","import React from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport { Typography } from \"@mui/material\"\nimport { Link } from \"gatsby-theme-material-ui\"\n\nexport default function MakeCodeGithubImportLink(props: { slug: string }) {\n    const { slug } = props\n    const importUrl = `https://makecode.microbit.org/#pub:github:${slug}`\n\n    return (\n        <Link href={importUrl} target=\"blank\" underline=\"hover\" title={\"open extension in MakeCode\"}>\n            <Typography component=\"span\" variant=\"h5\">\n                {slug}\n            </Typography>\n        </Link>\n    )\n}\n","import React from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport { CardHeader } from \"@mui/material\"\nimport { normalizeSlug, useLatestFirmwareRelease } from \"../github\"\nimport GitHubIcon from \"@mui/icons-material/GitHub\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport MakeCodeOpenSnippetButton from \"../makecode/MakeCodeOpenSnippetButton\"\nimport MakeCodeGithubImportLink from \"../makecode/MakeCodeGithubImportLink\"\n\nexport default function GithubRepositoryCardHeader(props: {\n    slug: string\n    showRelease?: boolean\n    showMakeCodeButton?: boolean\n    showMakeCodeImportButton?: boolean\n}) {\n    const { slug, showRelease, showMakeCodeButton, showMakeCodeImportButton } =\n        props\n    const { repoPath, name: repoName } = normalizeSlug(slug)\n    const { response: release } = useLatestFirmwareRelease(showRelease && slug)\n\n    return (\n        <CardHeader\n            title={\n                showMakeCodeImportButton ? (\n                    <MakeCodeGithubImportLink slug={slug} />\n                ) : (\n                    <>{slug}</>\n                )\n            }\n            subheader={\n                showRelease &&\n                release && (\n                    <Link\n                        color=\"textSecondary\"\n                        target=\"_blank\"\n                        to={release.html_url}\n                    >\n                        {release.version}\n                    </Link>\n                )\n            }\n            avatar={\n                <Link\n                    target=\"_blank\"\n                    underline=\"hover\"\n                    title=\"Open repository in github.com\"\n                    href={`https://github.com/${repoPath}`}\n                >\n                    <GitHubIcon />\n                </Link>\n            }\n            action={\n                showMakeCodeButton && (\n                    <MakeCodeOpenSnippetButton\n                        name={`${repoName} with jacdac`}\n                        slug={slug}\n                    />\n                )\n            }\n        />\n    )\n}\n","import { SvgIcon, SvgIconProps } from \"@mui/material\"\nimport React from \"react\"\n\nexport default (props: SvgIconProps) => (\n    <SvgIcon titleAccess=\"MakeCode logo\" {...props}>\n        <path\n            d=\"M4.703 2.615s-.505.05-.72.15a3.011 3.011 0 00-.391.221c-.22.12-.42.266-.6.444-.52.516-.795 1.2-.834 2.05a6.857 6.857 0 00-.066.961V8.36a5.117 5.117 0 01-.137 1.032 1.73 1.73 0 01-.4.773 2.006 2.006 0 00-.15.149 6.534 6.534 0 01-.848.617c-.303.196-.481.474-.537.83v.017c-.01.07-.017.14-.018.215L0 12.006v.008c0 .08.003.156.012.226h.002c.024.214.082.378.177.492.129.153.345.328.649.52.304.192.552.398.74.62.19.221.332.549.428.985.037.17.065.54.084 1.106v1.514c0 .285.023.542.056.787.001.047 0 .092.002.14.007.587.135 1.107.385 1.559.25.453.604.803 1.063 1.05.458.248.978.372 1.56.372h14.139c.262 0 .505-.05.72-.15.139-.064.267-.14.391-.221.218-.12.42-.266.6-.444.52-.516.795-1.2.834-2.05.042-.299.066-.618.066-.963v-1.918c.014-.372.059-.715.137-1.03.078-.314.213-.572.4-.775a1.98 1.98 0 00.15-.146c.2-.179.48-.384.848-.618.303-.196.481-.475.537-.832l.002-.015a1.66 1.66 0 00.018-.217V11.988c0-.08-.004-.156-.012-.226h-.002c-.024-.214-.082-.378-.177-.492-.129-.153-.345-.328-.649-.52a3.208 3.208 0 01-.74-.62c-.19-.221-.332-.55-.428-.987-.037-.17-.065-.538-.084-1.104V6.523c0-.285-.023-.542-.056-.787-.001-.047 0-.092-.002-.14-.007-.587-.135-1.107-.385-1.559a2.598 2.598 0 00-1.063-1.05c-.458-.248-.978-.372-1.56-.372H4.703zm1.22 1.24c.307 0 .533.058.673.172.115.096.168.24.168.453a.885.885 0 01-.069.36.501.501 0 01-.142.201.346.346 0 01-.18.07c-.31.042-.543.095-.713.164a1.03 1.03 0 00-.543.536c-.093.201-.149.47-.174.818-.022.301-.033.725-.033 1.293-.012.796-.058 1.422-.137 1.861-.07.398-.206.74-.4 1.02-.197.282-.499.552-.898.804l-.616.39.618.386c.286.18.52.368.695.558.166.18.304.407.414.672.115.277.2.614.248 1.004.051.413.076.908.076 1.47 0 .587.013 1.025.037 1.34.03.367.094.64.196.835.123.236.303.403.537.496.168.067.395.114.693.148a.404.404 0 01.268.16c.081.1.123.259.123.471 0 .308-.064.608-.84.608-.477 0-.898-.094-1.25-.282a2.006 2.006 0 01-.813-.785 2.402 2.402 0 01-.31-1.197c-.048-2.666-.098-3.199-.139-3.37-.115-.472-.286-.83-.525-1.097a3.373 3.373 0 00-.776-.633c-.216-.13-.375-.254-.47-.369-.027-.032-.088-.136-.088-.416 0-.288.09-.471.293-.596.454-.28.781-.522.998-.746.244-.251.415-.565.51-.931.084-.328.132-.788.148-1.407.015-.58.03-1.305.049-2.177.016-.706.229-1.25.654-1.666.426-.416.988-.618 1.719-.618zm12.153 0c.477 0 .898.095 1.25.282.348.185.612.442.813.785.2.343.305.746.31 1.197.048 2.666.098 3.199.139 3.37.115.472.286.83.525 1.097.216.24.476.452.776.633.217.131.376.255.47.369.027.032.088.136.088.416 0 .287-.09.471-.293.596-.454.28-.78.522-.998.746-.243.25-.415.565-.51.931-.084.328-.132.788-.148 1.407-.015.58-.03 1.305-.049 2.177-.016.706-.229 1.25-.654 1.666-.426.416-.988.618-1.719.618-.307 0-.533-.058-.672-.172-.116-.096-.168-.24-.168-.453 0-.135.021-.253.069-.36a.512.512 0 01.14-.201.353.353 0 01.182-.07c.31-.042.543-.095.713-.164.238-.099.424-.284.54-.538.094-.201.152-.468.177-.816.021-.301.033-.727.033-1.295.012-.796.058-1.42.137-1.86.07-.397.204-.74.398-1.019.196-.281.499-.552.898-.804l.616-.39-.616-.386a3.412 3.412 0 01-.695-.558 2.275 2.275 0 01-.416-.672 3.871 3.871 0 01-.246-1.004 12.22 12.22 0 01-.078-1.47c0-.587-.012-1.025-.037-1.34-.03-.367-.092-.64-.194-.835a1.021 1.021 0 00-.539-.496 2.76 2.76 0 00-.691-.148.4.4 0 01-.268-.16c-.082-.1-.123-.259-.123-.471 0-.308.064-.608.84-.608zm-6.29 1.348c.052-.005.341-.005.394 0v.01a1.524 1.524 0 011.287 1.457c0 .62-.332.891-.332.916-.33.346-.123.744.467.695 0 0 2.4.012 2.445 0a.576.576 0 01.422.555l-.002 2.574c-.106.3-.396.36-.658.111-.025 0-.296-.332-.916-.332a1.521 1.521 0 00-1.457 1.286h-.008a4.897 4.897 0 000 .394h.008a1.524 1.524 0 001.457 1.287c.62 0 .89-.332.916-.332.27-.256.557-.225.658.112v2.783a.562.562 0 01-.563.562H8.061a.561.561 0 01-.563-.562V8.836c0-.261.18-.492.422-.555.046.012 2.443 0 2.443 0 .659.032.798-.349.469-.695 0-.025-.332-.296-.332-.916a1.521 1.521 0 011.285-1.457v-.01z\"\n            strokeWidth=\".75\"\n        />\n    </SvgIcon>\n)\n","import React, { useState } from \"react\"\nimport { Button, SxProps, Theme } from \"@mui/material\"\nimport { toMap } from \"../../../jacdac-ts/src/jdom/utils\"\nimport MakeCodeIcon from \"../icons/MakeCodeIcon\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport useMediaQueries from \"../hooks/useMediaQueries\"\nimport useSnackbar from \"../hooks/useSnackbar\"\nimport usePxtJson from \"../makecode/usePxtJson\"\n\nexport default function MakeCodeOpenSnippetButton(props: {\n    sx?: SxProps<Theme>\n    name?: string\n    code?: string\n    options?: { package?: string }\n    slug?: string\n    branch?: string\n    full?: boolean\n}) {\n    const { setError } = useSnackbar()\n    const { mobile } = useMediaQueries()\n    const [importing, setImporting] = useState(false)\n    const {\n        sx,\n        code = \"\",\n        options,\n        name = \"Jacdac demo\",\n        slug,\n        branch = \"master\",\n        full\n    } = props\n    const pxt = usePxtJson(slug, branch)\n    const disabled = importing || (slug && !pxt)\n\n    const handleClick = async () => {\n        const md = \"\\n\"\n        const target = \"microbit\"\n        const editor = \"https://makecode.microbit.org/\"\n        const deps = options?.package?.split(\",\").map(dep => dep.split(\"=\", 2))\n        const dependencies =\n            toMap(\n                deps,\n                deps => deps[0],\n                deps => deps[1]\n            ) || {}\n        if (pxt) dependencies[pxt.name] = `github:${slug}#v${pxt.version}`\n\n        try {\n            setImporting(true)\n            const x = await fetch(\"https://makecode.com/api/scripts\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Accept: \"application/json\",\n                },\n                body: JSON.stringify({\n                    name,\n                    target,\n                    description: \"Made with  in Microsoft Jacdac.\",\n                    editor: \"blocksprj\",\n                    text: {\n                        \"README.md\": md,\n                        \"main.blocks\": code\n                            ? \"\"\n                            : `<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>`,\n                        \"main.ts\": code,\n                        \"pxt.json\": JSON.stringify({\n                            name: name,\n                            dependencies: {\n                                core: \"*\",\n                                microphone: \"*\",\n                                ...dependencies,\n                            },\n                            description: \"\",\n                            files: [\"main.blocks\", \"main.ts\", \"README.md\"],\n                        }),\n                    },\n                    meta: {},\n                }),\n            })\n            const data = await x.json()\n            const url = `${editor}#pub:${data.shortid}`\n            window.open(url, \"_blank\", \"noreferrer\")\n        } catch (error) {\n            setError(error)\n        } finally {\n            setImporting(false)\n        }\n    }\n\n    if (mobile) // mobile blocks all popups\n        return undefined\n\n    return !full && mobile ? (\n        <IconButtonWithTooltip\n            sx={sx}\n            onClick={handleClick}\n            color=\"primary\"\n            disabled={disabled}\n            title=\"Try in MakeCode\"\n        >\n            <MakeCodeIcon />\n        </IconButtonWithTooltip>\n    ) : (\n        <Button\n            sx={sx}\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={handleClick}\n            disabled={disabled}\n            startIcon={<MakeCodeIcon />}\n        >\n            Try in MakeCode\n        </Button>\n    )\n}\n","import { rawUrl } from \"../github\"\nimport useFetch from \"../useFetch\"\n\nexport interface PxtJson {\n    name: string\n    description: string\n    version?: string\n    dependencies?: Record<string, string>\n}\n\nexport default function usePxtJson(slug: string, branch?: string) {\n    if (!slug)\n        return undefined\n    const url = rawUrl(slug, branch, \"pxt.json\")\n    const { response: pxtJson } = useFetch<PxtJson>(url)\n    return pxtJson\n}\n","import React, { ReactNode } from \"react\"\nimport { AlertColor, Box, Typography } from \"@mui/material\"\nimport SwitchWithLabel from \"./SwitchWithLabel\"\nimport Alert from \"./Alert\"\n\nexport default function AlertSwitch(props: {\n    severity?: AlertColor\n    title: string\n    checked: boolean\n    onChecked: (checked: boolean) => void\n    children?: ReactNode\n}) {\n    const { severity, title, checked, onChecked, children } = props\n    const handleChecked = (ev: unknown, newChecked: boolean) =>\n        onChecked(newChecked)\n    return (\n        <Alert severity={severity}>\n            <SwitchWithLabel\n                checked={checked}\n                onChange={handleChecked}\n                label={\n                    <Typography component=\"span\" variant=\"body1\">\n                        {title}\n                    </Typography>\n                }\n            />\n            <Box mr={1}>\n                <Typography component=\"span\" variant=\"caption\">\n                    {children}\n                </Typography>\n            </Box>\n        </Alert>\n    )\n}\n","import React from \"react\"\nimport {\n    CircularProgressProps,\n    Box,\n    CircularProgress,\n    Typography,\n} from \"@mui/material\"\n\nexport default function CircularProgressWithLabel(\n    props: CircularProgressProps & { value: number }\n) {\n    const { value } = props\n    return (\n        <Box position=\"relative\" display=\"inline-flex\">\n            <CircularProgress variant=\"determinate\" {...props} />\n            <Box\n                top={0}\n                left={0}\n                bottom={0}\n                right={0}\n                position=\"absolute\"\n                display=\"flex\"\n                alignItems=\"center\"\n                justifyContent=\"center\"\n            >\n                <Typography\n                    variant=\"caption\"\n                    component=\"div\"\n                    color=\"textSecondary\"\n                >{`${Math.round(value)}%`}</Typography>\n            </Box>\n        </Box>\n    )\n}\n","import { Box, Chip, Grid, Typography } from \"@mui/material\"\nimport { styled } from \"@mui/material/styles\"\nimport React, { ReactNode } from \"react\"\nimport clsx from \"clsx\"\n\nconst PREFIX = \"GridHeader\"\n\nconst classes = {\n    hr: `${PREFIX}hr`,\n    start: `${PREFIX}start`,\n}\n\nconst StyledGrid = styled(Grid)(({ theme }) => ({\n    [`& .${classes.hr}`]: {\n        background: theme.palette.text.disabled,\n        marginBottom: \"unset\",\n    },\n\n    [`& .${classes.start}`]: {\n        width: theme.spacing(2),\n    },\n}))\n\nexport default function GridHeader(props: {\n    title?: ReactNode\n    count?: number\n    variant?: \"subtitle1\" | \"caption\" | \"subtitle2\"\n    action?: JSX.Element\n}) {\n    const { title, count, variant, action } = props\n\n    return (\n        <StyledGrid item xs={12}>\n            <Grid\n                container\n                direction=\"row\"\n                spacing={1}\n                justifyContent=\"center\"\n                alignItems=\"center\"\n            >\n                <Grid item>\n                    <hr className={clsx(classes.hr, classes.start)} />\n                </Grid>\n                <Grid item>\n                    {action && (\n                        <Box component=\"span\" mr={1}>\n                            {action}\n                        </Box>\n                    )}\n                    <Typography\n                        component=\"span\"\n                        variant={variant || \"subtitle1\"}\n                    >\n                        {title}\n                    </Typography>\n                    {count !== undefined && (\n                        <Box component=\"span\" ml={0.5}>\n                            <Chip label={count} />\n                        </Box>\n                    )}\n                </Grid>\n                <Grid item xs>\n                    <hr className={classes.hr} />\n                </Grid>\n            </Grid>\n        </StyledGrid>\n    )\n}\n","import { Packet } from \"../../jacdac-ts/src/jdom/packet\"\nimport { useEffect } from \"react\"\nimport {\n    ControlCmd,\n    DEVICE_ANNOUNCE,\n    SRV_CONTROL,\n} from \"../../jacdac-ts/src/jdom/constants\"\nimport useBus from \"./useBus\"\n\n/**\n * A hook to force brains into proxy mode.\n * @param force\n */\nexport default function useProxy(force: boolean) {\n    const bus = useBus()\n    useEffect(() => {\n        if (!force) return\n\n        const forceProxy = () => {\n            const pkt = Packet.onlyHeader(ControlCmd.Proxy)\n            pkt.sendAsMultiCommandAsync(bus, SRV_CONTROL)\n        }\n        const unsub = bus.subscribe(DEVICE_ANNOUNCE, forceProxy)\n        forceProxy()\n        return unsub\n    }, [force])\n}\n","import { useState } from \"react\"\nimport useEffectAsync from \"../useEffectAsync\"\nimport { unique } from \"../../../jacdac-ts/src/jdom/utils\"\nimport {\n    BootloaderCmd,\n    ControlReg,\n    DEVICE_CHANGE,\n    SRV_BOOTLOADER,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport useEventRaised from \"../../jacdac/useEventRaised\"\nimport { Packet } from \"../../../jacdac-ts/src/jdom/packet\"\nimport useDeviceSpecifications from \"../devices/useDeviceSpecifications\"\nimport useDeviceCatalog from \"../devices/useDeviceCatalog\"\nimport { dependencyId } from \"../../../jacdac-ts/src/jdom/eventsource\"\nimport useBus from \"../../jacdac/useBus\"\n\nexport default function useFirmwareRepos(showAllRepos?: boolean) {\n    const bus = useBus()\n    const [repos, setRepos] = useState<string[]>([])\n    const specifications = useDeviceSpecifications()\n    const deviceCatalog = useDeviceCatalog()\n    const devices = useEventRaised(\n        DEVICE_CHANGE,\n        bus,\n        () => bus.devices({ announced: true, ignoreInfrastructure: true }),\n        []\n    )\n    const bootloaders = devices.filter(device => device.bootloader)\n    const registers = devices\n        .filter(device => !device.bootloader) // not a bootloader\n        .map(device =>\n            device.service(0)?.register(ControlReg.ProductIdentifier)\n        )\n        .filter(reg => !!reg)\n\n    useEffectAsync(\n        async mounted => {\n            let repos: string[] = []\n            if (showAllRepos) repos = specifications.map(spec => spec.repo)\n            else {\n                const productIdentifiers: number[] = []\n                // ask firmware registers\n                for (const register of registers) {\n                    await register.refresh(true)\n                    const productIdentifier = register.intValue\n                    if (\n                        productIdentifier !== undefined &&\n                        productIdentifiers.indexOf(productIdentifier) < 0\n                    )\n                        productIdentifiers.push(productIdentifier)\n                }\n\n                // ask bootloaders\n                for (const bootloader of bootloaders) {\n                    const boot = bootloader.services({\n                        serviceClass: SRV_BOOTLOADER,\n                    })[0]\n                    const bl_announce = Packet.onlyHeader(BootloaderCmd.Info)\n                    try {\n                        const resp = await boot.sendCmdAwaitResponseAsync(\n                            bl_announce\n                        )\n                        const [, , , productIdentifier] =\n                            resp.jdunpack<[number, number, number, number]>(\n                                \"u32 u32 u32 u32\"\n                            )\n                        if (\n                            productIdentifier !== undefined &&\n                            productIdentifiers.indexOf(productIdentifier) < 0\n                        )\n                            productIdentifiers.push(productIdentifier)\n                    } catch (e) {\n                        console.warn(`bootloader product identifier failed`, e)\n                    }\n                }\n                repos = productIdentifiers\n                    .map(\n                        fw =>\n                            deviceCatalog.specificationFromProductIdentifier(fw)\n                                ?.repo\n                    )\n                    .filter(repo => !!repo)\n            }\n            if (mounted) {\n                const urepos = unique(repos)\n                setRepos(urepos)\n            }\n        },\n        [\n            dependencyId(devices),\n            dependencyId(registers),\n            showAllRepos,\n            specifications,\n        ]\n    )\n    return repos\n}\n","import React, { lazy, useState } from \"react\"\nimport {\n    Button,\n    Card,\n    CardHeader,\n    CardActions,\n    CardContent,\n    ListItem,\n    List,\n    ListItemText,\n    Typography,\n} from \"@mui/material\"\nimport { useFirmwareBlob } from \"./useFirmwareBlobs\"\nimport Alert from \"../ui/Alert\"\nimport Suspense from \"../ui/Suspense\"\nconst ImportButton = lazy(() => import(\"../ImportButton\"))\n\nconst LOCAL_FILE_SLUG = \"local file\"\n\nexport default function LocalFileFirmwareCard() {\n    const slug = LOCAL_FILE_SLUG\n    const [downloading, setDownloading] = useState(false)\n    const [error, setError] = useState(\"\")\n    const { setFirmwareFile, firmwareBlobs } = useFirmwareBlob(slug)\n    const disabled = downloading\n    const version = firmwareBlobs?.[0].version\n\n    const handleFiles = async (files: File[]) => {\n        const file = files[0]\n        if (file) {\n            try {\n                setDownloading(true)\n                await setFirmwareFile(undefined, file)\n            } finally {\n                setDownloading(false)\n            }\n        }\n    }\n\n    const handleClear = async () => {\n        try {\n            setError(\"\")\n            setDownloading(true)\n            setFirmwareFile(undefined, undefined)\n        } finally {\n            setDownloading(false)\n        }\n    }\n\n    return (\n        <Card>\n            <CardHeader title={slug} />\n            <CardContent>\n                {error && <Alert severity=\"error\">{error}</Alert>}\n                {version && (\n                    <Typography variant=\"body2\">\n                        version <code>{version}</code>\n                    </Typography>\n                )}\n                {!!firmwareBlobs?.length && (\n                    <List dense>\n                        {firmwareBlobs.map(blob => (\n                            <ListItem key={blob.productIdentifier}>\n                                <ListItemText\n                                    primary={blob.name}\n                                    secondary={`0x${blob.productIdentifier.toString(\n                                        16\n                                    )}`}\n                                />\n                            </ListItem>\n                        ))}\n                    </List>\n                )}\n            </CardContent>\n            <CardActions>\n                {!downloading && (\n                    <Suspense>\n                        <ImportButton\n                            text={\"Import UF2 file\"}\n                            onFilesUploaded={handleFiles}\n                        />\n                    </Suspense>\n                )}\n                {!downloading && firmwareBlobs?.length && (\n                    <Button\n                        disabled={disabled}\n                        variant=\"text\"\n                        arial-label={\"Clear\"}\n                        onClick={handleClear}\n                    >\n                        Clear\n                    </Button>\n                )}\n            </CardActions>\n        </Card>\n    )\n}\n","import { Grid } from \"@mui/material\"\nimport React, { useContext } from \"react\"\nimport useGridBreakpoints from \"../useGridBreakpoints\"\nimport FirmwareCard from \"./FirmwareCard\"\n// tslint:disable-next-line: no-submodule-imports\nimport useFirmwareRepos from \"./useFirmwareRepos\"\nimport LocalFileFirmwareCard from \"./LocalFileFirmwareCard\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function FirmwareCardGrid() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const gridBreakpoints = useGridBreakpoints()\n    const safeBoot = useChange(bus, b => b.safeBoot)\n    const firmwareRepos = useFirmwareRepos(safeBoot)\n\n    return (\n        <Grid container spacing={2}>\n            <Grid {...gridBreakpoints} item key=\"localfile\">\n                <LocalFileFirmwareCard />\n            </Grid>\n            {firmwareRepos.map(firmwareRepo => (\n                <Grid\n                    {...gridBreakpoints}\n                    item\n                    key={`firmwarerepo${firmwareRepo}`}\n                >\n                    <FirmwareCard slug={firmwareRepo} />\n                </Grid>\n            ))}\n        </Grid>\n    )\n}\n","import { Grid } from \"@mui/material\"\nimport React, { useContext } from \"react\"\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\"\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\"\nimport DeviceCard from \"./devices/DeviceCard\"\nimport useGridBreakpoints from \"./useGridBreakpoints\"\nimport useChange from \"../jacdac/useChange\"\nimport useDevices from \"./hooks/useDevices\"\nimport { FlashDeviceButton } from \"./firmware/FlashDeviceButton\"\nimport useDeviceFirmwareBlob from \"./firmware/useDeviceFirmwareBlob\"\nimport { isDualDeviceId } from \"../../jacdac-ts/src/jdom/spec\"\n\nfunction UpdateDeviceCard(props: { device: JDDevice }) {\n    const { device } = props\n    const blob = useDeviceFirmwareBlob(device)\n\n    return (\n        <DeviceCard\n            device={device}\n            showFirmware={true}\n            showReset={true}\n            // tslint:disable-next-line: react-this-binding-issue\n            action={<FlashDeviceButton device={device} blob={blob} />}\n        />\n    )\n}\n\nexport default function UpdateDeviceList() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const gridBreakpoints = useGridBreakpoints(3)\n    const safeBoot = useChange(bus, b => b.safeBoot)\n    const devices = useDevices(\n        {\n            announced: true,\n            ignoreInfrastructure: true,\n            ignoreSimulators: true,\n        },\n        [safeBoot]\n    ).filter(\n        (dev, _, devs) =>\n            safeBoot || // show all devices\n            !dev.bootloader || // show non-bootloader devices\n            !devs.some(d => isDualDeviceId(d.deviceId, dev.deviceId)) // show bootloaders which don't have the application device listed\n    )\n\n    return (\n        <Grid container spacing={2}>\n            {devices.map(device => (\n                <Grid key={device.id} item {...gridBreakpoints}>\n                    <UpdateDeviceCard device={device} />\n                </Grid>\n            ))}\n        </Grid>\n    )\n}\n","import { Box, Button, Typography } from \"@mui/material\"\nimport React, { useContext } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport Alert from \"../ui/Alert\"\nimport DbContext, { DbContextProps } from \"../DbContext\"\n// tslint:disable-next-line: match-default-export-name tslint:disable-next-line: no-submodule-imports\nimport DeleteForeverIcon from \"@mui/icons-material/DeleteForever\"\nimport useChange from \"../../jacdac/useChange\"\nimport useSnackbar from \"../hooks/useSnackbar\"\nimport AlertSwitch from \"../ui/AlertSwitch\"\nimport useProxy from \"../../jacdac/useProxy\"\n\nexport default function SafeBootAlert(props: { proxy?: boolean }) {\n    const { proxy } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { db } = useContext<DbContextProps>(DbContext)\n    const { enqueueSnackbar } = useSnackbar()\n    const safeBoot = useChange(bus, _ => _.safeBoot)\n    const firmwares = db?.firmwares\n\n    const handleRecovery = async () => (bus.safeBoot = !bus.safeBoot)\n    const handleClear = async () => {\n        await firmwares.clear()\n        enqueueSnackbar(\"firmwares cleared\", \"info\")\n    }\n    useProxy(safeBoot || proxy)\n    return (\n        <>\n            <AlertSwitch\n                severity=\"info\"\n                title=\"recovery mode\"\n                checked={safeBoot}\n                onChecked={handleRecovery}\n            >\n                If your module is malfunctioning from the start, you can flash\n                it in bootloader mode. Turn on recovery mode and unplug/replug\n                any malfunctioning device to switch it to bootloader mode\n                (glowing status LED). Once your module is flashed, turn off\n                recovery mode and unplug/replug your module again.\n            </AlertSwitch>\n            {safeBoot && (\n                <Alert severity=\"warning\">\n                    <Button\n                        size=\"small\"\n                        variant=\"outlined\"\n                        disabled={!firmwares}\n                        onClick={handleClear}\n                        startIcon={<DeleteForeverIcon />}\n                    >\n                        clear cache\n                    </Button>\n                    <Box mr={1}>\n                        <Typography component=\"span\" variant=\"caption\">\n                            Delete all firmware cached in the browser. The\n                            firmware will have to be deleted again from this\n                            interface.\n                        </Typography>\n                    </Box>\n                </Alert>\n            )}\n        </>\n    )\n}\n","import { MenuItem, SelectChangeEvent } from \"@mui/material\"\nimport React, { useContext } from \"react\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport SelectWithLabel from \"../ui/SelectWithLabel\"\n\nexport default function SelectDevice(props: {\n    devices: JDDevice[]\n    deviceId: string\n    onChange: (newDeviceId: string) => void\n}) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { devices, deviceId, onChange } = props\n\n    const handleDeviceChange = async (ev: SelectChangeEvent<string>) => {\n        const id = ev.target.value\n        onChange(id)\n        const device = bus.node(id) as JDDevice\n        await device?.identify()\n    }\n    return (\n        <SelectWithLabel\n            helperText=\"choose a device\"\n            value={deviceId}\n            onChange={handleDeviceChange}\n            disabled={!devices?.length}\n        >\n            {devices?.map(dev => (\n                <MenuItem key={dev.id} value={dev.id}>\n                    {dev.describe()}\n                </MenuItem>\n            ))}\n        </SelectWithLabel>\n    )\n}\n","import { Grid, MenuItem, SelectChangeEvent, Typography } from \"@mui/material\"\nimport React, { useContext, useState } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport Alert from \"../ui/Alert\"\nimport useBus from \"../../jacdac/useBus\"\nimport useDevices from \"../hooks/useDevices\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport SelectWithLabel from \"../ui/SelectWithLabel\"\nimport { FirmwareBlob } from \"../../../jacdac-ts/src/jdom/flashing\"\nimport { FlashDeviceButton } from \"./FlashDeviceButton\"\nimport { unique } from \"../../../jacdac-ts/src/jdom/utils\"\nimport SelectDevice from \"../select/SelectDevice\"\nimport useChange from \"../../jacdac/useChange\"\nimport AlertSwitch from \"../ui/AlertSwitch\"\n\nconst fwid = (fw: FirmwareBlob) =>\n    fw ? `${fw.store},${fw.productIdentifier},${fw.version}` : \"\"\n\nfunction ManualFirmware() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const devices = useDevices({\n        announced: true,\n        ignoreInfrastructure: true,\n        ignoreSimulators: true,\n    })\n    const firmwares = useChange(bus, _ => _?.firmwareBlobs)\n    const stores = unique(firmwares.map(fw => fw.store))\n    const [deviceId, setDeviceId] = useState(devices?.[0]?.id)\n    const [firmwareId, setFirmwareId] = useState<string>(fwid(firmwares?.[0]))\n    const [store, setStore] = useState<string>(stores?.[0] || \"\")\n\n    const handleDeviceChange = (newId: string) => setDeviceId(newId)\n    const handleStoreChange = (ev: SelectChangeEvent<string>) => {\n        const store = ev.target.value\n        setStore(store)\n    }\n    const handleFirmwareChange = (ev: SelectChangeEvent<string>) => {\n        const id = ev.target.value\n        setFirmwareId(id)\n    }\n\n    const device = bus.node(deviceId) as JDDevice\n    const blob = firmwares.find(fw => fwid(fw) === firmwareId)\n\n    return (\n        <Grid container spacing={1}>\n            <Grid item xs={12}>\n                <SelectDevice\n                    devices={devices}\n                    deviceId={deviceId}\n                    onChange={handleDeviceChange}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <Grid container direction=\"row\" spacing={1}>\n                    <Grid item>\n                        <SelectWithLabel\n                            helperText=\"choose a firmware\"\n                            value={store}\n                            onChange={handleStoreChange}\n                        >\n                            {stores?.map(store => (\n                                <MenuItem key={store} value={store}>\n                                    {store}\n                                </MenuItem>\n                            ))}\n                        </SelectWithLabel>\n                    </Grid>\n                    <Grid item>\n                        <SelectWithLabel\n                            helperText=\"choose a module\"\n                            value={firmwareId}\n                            onChange={handleFirmwareChange}\n                        >\n                            {firmwares\n                                ?.filter(fw => fw.store === store)\n                                .map(fw => (\n                                    <MenuItem key={fwid(fw)} value={fwid(fw)}>\n                                        {fw.name} &nbsp;\n                                        <Typography variant=\"caption\">\n                                            {fw.version}, &nbsp;\n                                            {`0x${fw.productIdentifier.toString(\n                                                16\n                                            )}`}\n                                        </Typography>\n                                    </MenuItem>\n                                ))}\n                        </SelectWithLabel>\n                    </Grid>\n                </Grid>\n            </Grid>\n            <Grid item xs={12}>\n                <FlashDeviceButton\n                    device={device}\n                    blob={blob}\n                    ignoreFirmwareCheck={true}\n                />\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default function ManualFirmwareAlert() {\n    const bus = useBus()\n    const safeBoot = useChange(bus, _ => _.safeBoot)\n    const [enabled, setEnabled] = useState(false)\n    const handleToggle = async () => {\n        const v = !enabled\n        setEnabled(v)\n    }\n\n    if (!safeBoot) return null\n\n    return (\n        <>\n            <AlertSwitch\n                severity=\"info\"\n                checked={enabled}\n                onChecked={handleToggle}\n                title=\"manual mode\"\n            >\n                Manually select which firmware to upload on your device.\n            </AlertSwitch>\n            {enabled && (\n                <Alert severity=\"warning\">\n                    <ManualFirmware />\n                </Alert>\n            )}\n        </>\n    )\n}\n","import {\n    Box,\n    Card,\n    CardContent,\n    CardHeader,\n    Grid,\n    Tab,\n    Tabs,\n} from \"@mui/material\"\nimport React, { Fragment, useContext, useState } from \"react\"\nimport TabPanel from \"../ui/TabPanel\"\nimport ConnectAlert from \"../alert/ConnectAlert\"\nimport FirmwareCardGrid from \"../firmware/FirmwareCardGrid\"\n// tslint:disable-next-line: no-submodule-imports\nimport UpdateDeviceList from \"../UpdateDeviceList\"\nimport SafeBootAlert from \"../firmware/SafeBootAlert\"\nimport ManualFirmwareAlert from \"../firmware/ManualFirmwareAlert\"\nimport { Flags } from \"../../../jacdac-ts/src/jdom/flags\"\nimport useFirmwareBlobs from \"../firmware/useFirmwareBlobs\"\nimport GridHeader from \"../ui/GridHeader\"\nimport { groupBy } from \"../../../jacdac-ts/src/jdom/utils\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport { FLASH_MAX_DEVICES } from \"../../../jacdac-ts/src/jdom/constants\"\nimport useChange from \"../../jacdac/useChange\"\nimport Alert from \"../ui/Alert\"\nimport { AlertTitle } from \"@mui/material\"\nimport FirmwareLoader from \"../firmware/FirmwareLoader\"\n\nfunction FlashDiagnostics() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const blobs = useChange(bus, _ => _?.firmwareBlobs)\n    const stores = groupBy(blobs, blob => blob.store)\n    return (\n        <Grid container spacing={2}>\n            {Object.entries(stores).map(([store, blobs]) => (\n                <Fragment key={store}>\n                    <GridHeader title={store} />\n                    {blobs?.map(blob => (\n                        <Grid item key={blob.store + blob.productIdentifier}>\n                            <Card>\n                                <CardHeader\n                                    title={blob.name}\n                                    subheader={blob.version}\n                                />\n                                <CardContent>\n                                    pid: 0x{blob.productIdentifier.toString(16)}\n                                    , {blob.pages.length} pages\n                                </CardContent>\n                            </Card>\n                        </Grid>\n                    ))}\n                </Fragment>\n            ))}\n        </Grid>\n    )\n}\n\nexport default function Flash() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const [tab, setTab] = useState(0)\n    const { throttled } = useFirmwareBlobs()\n    const devices = useChange(bus, _ => _.devices({ physical: true }))\n\n    const handleTabChange = (\n        event: React.ChangeEvent<unknown>,\n        newValue: number\n    ) => {\n        setTab(newValue)\n    }\n\n    return (\n        <Box mb={2}>\n            {throttled && (\n                <Alert severity=\"error\">\n                    <AlertTitle>Try again later...</AlertTitle>\n                    Oops, it looks like we have been polling firmware too much\n                    from GitHub. Please try again later.\n                </Alert>\n            )}\n            {devices?.filter(d => !d.bootloader)?.length >\n                FLASH_MAX_DEVICES && (\n                <Alert severity=\"error\">\n                    <AlertTitle>Too many connected devices</AlertTitle>\n                    Please unplug some of your devices before updating.\n                </Alert>\n            )}\n            <ConnectAlert />\n            <Tabs\n                value={tab}\n                onChange={handleTabChange}\n                aria-label=\"Update firmware of modules\"\n            >\n                <Tab label={`Updates`} />\n                <Tab label={`Firmwares`} />\n            </Tabs>\n            <TabPanel value={tab} index={0}>\n                <UpdateDeviceList />\n            </TabPanel>\n            <TabPanel value={tab} index={1}>\n                <FirmwareCardGrid />\n            </TabPanel>\n            <SafeBootAlert />\n            <ManualFirmwareAlert />\n            {Flags.diagnostics && <FlashDiagnostics />}\n            <FirmwareLoader />\n        </Box>\n    )\n}\n","import React from \"react\"\nimport Flash from \"../../components/tools/Flash\"\n\nexport const frontmatter = {\n    title: \"Firmware Updater\",\n    description: \"Upgrade devices to the latest firmware version.\",\n}\nimport CoreHead from \"../../components/shell/Head\"\nexport const Head = (props) => <CoreHead {...props} {...frontmatter} />\n\nexport default function Page() {\n    return (\n        <>\n            <h1>Firmware Updater</h1>\n            <p>\n                This page allows you to update your Jacdac module with new\n                firmware. Find the latest UF2 firmware file from your\n                manufacturer and import it with the button below.\n            </p>\n            <Flash />\n        </>\n    )\n}\n"],"names":["useContext","devices","useDevices","ignoreInfrastructure","spec","serviceSpecificationFromClassIdentifier","UIFlags","transports","useFirmwareBlobs","bus","useBus","useState","useAnalytics","handleOpen","trackEvent","device","specification","firmwareName","setOpen","handleClose","useLatestReleaseAsset","current","productIdentifier","info","hasUpdate","semverCmp","useEffect","version","ml","assertUrl","useSnackbar","useDeviceSpecification","firmwares","bootloader","useChange","_","firmwareUpdater","firmwareInfo","useDeviceFirmwareInfo","update","ignoreFirmwareCheck","updateApplicable","upToDate","blob","unsupported","missing","disabled","color","v","setProgress","handleFlashing","props","productId","name","console","updater","updateCandidates","trackError","setError","hideUpToDate","fw","blobs","b","a","importUrl","normalizeSlug","response","useLatestFirmwareRelease","showRelease","showMakeCodeImportButton","release","showMakeCodeButton","repoName","useMediaQueries","code","branch","pxt","usePxtJson","importing","slug","handleClick","md","target","editor","deps","options","dep","dependencies","toMap","setImporting","x","fetch","method","headers","Accept","body","JSON","description","text","core","microphone","files","meta","data","url","window","rawUrl","useFetch","handleChecked","onChecked","Math","PREFIX","classes","hr","start","StyledGrid","styled","background","theme","marginBottom","width","clsx","action","variant","count","forceProxy","pkt","Packet","ControlCmd","unsub","specifications","useDeviceSpecifications","deviceCatalog","useDeviceCatalog","useEventRaised","announced","bootloaders","registers","ControlReg","reg","useEffectAsync","repos","productIdentifiers","register","boot","serviceClass","bl_announce","BootloaderCmd","resp","repo","urepos","unique","setRepos","dependencyId","ImportButton","lazy","LOCAL_FILE_SLUG","useFirmwareBlob","firmwareBlobs","handleFiles","file","setDownloading","setFirmwareFile","handleClear","error","gridBreakpoints","useGridBreakpoints","safeBoot","firmwareRepos","useFirmwareRepos","firmwareRepo","useDeviceFirmwareBlob","ignoreSimulators","dev","devs","d","isDualDeviceId","db","handleRecovery","enqueueSnackbar","useProxy","handleDeviceChange","id","ev","onChange","fwid","stores","newId","setDeviceId","handleStoreChange","store","setStore","handleFirmwareChange","setFirmwareId","handleToggle","setEnabled","enabled","groupBy","Object","physical","handleTabChange","setTab","throttled","Flags","frontmatter","title","Head"],"sourceRoot":""}